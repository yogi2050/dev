<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/servlets/servlets-hits-counter.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:42:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Servlets Page Hits Counter</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Servlets, Tutorials, Learning, Beginners, Basics, Environment, Life Cycle, Examples, Client Request, Server Response, Http Codes, Writing Filters, Exceptions, Cookies, Sessions, Database Access, File Uploading, File Uploading, Internationalization." />
<meta name="keywords" content="Servlets Page Hits Counter - Learning Java Servlets in simple and easy steps using this beginner's tutorial containing basic to advanced knowledge of Java Servlet Technology including Form Data, HTTP Request Header, Response Header, Status Codes, Cookies Handling and Session Tracking." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#de3b43  !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#fb5f67  !important;
}
#topmenu
{
background-color:#6c6b6b !important;
}
#leftcol ul.menu li.heading 
{
background:#fb5f67 !important;
border:1px solid #6c6b6b  !important;
}
#leftcol, #middlecol, #rightcol {min-height:1200px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index-2.html">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index-2.html" target="_top">HOME </a>
<a href="../java/index.html" target="_top">JAVA </a>
<a href="../php/index.html" target="_top">PHP </a>
<a href="../python/index.html" target="_top">Python </a>
<a href="../ruby/index.html" target="_top">Ruby </a>
<a href="../perl/index.html" target="_top">Perl </a>
<a href="../html/index.html" target="_top">HTML </a>
<a href="../css/index.html" target="_top">CSS </a>
<a href="../javascript/index.html" target="_top">Javascript </a>
<a href="../mysql/index.html" target="_top">MySQL </a>
<a href="../cplusplus/index.html" target="_top">C++ </a>
<a href="../unix/index.html" target="_top">UNIX </a>
<a href="../more.html" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.html" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.html" target="_top">ABOUT</a> |
<a href="../about/contact_us.html" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/servlets-mini-logo.png" alt="Servlets Tutorial" />
</div>
<ul class="menu">
<li class="heading">Servlets Tutorial</li>
<li><a target="_top" href="index.html">Servlets - Home</a></li>
<li><a target="_top" href="servlets-overview.html">Servlets - Overview</a></li>
<li><a target="_top" href="servlets-environment-setup.html">Servlets - Environment</a></li>
<li><a target="_top" href="servlets-life-cycle.html">Servlets - Life Cycle</a></li>
<li><a target="_top" href="servlets-first-example.html">Servlets - Examples</a></li>
<li><a target="_top" href="servlets-form-data.html">Servlets - Form Data</a></li>
<li><a target="_top" href="servlets-client-request.html">Servlets - Client Request</a></li>
<li><a target="_top" href="servlets-server-response.html">Servlets - Server Response</a></li>
<li><a target="_top" href="servlets-http-status-codes.html">Servlets - Http Codes</a></li>
<li><a target="_top" href="servlets-writing-filters.html">Servlets - Writing Filters</a></li>
<li><a target="_top" href="servlets-exception-handling.html">Servlets - Exceptions</a></li>
<li><a target="_top" href="servlets-cookies-handling.html">Servlets - Cookies Handling</a></li>
<li><a target="_top" href="servlets-session-tracking.html">Servlets - Session Tracking</a></li>
<li><a target="_top" href="servlets-database-access.html">Servlets - Database Access</a></li>
<li><a target="_top" href="servlets-file-uploading.html">Servlets - File Uploading</a></li>
<li><a target="_top" href="servlets-handling-date.html">Servlets - Handling Date</a></li>
<li><a target="_top" href="servlets-page-redirect.html">Servlets - Page Redirect</a></li>
<li><a target="_top" href="servlets-hits-counter.html"><b>Servlets - Hits Counter</b></a></li>
<li><a target="_top" href="servlets-auto-refresh.html">Servlets - Auto Refresh</a></li>
<li><a target="_top" href="servlets-sending-email.html">Servlets - Sending Email</a></li>
<li><a target="_top" href="servlets-packaging.html">Servlets - Packaging</a></li>
<li><a target="_top" href="servlets-debugging.html">Servlets - Debugging</a></li>
<li><a target="_top" href="servlets-internationalization.html">Servlet Internationalization</a></li>
</ul>
<ul class="menu">
<li class="heading">Servlets Useful Resources</li>
<li><a target="_top" href="servlets-quick-guide.html">Servlets - Quick Guide</a></li>
<li><a target="_top" href="servlets-useful-resources.html">Servlets Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Servlets - Hits Counter</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="servlets-page-redirect.html">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="servlets-auto-refresh.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<h2>Hit Counter for a Web Page:</h2>
<p>Many times you would be interested in knowing total number of hits on a particular page of your website. It is very simple to count these hits using a servlet because the life cycle of a servlet is controlled by the container in which it runs.</p>
<p>Following are the steps to be taken to implement a  simple page hit counter which is based on Servlet Life Cycle:</p>
<ul class="list">
<li><p>Initialize a global variable in init()  method.</p></li>
<li><p>Increase global variable every time either doGet() or doPost() method is called.</p></li>
<li><p>If required, you can use a database table to store the value of global variable in destroy() method. This value can be read inside init() method when servlet would be initialized next time. This step is optional.</p></li>
<li><p>If you want to count only unique page hits with-in a session then you can use isNew() method to check if same page already have been hit with-in that session. This step is optional.</p></li>
<li><p>You can display value of the global counter to show total number of hits on your web site. This step is also optional.</p></li>
</ul>
<p>Here I'm assuming that the web container will not be restarted. If it is restarted or servlet destroyed, the hit counter will be reset.</p>
<h2>Example:</h2>
<p>This example shows how to implement a simple page hit counter:</p>
<pre class="prettyprint">
import java.io.*;
import java.sql.Date;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class PageHitCounter extends HttpServlet{
    
  private int hitCount; 
               
  public void init() 
  { 
     // Reset hit counter.
     hitCount = 0;
  } 

  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
            throws ServletException, IOException
  {
      // Set response content type
      response.setContentType("text/html");
      // This method executes whenever the servlet is hit 
      // increment hitCount 
      hitCount++; 
      PrintWriter out = response.getWriter();
      String title = "Total Number of Hits";
      String docType =
      "&lt;!doctype html public \"-//w3c//dtd html 4.0 " +
      "transitional//en\"&gt;\n";
      out.println(docType +
        "&lt;html&gt;\n" +
        "&lt;head&gt;&lt;title&gt;" + title + "&lt;/title&gt;&lt;/head&gt;\n" +
        "&lt;body bgcolor=\"#f0f0f0\"&gt;\n" +
        "&lt;h1 align=\"center\"&gt;" + title + "&lt;/h1&gt;\n" +
        "&lt;h2 align=\"center\"&gt;" + hitCount + "&lt;/h2&gt;\n" +
        "&lt;/body&gt;&lt;/html&gt;");

  }
  public void destroy() 
  { 
      // This is optional step but if you like you
      // can write hitCount value in your database.
  } 
} 
</pre>
<p>Now let us compile above servlet and create following entries in web.xml</p>
<pre class="prettyprint">
....
 &lt;servlet&gt;
     &lt;servlet-name&gt;PageHitCounter&lt;/servlet-name&gt;
     &lt;servlet-class&gt;PageHitCounter&lt;/servlet-class&gt;
 &lt;/servlet&gt;

 &lt;servlet-mapping&gt;
     &lt;servlet-name&gt;PageHitCounter&lt;/servlet-name&gt;
     &lt;url-pattern&gt;/PageHitCounter&lt;/url-pattern&gt;
 &lt;/servlet-mapping&gt;
....
</pre>
<p>Now call this servlet using URL http://localhost:8080/PageHitCounter. This would increase counter by one every time this page gets refreshed and it would display following result:</p>
<table class="src" cellpadding="5" cellspacing="5">
<tr><td>
<h1 align="center">Total Number of Hits</h1>
<h2 align="center">6</h2>
</td></tr>
</table>
<h2>Hit Counter for a Website:</h2>
<p>Many times you would be interested in knowing total number of hits on your whole website. This is also very simple in Servlet and we can achieve this using filters.</p>
<p>Following are the steps to be taken to implement a  simple website hit counter which is based on Filter Life Cycle:</p>
<ul class="list">
<li><p>Initialize a global variable in init()  method of a filter.</p></li>
<li><p>Increase global variable every time doFilter method is called.</p></li>
<li><p>If required, you can use a database table to store the value of global variable in destroy() method of filter. This value can be read inside init() method when filter would be initialized next time. This step is optional.</p></li>
</ul>
<p>Here I'm assuming that the web container will not be restarted. If it is restarted or servlet destroyed, the hit counter will be reset.</p>
<h2>Example:</h2>
<p>This example shows how to implement a simple website hit counter:</p>
<pre class="prettyprint">
// Import required java libraries
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.util.*;

public class SiteHitCounter implements Filter{
    
  private int hitCount; 
               
  public void  init(FilterConfig config) 
                    throws ServletException{
     // Reset hit counter.
     hitCount = 0;
  }

  public void  doFilter(ServletRequest request, 
              ServletResponse response,
              FilterChain chain) 
              throws java.io.IOException, ServletException {

      // increase counter by one
      hitCount++;

      // Print the counter.
      System.out.println("Site visits count :"+ hitCount );

      // Pass request back down the filter chain
      chain.doFilter(request,response);
  }
  public void destroy() 
  { 
      // This is optional step but if you like you
      // can write hitCount value in your database.
  } 
} 
</pre>
<p>Now let us compile above servlet and create following entries in web.xml</p>
<pre class="prettyprint">
....
&lt;filter&gt;
   &lt;filter-name&gt;SiteHitCounter&lt;/filter-name&gt;
   &lt;filter-class&gt;SiteHitCounter&lt;/filter-class&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
   &lt;filter-name&gt;SiteHitCounter&lt;/filter-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;

....
</pre>
<p>Now call any URL like URL http://localhost:8080/. This would increase counter by one every time any page gets a hit and it would display following message in the log:</p>
<pre class="prettyprint">
Site visits count : 1
Site visits count : 2
Site visits count : 3
Site visits count : 4
Site visits count : 5
..................
</pre>
<hr />
<div class="pre-btn">
<a href="servlets-page-redirect.html">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/servlets-hits-counter.pdf" alt="Servlets Page Hits Counter" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="servlets-auto-refresh.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.html" target="_top">ASP.NET </a> |
<a href="../jquery/index.html" target="_top">jQuery </a> |
<a href="../ajax/index.html" target="_top">AJAX </a> |
<a href="../ant/index.html" target="_top">ANT</a> |
<a href="../jsp/index.html" target="_top">JSP </a> |
<a href="index.html" target="_top">Servlets </a> |
<a href="../log4j/index.html" target="_top">log4j </a> |
<a href="../ibatis/index.html" target="_top">iBATIS </a> |
<a href="../hibernate/index.html" target="_top">Hibernate </a> |
<a href="../jdbc/index.html" target="_top">JDBC </a> |
<a href="../struts_2/index.html" target="_top">Struts </a> |
<a href="../html5/index.html" target="_top">HTML5 </a> |
<a href="../sql/index.html" target="_top">SQL </a> |
<a href="../mysql/index.html" target="_top">MySQL </a> |
<a href="../cplusplus/index.html" target="_top">C++ </a> |
<a href="../unix/index.html" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2012 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/servlets/servlets-hits-counter.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:42:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>