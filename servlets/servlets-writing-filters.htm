<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/servlets/servlets-writing-filters.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:02:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Servlets Filters</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Servlets, Tutorials, Learning, Beginners, Basics, Environment, Life Cycle, Examples, Client Request, Server Response, Http Codes, Writing Filters, Exceptions, Cookies, Sessions, Database Access, File Uploading, File Uploading, Internationalization." />
<meta name="keywords" content="Servlets Filters - Learning Java Servlets in simple and easy steps using this beginner's tutorial containing basic to advanced knowledge of Java Servlet Technology including Form Data, HTTP Request Header, Response Header, Status Codes, Cookies Handling and Session Tracking." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#de3b43  !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#fb5f67  !important;
}
#topmenu
{
background-color:#6c6b6b !important;
}
#leftcol ul.menu li.heading 
{
background:#fb5f67 !important;
border:1px solid #6c6b6b  !important;
}
#leftcol, #middlecol, #rightcol {min-height:1200px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="../unix/index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/servlets-mini-logo.png" alt="Servlets Tutorial" />
</div>
<ul class="menu">
<li class="heading">Servlets Tutorial</li>
<li><a target="_top" href="index.htm">Servlets - Home</a></li>
<li><a target="_top" href="servlets-overview.htm">Servlets - Overview</a></li>
<li><a target="_top" href="servlets-environment-setup.htm">Servlets - Environment</a></li>
<li><a target="_top" href="servlets-life-cycle.htm">Servlets - Life Cycle</a></li>
<li><a target="_top" href="servlets-first-example.htm">Servlets - Examples</a></li>
<li><a target="_top" href="servlets-form-data.htm">Servlets - Form Data</a></li>
<li><a target="_top" href="servlets-client-request.htm">Servlets - Client Request</a></li>
<li><a target="_top" href="servlets-server-response.htm">Servlets - Server Response</a></li>
<li><a target="_top" href="servlets-http-status-codes.htm">Servlets - Http Codes</a></li>
<li><a target="_top" href="servlets-writing-filters.htm"><b>Servlets - Writing Filters</b></a></li>
<li><a target="_top" href="servlets-exception-handling.htm">Servlets - Exceptions</a></li>
<li><a target="_top" href="servlets-cookies-handling.htm">Servlets - Cookies Handling</a></li>
<li><a target="_top" href="servlets-session-tracking.htm">Servlets - Session Tracking</a></li>
<li><a target="_top" href="servlets-database-access.htm">Servlets - Database Access</a></li>
<li><a target="_top" href="servlets-file-uploading.htm">Servlets - File Uploading</a></li>
<li><a target="_top" href="servlets-handling-date.htm">Servlets - Handling Date</a></li>
<li><a target="_top" href="servlets-page-redirect.htm">Servlets - Page Redirect</a></li>
<li><a target="_top" href="servlets-hits-counter.htm">Servlets - Hits Counter</a></li>
<li><a target="_top" href="servlets-auto-refresh.htm">Servlets - Auto Refresh</a></li>
<li><a target="_top" href="servlets-sending-email.htm">Servlets - Sending Email</a></li>
<li><a target="_top" href="servlets-packaging.htm">Servlets - Packaging</a></li>
<li><a target="_top" href="servlets-debugging.htm">Servlets - Debugging</a></li>
<li><a target="_top" href="servlets-internationalization.htm">Servlet Internationalization</a></li>
</ul>
<ul class="menu">
<li class="heading">Servlets Useful Resources</li>
<li><a target="_top" href="servlets-quick-guide.htm">Servlets - Quick Guide</a></li>
<li><a target="_top" href="servlets-useful-resources.htm">Servlets Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Servlets - Writing Filters</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="servlets-http-status-codes.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="servlets-exception-handling.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>Servlet Filters are Java classes that can be used in Servlet Programming for the following purposes:</p>
<ul class="list">
<li><p>To intercept requests from a client before they access a resource at back end.</p></li>
<li><p>To manipulate responses from server before they are sent back to the client.</p></li>
</ul>
<p>There are are various types of filters suggested by the specifications:</p>
<ul class="list">
<li><p>Authentication Filters.</p></li>
<li><p>Data compression Filters. </p></li>
<li><p>Encryption Filters.</p></li>
<li><p>Filters that trigger resource access events.</p></li>
<li><p>Image Conversion Filters.</p></li>
<li><p>Logging and Auditing Filters.</p></li> 
<li><p>MIME-TYPE Chain Filters.</p></li>
<li><p>Tokenizing Filters .</p></li>
<li><p>XSL/T Filters That Transform XML Content.</p></li> 
</ul>
<p>Filters are deployed in the deployment descriptor file <b>web.xml </b> and then map to either servlet names or URL patterns in your application's deployment descriptor.</p>
<p>When the web container starts up your web application, it creates an instance of each filter that you have declared in the deployment descriptor. The filters execute in the order that they are declared in the deployment descriptor.</p>
<h2>Servlet Filter Methods:</h2>
<p>A filter is simply a Java class that implements the javax.servlet.Filter interface. The javax.servlet.Filter interface defines three methods:</p>
<table class="src">
<tr><th style="width:5%">S.N.</th><th>Method &amp; Description</th></tr>
<tr><td>1</td><td><b>public void doFilter (ServletRequest, ServletResponse, FilterChain)</b><br />This method is called by the container each time a request/response pair is passed through the chain due to a client request for a resource at the end of the chain.</td></tr>
<tr><td>2</td><td><b>public void init(FilterConfig filterConfig)</b><br />This method is called by the web container to indicate to a filter that it is being placed into service.</td></tr>
<tr><td>3</td><td><b>public void destroy()</b><br />This method is called by the web container to indicate to a filter that it is being taken out of service.</td></tr>
</table>
<h2>Servlet Filter Example:</h2>
<p>Following is the Servlet Filter Example that would print the clients IP address and current date time. This example would give you basic understanding of Servlet Filter, but you can write more sophisticated filter applications using the same concept:</p>
<pre class="prettyprint">
// Import required java libraries
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.util.*;

// Implements Filter class
public class LogFilter implements Filter  {
   public void  init(FilterConfig config) 
                         throws ServletException{
      // Get init parameter 
      String testParam = config.getInitParameter("test-param"); 

      //Print the init parameter 
      System.out.println("Test Param: " + testParam); 
   }
   public void  doFilter(ServletRequest request, 
                 ServletResponse response,
                 FilterChain chain) 
                 throws java.io.IOException, ServletException {

      // Get the IP address of client machine.   
      String ipAddress = request.getRemoteAddr();

      // Log the IP address and current timestamp.
      System.out.println("IP "+ ipAddress + ", Time "
                                       + new Date().toString());

      // Pass request back down the filter chain
      chain.doFilter(request,response);
   }
   public void destroy( ){
      /* Called before the Filter instance is removed 
      from service by the web container*/
   }
}
</pre>
<p>Compile <b>LogFilter.java</b> in usual way and put your class file in &lt;Tomcat-installation-directory&gt;/webapps/ROOT/WEB-INF/classes.</p>
<h2>Servlet Filter Mapping in Web.xml:</h2>
<p>Filters are defined and then mapped to a URL or Servlet, in much the same way as Servlet is defined and then mapped to a URL pattern. Create the following entry for filter tag in the deployment descriptor file <b>web.xml </b></p>
<pre class="prettyprint">
&lt;filter&gt;
   &lt;filter-name&gt;LogFilter&lt;/filter-name&gt;
   &lt;filter-class&gt;LogFilter&lt;/filter-class&gt;
   &lt;init-param&gt;
	  &lt;param-name&gt;test-param&lt;/param-name&gt;
	  &lt;param-value&gt;Initialization Paramter&lt;/param-value&gt;
   &lt;/init-param&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
   &lt;filter-name&gt;LogFilter&lt;/filter-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</pre>
<p>The above filter would apply to all the servlets because we specified <b>/*</b> in our configuration. You can specicy a particular servlet path if you want to apply filter on few servlets only.</p>
<p>Now try to call any servlet in usual way and you would see generated log in your web server log. You can use Log4J logger to log above log in a separate file.</p>
<h2>Using Multiple Filters:</h2>
<p>Your web application may define several different filters with a specific purpose. Consider, you define two filters <i>AuthenFilter</i> and <i>LogFilter</i>. Rest of the process would remain as explained above except you need to create a different mapping as mentioned below:</p>
<pre class="prettyprint">
&lt;filter&gt;
   &lt;filter-name&gt;LogFilter&lt;/filter-name&gt;
   &lt;filter-class&gt;LogFilter&lt;/filter-class&gt;
   &lt;init-param&gt;
	  &lt;param-name&gt;test-param&lt;/param-name&gt;
	  &lt;param-value&gt;Initialization Paramter&lt;/param-value&gt;
   &lt;/init-param&gt;
&lt;/filter&gt;

&lt;filter&gt;
   &lt;filter-name&gt;AuthenFilter&lt;/filter-name&gt;
   &lt;filter-class&gt;AuthenFilter&lt;/filter-class&gt;
   &lt;init-param&gt;
	  &lt;param-name&gt;test-param&lt;/param-name&gt;
	  &lt;param-value&gt;Initialization Paramter&lt;/param-value&gt;
   &lt;/init-param&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
   &lt;filter-name&gt;LogFilter&lt;/filter-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;

&lt;filter-mapping&gt;
   &lt;filter-name&gt;AuthenFilter&lt;/filter-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</pre>
<h2>Filters Application Order:</h2>
<p>The order of filter-mapping elements in web.xml determines the order in which the web container applies the filter to the servlet. To reverse the order of the filter, you just need to reverse the filter-mapping elements in the web.xml file.</p>
<p>For example, above example would apply LogFilter first and then it would apply AuthenFilter to any servlet but the following example would reverse the order:</p>
<pre class="prettyprint">
&lt;filter-mapping&gt;
   &lt;filter-name&gt;AuthenFilter&lt;/filter-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;

&lt;filter-mapping&gt;
   &lt;filter-name&gt;LogFilter&lt;/filter-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</pre>
<hr />
<div class="pre-btn">
<a href="servlets-http-status-codes.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/servlets-writing-filters.pdf" alt="Servlets Filters" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="servlets-exception-handling.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="../jsp/index.htm" target="_top">JSP </a> |
<a href="index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="../struts_2/index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="../unix/index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2012 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/servlets/servlets-writing-filters.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:03:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>