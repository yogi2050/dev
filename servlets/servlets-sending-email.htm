<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/servlets/servlets-sending-email.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:03:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Sending email using Servlets</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Servlets, Tutorials, Learning, Beginners, Basics, Environment, Life Cycle, Examples, Client Request, Server Response, Http Codes, Writing Filters, Exceptions, Cookies, Sessions, Database Access, File Uploading, File Uploading, Internationalization." />
<meta name="keywords" content="Sending email using Servlets - Learning Java Servlets in simple and easy steps using this beginner's tutorial containing basic to advanced knowledge of Java Servlet Technology including Form Data, HTTP Request Header, Response Header, Status Codes, Cookies Handling and Session Tracking." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#de3b43  !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#fb5f67  !important;
}
#topmenu
{
background-color:#6c6b6b !important;
}
#leftcol ul.menu li.heading 
{
background:#fb5f67 !important;
border:1px solid #6c6b6b  !important;
}
#leftcol, #middlecol, #rightcol {min-height:1200px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="../unix/index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/servlets-mini-logo.png" alt="Servlets Tutorial" />
</div>
<ul class="menu">
<li class="heading">Servlets Tutorial</li>
<li><a target="_top" href="index.htm">Servlets - Home</a></li>
<li><a target="_top" href="servlets-overview.htm">Servlets - Overview</a></li>
<li><a target="_top" href="servlets-environment-setup.htm">Servlets - Environment</a></li>
<li><a target="_top" href="servlets-life-cycle.htm">Servlets - Life Cycle</a></li>
<li><a target="_top" href="servlets-first-example.htm">Servlets - Examples</a></li>
<li><a target="_top" href="servlets-form-data.htm">Servlets - Form Data</a></li>
<li><a target="_top" href="servlets-client-request.htm">Servlets - Client Request</a></li>
<li><a target="_top" href="servlets-server-response.htm">Servlets - Server Response</a></li>
<li><a target="_top" href="servlets-http-status-codes.htm">Servlets - Http Codes</a></li>
<li><a target="_top" href="servlets-writing-filters.htm">Servlets - Writing Filters</a></li>
<li><a target="_top" href="servlets-exception-handling.htm">Servlets - Exceptions</a></li>
<li><a target="_top" href="servlets-cookies-handling.htm">Servlets - Cookies Handling</a></li>
<li><a target="_top" href="servlets-session-tracking.htm">Servlets - Session Tracking</a></li>
<li><a target="_top" href="servlets-database-access.htm">Servlets - Database Access</a></li>
<li><a target="_top" href="servlets-file-uploading.htm">Servlets - File Uploading</a></li>
<li><a target="_top" href="servlets-handling-date.htm">Servlets - Handling Date</a></li>
<li><a target="_top" href="servlets-page-redirect.htm">Servlets - Page Redirect</a></li>
<li><a target="_top" href="servlets-hits-counter.htm">Servlets - Hits Counter</a></li>
<li><a target="_top" href="servlets-auto-refresh.htm">Servlets - Auto Refresh</a></li>
<li><a target="_top" href="servlets-sending-email.htm"><b>Servlets - Sending Email</b></a></li>
<li><a target="_top" href="servlets-packaging.htm">Servlets - Packaging</a></li>
<li><a target="_top" href="servlets-debugging.htm">Servlets - Debugging</a></li>
<li><a target="_top" href="servlets-internationalization.htm">Servlet Internationalization</a></li>
</ul>
<ul class="menu">
<li class="heading">Servlets Useful Resources</li>
<li><a target="_top" href="servlets-quick-guide.htm">Servlets - Quick Guide</a></li>
<li><a target="_top" href="servlets-useful-resources.htm">Servlets Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Servlets - Sending Email</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="servlets-auto-refresh.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="servlets-packaging.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>To send an email using your a Servlet is simple enough but to start with you should have <b>JavaMail API</b> and <b>Java Activation Framework (JAF)</b> installed on your machine.</p>
<ul class="list">
<li><p>You can download  latest version of <a href="http://java.sun.com/products/javamail/" target="_blank">JavaMail (Version 1.2)</a> from Java's standard website.</p></li>
<li><p>You can download  latest version of <a href="http://java.sun.com/products/javabeans/glasgow/jaf.html" target="_blank">JAF (Version 1.1.1)</a> from Java's standard website.</p></li>
</ul>
<p>Download and unzip these files, in the newly created top level directories you will find a number of jar files for both the applications.  You need to add <b>mail.jar</b> and <b>activation.jar</b> files in your CLASSPATH.</p>
<h2>Send a Simple Email:</h2>
<p>Here is an example to send a simple email from your machine. Here it is assumed that your <b>localhost</b> is connected to the internet and capable enough to send an email.  Same time make sure all the jar files from Java Email API package and JAF package ara available in CLASSPATH.</p>
<pre class="prettyprint">
// File Name SendEmail.java
import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;
 
public class SendEmail extends HttpServlet{
    
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
            throws ServletException, IOException
  {
      // Recipient's email ID needs to be mentioned.
      String to = "abcd@gmail.com";
 
      // Sender's email ID needs to be mentioned
      String from = "web@gmail.com";
 
      // Assuming you are sending email from localhost
      String host = "localhost";
 
      // Get system properties
      Properties properties = System.getProperties();
 
      // Setup mail server
      properties.setProperty("mail.smtp.host", host);
 
      // Get the default Session object.
      Session session = Session.getDefaultInstance(properties);
      
	  // Set response content type
      response.setContentType("text/html");
      PrintWriter out = response.getWriter();

      try{
         // Create a default MimeMessage object.
         MimeMessage message = new MimeMessage(session);
         // Set From: header field of the header.
         message.setFrom(new InternetAddress(from));
         // Set To: header field of the header.
         message.addRecipient(Message.RecipientType.TO,
                                  new InternetAddress(to));
         // Set Subject: header field
         message.setSubject("This is the Subject Line!");
         // Now set the actual message
         message.setText("This is actual message");
         // Send message
         Transport.send(message);
         String title = "Send Email";
         String res = "Sent message successfully....";
         String docType =
         "&lt;!doctype html public \"-//w3c//dtd html 4.0 " +
         "transitional//en\"&gt;\n";
         out.println(docType +
         "&lt;html&gt;\n" +
         "&lt;head&gt;&lt;title&gt;" + title + "&lt;/title&gt;&lt;/head&gt;\n" +
         "&lt;body bgcolor=\"#f0f0f0\"&gt;\n" +
         "&lt;h1 align=\"center\"&gt;" + title + "&lt;/h1&gt;\n" +
         "&lt;p align=\"center\"&gt;" + res + "&lt;/p&gt;\n" +
         "&lt;/body&gt;&lt;/html&gt;");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      }
   }
} 
</pre>
<p>Now let us compile above servlet and create following entries in web.xml</p>
<pre class="prettyprint">
....
 &lt;servlet&gt;
     &lt;servlet-name&gt;SendEmail&lt;/servlet-name&gt;
     &lt;servlet-class&gt;SendEmail&lt;/servlet-class&gt;
 &lt;/servlet&gt;
 
 &lt;servlet-mapping&gt;
     &lt;servlet-name&gt;SendEmail&lt;/servlet-name&gt;
     &lt;url-pattern&gt;/SendEmail&lt;/url-pattern&gt;
 &lt;/servlet-mapping&gt;
....
</pre>
<p>Now call this servlet using URL http://localhost:8080/SendEmail which would send an email to given email ID <i>abcd@gmail.com</i> and would display following response:</p>
<table cellpadding="5" class="src">
<tr><td bgcolor="#f0f0f0">
<h1 align="center">Send Email</h1>
<p align="center">Sent message successfully....</p>
</td></tr>
</table>
<p>If you want to send an email to multiple recipients then following methods would be used to specify multiple email IDs:</p>
<pre class="prettyprint">
void addRecipients(Message.RecipientType type, 
                   Address[] addresses)
throws MessagingException
</pre>
<p>Here is the description of the parameters:</p>
<ul class="list">
<li><p><b>type:</b> This would be set to TO, CC or BCC. Here CC represents Carbon Copy and BCC represents Black Carbon Copy. Example <i>Message.RecipientType.TO</i></p></li>
<li><p><b>addresses:</b> This is the array of email ID. You would need to use InternetAddress() method while specifying email IDs</p></li>
</ul>
<h2>Send an HTML Email:</h2>
<p>Here is an example to send an HTML email from your machine. Here it is assumed that your <b>localhost</b> is connected to the internet and capable enough to send an email. Same time make sure all the jar files from Java Email API package and JAF package ara available in CLASSPATH.</p>
<p>This example is very similar to previous one, except here we are using setContent() method to set content whose second argument is "text/html" to specify that the HTML content is included in the message.</p>
<p>Using this example, you can send as big as HTML content you like.</p>
<pre class="prettyprint">
// File Name SendEmail.java
import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;
 
public class SendEmail extends HttpServlet{
    
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
            throws ServletException, IOException
  {
      // Recipient's email ID needs to be mentioned.
      String to = "abcd@gmail.com";
 
      // Sender's email ID needs to be mentioned
      String from = "web@gmail.com";
 
      // Assuming you are sending email from localhost
      String host = "localhost";
 
      // Get system properties
      Properties properties = System.getProperties();
 
      // Setup mail server
      properties.setProperty("mail.smtp.host", host);
 
      // Get the default Session object.
      Session session = Session.getDefaultInstance(properties);
      
	  // Set response content type
      response.setContentType("text/html");
      PrintWriter out = response.getWriter();

      try{
         // Create a default MimeMessage object.
         MimeMessage message = new MimeMessage(session);
         // Set From: header field of the header.
         message.setFrom(new InternetAddress(from));
         // Set To: header field of the header.
         message.addRecipient(Message.RecipientType.TO,
                                  new InternetAddress(to));
         // Set Subject: header field
         message.setSubject("This is the Subject Line!");

         // Send the actual HTML message, as big as you like
         message.setContent("&lt;h1&gt;This is actual message&lt;/h1&gt;",
                            "text/html" );
         // Send message
         Transport.send(message);
         String title = "Send Email";
         String res = "Sent message successfully....";
         String docType =
         "&lt;!doctype html public \"-//w3c//dtd html 4.0 " +
         "transitional//en\"&gt;\n";
         out.println(docType +
         "&lt;html&gt;\n" +
         "&lt;head&gt;&lt;title&gt;" + title + "&lt;/title&gt;&lt;/head&gt;\n" +
         "&lt;body bgcolor=\"#f0f0f0\"&gt;\n" +
         "&lt;h1 align=\"center\"&gt;" + title + "&lt;/h1&gt;\n" +
         "&lt;p align=\"center\"&gt;" + res + "&lt;/p&gt;\n" +
         "&lt;/body&gt;&lt;/html&gt;");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      }
   }
} 
</pre>
<p>Compile and run above servlet to send HTML message on a given email ID.</p>
<h2>Send Attachment in Email:</h2>
<p>Here is an example to send an email with attachment from your machine. Here it is assumed that your <b>localhost</b> is connected to the internet and capable enough to send an email.</p>
<pre class="prettyprint">
// File Name SendEmail.java
import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;
 
public class SendEmail extends HttpServlet{
    
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
            throws ServletException, IOException
  {
      // Recipient's email ID needs to be mentioned.
      String to = "abcd@gmail.com";
 
      // Sender's email ID needs to be mentioned
      String from = "web@gmail.com";
 
      // Assuming you are sending email from localhost
      String host = "localhost";
 
      // Get system properties
      Properties properties = System.getProperties();
 
      // Setup mail server
      properties.setProperty("mail.smtp.host", host);
 
      // Get the default Session object.
      Session session = Session.getDefaultInstance(properties);
      
	  // Set response content type
      response.setContentType("text/html");
      PrintWriter out = response.getWriter();

       try{
         // Create a default MimeMessage object.
         MimeMessage message = new MimeMessage(session);
 
         // Set From: header field of the header.
         message.setFrom(new InternetAddress(from));
 
         // Set To: header field of the header.
         message.addRecipient(Message.RecipientType.TO,
                                  new InternetAddress(to));
 
         // Set Subject: header field
         message.setSubject("This is the Subject Line!");
 
         // Create the message part 
         BodyPart messageBodyPart = new MimeBodyPart();
 
         // Fill the message
         messageBodyPart.setText("This is message body");
         
         // Create a multipar message
         Multipart multipart = new MimeMultipart();
 
         // Set text message part
         multipart.addBodyPart(messageBodyPart);
 
         // Part two is attachment
         messageBodyPart = new MimeBodyPart();
         String filename = "file.txt";
         DataSource source = new FileDataSource(filename);
         messageBodyPart.setDataHandler(new DataHandler(source));
         messageBodyPart.setFileName(filename);
         multipart.addBodyPart(messageBodyPart);
 
         // Send the complete message parts
         message.setContent(multipart );
 
         // Send message
         Transport.send(message);
         String title = "Send Email";
         String res = "Sent message successfully....";
         String docType =
         "&lt;!doctype html public \"-//w3c//dtd html 4.0 " +
         "transitional//en\"&gt;\n";
         out.println(docType +
         "&lt;html&gt;\n" +
         "&lt;head&gt;&lt;title&gt;" + title + "&lt;/title&gt;&lt;/head&gt;\n" +
         "&lt;body bgcolor=\"#f0f0f0\"&gt;\n" +
         "&lt;h1 align=\"center\"&gt;" + title + "&lt;/h1&gt;\n" +
         "&lt;p align=\"center\"&gt;" + res + "&lt;/p&gt;\n" +
         "&lt;/body&gt;&lt;/html&gt;");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      }
   }
} 
</pre>
<p>Compile and run above servlet to send a file as an attachement along with a message on a given email ID.</p>
<h2>User Authentication Part:</h2>
<p>If it is required to provide user ID and Password to the email server for authentication purpose then you can set these properties as follows:</p>
<pre class="prettyprint">
 props.setProperty("mail.user", "myuser");
 props.setProperty("mail.password", "mypwd");
</pre>
<p>Rest of the email sending mechanism would remain as explained above.</p>
<hr />
<div class="pre-btn">
<a href="servlets-auto-refresh.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/servlets-sending-email.pdf" alt="Sending email using Servlets" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="servlets-packaging.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="../jsp/index.htm" target="_top">JSP </a> |
<a href="index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="../struts_2/index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="../unix/index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2012 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/servlets/servlets-sending-email.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:03:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>