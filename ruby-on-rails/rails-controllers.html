<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!-- Mirrored from www.tutorialspoint.com/ruby-on-rails/rails-controllers.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Rails Controllers - ActionController</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="Keywords" content="Learning, Ruby, rails, strengths, framework, installation, examples, RubyGems, resources, Guide, actionpack, actionview, basics, directory, structure, advance, activerecord, libraries, Model, View, Controller, Embeded Ruby, Erb, Rolling, Metaprogramming,Built-in, testing, David, Black, Hansson, Heinemeier, RAA, Scaffolding" />
<meta name="Description" content="Rails Controllers - ActionController, Learn Ruby on Rails in simple and easy steps. You will learn its installation, framework, strengths with examples and you will learn about actionpack, actionview, activerecord, Heinemeier, Scaffolding, Controller, Heinemeier, Hansson, Rakefile etc." />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base  />
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>Learning Ruby on Rails</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="index.html">Rails Home</a></li>
<li><a class="left" target="_top" href="rails-introduction.html">Rails Introduction</a></li>
<li><a class="left" target="_top" href="rails-installation.html">Rails Installation</a></li>
<li><a class="left" target="_top" href="rails-framework.html">Rails Framework</a></li>
<li><a class="left" target="_top" href="rails-directory-structure.html">Rails Dir Structure</a></li>
<li><a class="left" target="_top" href="rails-examples.html">Rails Examples</a></li>
<li><a class="left" target="_top" href="rails-database-setup.html">Rails Database Setup</a></li>
<li><a class="left" target="_top" href="rails-active-records.html">Rails Active Records</a></li>
<li><a class="left" target="_top" href="rails-migrations.html">Rails Migrations</a></li>
<li><a class="left" target="_top" href="rails-controllers.html"><b>Rails Controllers</b></a></li>
<li><a class="left" target="_top" href="rails-views.html">Rails Views</a></li>
<li><a class="left" target="_top" href="rails-layouts.html">Rails Layouts</a></li>
<li><a class="left" target="_top" href="rails-scaffolding.html">Rails Scaffolding</a></li>
<li><a class="left" target="_top" href="rails-and-ajax.html">Rails and AJAX</a></li>
<li><a class="left" target="_top" href="rails-file-uploading.html">Rails Uploads File</a></li>
<li><a class="left" target="_top" href="rails-send-email.html">Rails Sends Email</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby on Rails Quick Guide</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="rails-quick-guide.html" >Ruby on Rails Quick Guide</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby Tutorial</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../ruby/index-2.html" >Ruby Tutorial</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby on Rails Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="rails-resources.html" >Ruby on Rails Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top" align="left" width="100%">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../forums/index.html">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:10px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle"  cellpadding="5" cellspacing="0">
<tr>
<td align="left">
<!-- PRINTING STARTS HERE -->
<h1>Rails Controller - ActionController</h1>
<hr />
<a href="rails-migrations.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="rails-views.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<hr />
<p>The Rails controller is the logical center of your application. It coordinates the interaction between the user, the views, and the model. The controller is also a home to a number of important ancillary services.</p>
<ul>
<li><p>It is responsible for routing external requests to internal actions. It handles people-friendly URLs extremely well.</p></li>
<li><p>It manages caching, which can give applications orders-of-magnitude performance boosts.</p></li>
<li><p>It manages helper modules, which extend the capabilities of the view templates without bulking up their code.</p></li>
<li><p>It manages sessions, giving users the impression of an ongoing interaction with our applications.</p></li>
</ul>
<p>The process for creating a controller is very easy, and it's similar to the process we've already used for creating a model. We will create just one controller here:</p>
<table cellpadding="5" class="src"><tr><td><pre>
C:\ruby\library\&gt; ruby script/generate controller Book
</pre></td></tr></table>
<p>Notice that you are capitalizing Book and using the singular form. This is a Rails paradigm that you should follow each time you create a controller.</p>
<p>This command accomplishes several tasks, of which the following are relevant here:</p>
<ul>
<li>It creates a file called <b>app/controllers/book_controller.rb</b></li>
</ul>
<p>If you will have look at book_controller.rb, you will find it as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
class BookController &lt; ApplicationController
end
</pre></td></tr></table>
<p>Controller classes inherit from <i>ApplicationController,</i> which is the other file in the controllers folder: <b>application.rb</b>. </p>
<p>The <i>ApplicationController</i> contains code that can be run in all your controllers and it inherits from Rails <i>ActionController::Base</i> class.</p>
<p>You don't need to worry with the <i>ApplicationController</i> as of yet, so just let's define few method stubs in <b>book_controller.rb</b>. Based on your requirement, you could define any number of functions in this file.</p>
<p>Modify the file to look like the following and save your changes. Note that its upto you what name you want to give to these methods, but better to give relevant names.</p>
<table cellpadding="5" class="src"><tr><td><pre>
class BookController &lt; ApplicationController
   def list
   end
   def show
   end
   def new
   end
   def create
   end
   def edit
   end
   def update
   end
   def delete
   end
end
</pre></td></tr></table>
<p>Now lets implement all the methods one by one.</p>
<h2>Implementing the list Method</h2>
<p>The list method gives you a printout of all the books in the database. This functionality will be achieved by the following lines of code.</p>
<table cellpadding="5" class="src"><tr><td><pre>
   def list
      @books = Book.find(:all)
   end
</pre></td></tr></table>
<p>The <i>@books = Book.find(:all)</i> line in the list method tells Rails to search the books table and store each row it finds in the @books instance object.</p>
<h2>Implementing the show Method</h2>
<p>The show method displays only further details on a single book. This functionality will be achieved by the following lines of code.</p>
<table cellpadding="5" class="src"><tr><td><pre>
   def show
      @book = Book.find(params[:id])
   end
</pre></td></tr></table>
<p>The show method's <i>@books = Book.find(params[:id])</i> line tells Rails to find only the book that has the id defined in params[:id].</p>
<p>The params object is a container that enables you to pass values between method calls. For example, when you're on the page called by the list method, you can click a link for a specific book, and it passes the id of that book via the params object so that show can find the specific book.</p>
<h2>Implementing the new Method</h2>
<p>The new method lets Rails know that you will create a new object. So just add the following code in this method.</p>
<table cellpadding="5" class="src"><tr><td><pre>
   def new
      @book = Book.new
      @subjects = Subject.find(:all)
   end
</pre></td></tr></table>
<p>The above method will be called when you will display a page to the user to take user input. Here second line grabs all the subjects from the database and puts them in an array called @subjects.</p>
<h2>Implementing the create Method</h2>
<p>Once you take user input using HTML form, its time to create a record into the database. To achieve this, edit the create method in the book_controller.rb to match the following:</p>
<table cellpadding="5" class="src"><tr><td><pre>
   def create
      @book = Book.new(params[:book])
      if @book.save
            redirect_to :action =&gt; 'list'
      else
            @subjects = Subject.find(:all)
            render :action =&gt; 'new'
      end
   end
</pre></td></tr></table>
<p>The first line creates a new instance variable called @book that holds a Book object built from the data the user submitted. The data was passed from the new method to create using the params object.</p>
<p>The next line is a conditional statement that redirects the user to the <b>list</b> method if the object saves correctly to the database. If it doesn't save, the user is sent back to the new method. The redirect_to method is similar to performing a meta refresh on a web page: it automatically forwards you to your destination without any user interaction.</p>
<p>Then <i>@subjects = Subject.find(:all)</i> is required in case it does not save data successfully and it becomes similar case as with new option.</p>
<h2>Implementing the edit Method</h2>
<p>The edit method looks nearly identical to the show method. Both methods are used to retrieve a single object based on its id and display it on a page. The only difference is that the show method is not editable.</p>
<table cellpadding="5" class="src"><tr><td><pre>
   def edit
      @book = Book.find(params[:id])
      @subjects = Subject.find(:all)
   end
</pre></td></tr></table>
<p>This method will be called to display data on the screen to be modified by the user. The second line grabs all the subjects from the database and puts them in an array called @subjects.</p>
<h2>Implementing the update Method</h2>
<p>This method will be called after the edit method when user modifies a data and wants to update the changes into the database. The update method is similar to the create method and will be used to update existing books in the database.</p>
<table cellpadding="5" class="src"><tr><td><pre>
   def update
      @book = Book.find(params[:id])
      if @book.update_attributes(params[:book])
         redirect_to :action =&gt; 'show', :id =&gt; @book
      else
         @subjects = Subject.find(:all)
         render :action =&gt; 'edit'
      end
   end
</pre></td></tr></table>
<p>The update_attributes method is similar to the save method used by create but instead of creating a new row in the database, it overwrites the attributes of the existing row.</p>
<p>Then <i>@subjects = Subject.find(:all)</i> line is required in case it does not save data successfully then it becomes similar to edit option.</p>
<h2>Implementing the delete Method</h2>
<p>If you want to delete a record in to the database then you will use this method. Implement this method as follows.</p>
<table cellpadding="5" class="src"><tr><td><pre>
   def delete
      Book.find(params[:id]).destroy
      redirect_to :action =&gt; 'list'
   end
</pre></td></tr></table>
<p>The first line finds the classified based on the parameter passed via the params object and then deletes it using the destroy method. The second line redirects the user to the list method using a redirect_to call.</p>
<h2>Additional Methods to Display Subjects:</h2>
<p>Assume you want to give a facility to your users to browse all the books based on a given subject. So you can create a method inside book_controller.rb to display all the subjects. Assume method name is <b>show_subjects</b>: </p>
<table cellpadding="5" class="src"><tr><td><pre>
   def show_subjects
      @subject = Subject.find(params[:id])
   end
</pre></td></tr></table>
<p>Finally your  <b>book_controller.rb</b> file will look like as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
class BookController &lt; ApplicationController
   def list
      @books = Book.find(:all)
   end
   def show
      @book = Book.find(params[:id])
   end
   def new
      @book = Book.new
      @subjects = Subject.find(:all)
   end
   def create
      @book = Book.new(params[:book])
      if @book.save
            redirect_to :action =&gt; 'list'
      else
            @subjects = Subject.find(:all)
            render :action =&gt; 'new'
      end
   end
   def edit
      @book = Book.find(params[:id])
      @subjects = Subject.find(:all)
   end
   def update
      @book = Book.find(params[:id])
      if @book.update_attributes(params[:book])
         redirect_to :action =&gt; 'show', :id =&gt; @book
      else
         @subjects = Subject.find(:all)
         render :action =&gt; 'edit'
      end
   end
   def delete
      Book.find(params[:id]).destroy
      redirect_to :action =&gt; 'list'
   end
   def show_subjects
      @subject = Subject.find(params[:id])
   end
end
</pre></td></tr></table>
<p>Now save your controller file and come out for next assignment.</p>
<h1>What is Next?</h1>
<p>You have created almost all methods which will work on backend. Next we will create code to generate screens to display data and to take input from the user.</p>
<hr />
<a href="rails-migrations.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="rails-views.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversionb3c8.html?tutorial=ruby-on-rails&amp;file=rails-controllers.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/ruby-on-rails/rails-controllers.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
