<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!-- Mirrored from www.tutorialspoint.com/ruby-on-rails/rails-scaffolding.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Rails Scaffolding</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="Keywords" content="Learning, Ruby, rails, strengths, framework, installation, examples, RubyGems, resources, Guide, actionpack, actionview, basics, directory, structure, advance, activerecord, libraries, Model, View, Controller, Embeded Ruby, Erb, Rolling, Metaprogramming,Built-in, testing, David, Black, Hansson, Heinemeier, RAA, Scaffolding" />
<meta name="Description" content="Rails Scaffolding -  Learn Ruby on Rails in simple and easy steps. You will learn its installation, framework, strengths with examples and you will learn about actionpack, actionview, activerecord, Heinemeier, Scaffolding, Controller, Heinemeier, Hansson, Rakefile etc." />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base  />
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>Learning Ruby on Rails</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="index.html">Rails Home</a></li>
<li><a class="left" target="_top" href="rails-introduction.html">Rails Introduction</a></li>
<li><a class="left" target="_top" href="rails-installation.html">Rails Installation</a></li>
<li><a class="left" target="_top" href="rails-framework.html">Rails Framework</a></li>
<li><a class="left" target="_top" href="rails-directory-structure.html">Rails Dir Structure</a></li>
<li><a class="left" target="_top" href="rails-examples.html">Rails Examples</a></li>
<li><a class="left" target="_top" href="rails-database-setup.html">Rails Database Setup</a></li>
<li><a class="left" target="_top" href="rails-active-records.html">Rails Active Records</a></li>
<li><a class="left" target="_top" href="rails-migrations.html">Rails Migrations</a></li>
<li><a class="left" target="_top" href="rails-controllers.html">Rails Controllers</a></li>
<li><a class="left" target="_top" href="rails-views.html">Rails Views</a></li>
<li><a class="left" target="_top" href="rails-layouts.html">Rails Layouts</a></li>
<li><a class="left" target="_top" href="rails-scaffolding.html"><b>Rails Scaffolding</b></a></li>
<li><a class="left" target="_top" href="rails-and-ajax.html">Rails and AJAX</a></li>
<li><a class="left" target="_top" href="rails-file-uploading.html">Rails Uploads File</a></li>
<li><a class="left" target="_top" href="rails-send-email.html">Rails Sends Email</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby on Rails Quick Guide</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="rails-quick-guide.html" >Ruby on Rails Quick Guide</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby Tutorial</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../ruby/index-2.html" >Ruby Tutorial</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby on Rails Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="rails-resources.html" >Ruby on Rails Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top" align="left" width="100%">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../forums/index.html">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:10px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle"  cellpadding="5" cellspacing="0">
<tr>
<td align="left">
<!-- PRINTING STARTS HERE -->
<h1>Rails Scaffolding</h1>
<hr />
<a href="rails-layouts.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="rails-and-ajax.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<hr />
<p>While you're developing Rails applications, especially those which are mainly providing you with a simple interface to data in a database, it can often be useful to use the scaffold method.</p>
<p>Scaffolding provides more than cheap demo thrills. Here are some benefits:</p>
<ul>
<li>You can quickly get code in front of your users for feedback.</li>
<li>You are motivated by faster success.</li>
<li>You can learn how Rails works by looking at generated code.</li>
<li>You can use the scaffolding as a foundation to jumpstarts your development.</li>
</ul>
<h2>Scaffolding Example:</h2>
<p>To understand <i>scaffolding</i> lets create a database called <b>cookbook</b> and a table called <b>recipes</b>:</p>
<h2>Creating an Empty Rails Web Application:</h2>
<p>Open a command window and navigate to where you want to create this <b>cookbook</b> web application. I used c:\ruby. So run the following command to create complete directory structure.</p>
<table cellpadding="5" class="src"><tr><td><pre>
C:\ruby&gt; rails cookbook
</pre></td></tr></table>
<h2>Setting up the Database:</h2>
<p>Here is the way to create database:</p>
<table cellpadding="5" class="src"><tr><td><pre>
mysql&gt; create database cookbook;
Query OK, 1 row affected (0.01 sec)

mysql&gt; grant all privileges on cookbook.*
to 'root'@'localhost' identified by 'password';
Query OK, 0 rows affected (0.00 sec)

mysql&gt; FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)
</pre></td></tr></table>
<p>To tell Rails how to find the database, edit the configuration file c:\ruby\cookbook\config\database.yml and change the database name to cookbook. Leave the password empty. When you finish, it should look something like</p>
<table cellpadding="5" class="src"><tr><td><pre>
development:
  adapter: mysql
  database: cookbook
  username: root
  password: [password]
  host: localhost
test:
  adapter: mysql
  database: cookbook
  username: root
  password: [password]
  host: localhost
production:
  adapter: mysql
  database: cookbook
  username: root
  password: [password]
  host: localhost
</pre></td></tr></table>
<p>Rails lets you run in development mode, test mode, or production mode, using different databases. This application uses the same database for each.</p>
<h2>Creating the database tables:</h2>
<p>We will use following table for our practical purpose. So create <b>recipes</b> table from sql prompt as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
mysql&gt; USE cookbook;
Changed database
mysql&gt; CREATE TABLE recipes (
    -&gt; id INT(11) NOT NULL AUTO_INCREMENT,
    -&gt; title VARCHAR(40),
    -&gt; instructions VARCHAR(255),
    -&gt; PRIMARY KEY (id));
Query OK, 0 rows affected (0.06 Sec)
</pre></td></tr></table>
<p><b>NOTE:</b> If you wish you can use Rails Migrations to create and maintain tables.</p>
<h2>Creating Model:</h2>
<p>First, create a Recipe model class that will hold data from the recipes table in the database. Use the following command inside <b>cookbook</b> directory.</p> 
<table cellpadding="5" class="src"><tr><td><pre>
C:\ruby\cookbook &gt; ruby script\generate model Recipe
</pre></td></tr></table>
<p>Notice that you are capitalizing Recipe and using the singular form. This is a Rails paradigm that you should follow each time you create a model.</p>
<p>This will create a file named <b>app/models/recipe.rb</b> containing a skeleton definition for the Recipe class.</p>
<h2>Creating Controller:</h2>
<p>Now we have to create a recipe controller with actions to manipulate the recipes in the database via the standard CRUD operations: create, read, update, and delete.</p>
<table cellpadding="5" class="src"><tr><td><pre>
C:\ruby\cookbook &gt; ruby script\generate controller Recipe
</pre></td></tr></table>
<p>Notice that you are capitalizing Recipe and using the singular form. This is a Rails paradigm that you should follow each time you create a controller.</p>
<p>This will create a file named <b>app/controllers/recipe_controller.rb</b> containing a skeleton definition for the RecipeController class. Edit this file and add the line <b>scaffold:recipe</b> as shown</p>
<table cellpadding="5" class="src"><tr><td><pre>
class RecipeController &lt; ApplicationController
   scaffold:recipe
end
</pre></td></tr></table>
<p>This single line of code will bring the database table to life. This will provide with a simple interface to your data, and ways of:</p>
<ul>
<li>Creating new entries</li>
<li>Editing current entries</li>
<li>Viewing current entries</li>
<li>Destroying current entries</li>
</ul>
<p>When creating or editing an entry, scaffold will do all the hard work of form generation and handling for you, and will even provide clever form generation, supporting the following types of inputs:</p>
<ul>
<li>Simple text strings</li>
<li>Textareas (or large blocks of text)</li>
<li>Date selectors</li>
<li>Datetime selectors</li>
</ul>
<p>Now go into cookbook directory and run Web Server using following command:</p>
<table cellpadding="5" class="src"><tr><td><pre>
C:\ruby\cookbook&gt; ruby script/server
</pre></td></tr></table>
<p>Now open a browser and navigate to http://127.0.0.1:3000/recipe/new, This will provide you a screen to create new entries in recipes table. A screen shot is shown below:</p>
<img src="../images/create-recipe.html" alt="Create Recipe" style="border:1px dotted #aaa;" />
<p>Once you press <b>Create</b> button to create anew recipe, your record is added into recipes table and it shows following result:</p>
<img src="../images/added-recipe.html" alt="Create Recipe"  style="border:1px dotted #aaa;"/>
<p>You can see option to edit, show and destroy  the records. So play around these options.</p>
<p>You can also list down all the recipes available in the recipes table using URL http://127.0.0.1:3000/recipe/list</p>
<h2>Enhancing the Model:</h2>
<p>Rails gives you a lot of error handling for free. To understand this, add some validation rules to the empty recipe  model:</p>
<p>Modify app/models/recipe.rb as follows and then test your application:</p>
<table cellpadding="5" class="src"><tr><td><pre>
class Recipe &lt; ActiveRecord::Base
   validates_length_of :title, :within =&gt; 1..20
   validates_uniqueness_of :title, :message =&gt; "already exists"
end
</pre></td></tr></table>
<p>These entries will give automatic checking that:</p>
<ul>
<li><b>validates_length_of:</b> the field is not blank and not too long</li>
<li><b>validates_uniqueness_of:</b> duplicate values are trapped. I don't like the default Rails error message - so I have given my custom message.</li>
</ul>
<h1>The Generated Scaffold Code:</h1>
<p>With the <i>scaffold</i> action, Rails generates all the code it needs dynamically. By running <i>scaffold</i> as a script, we can get all the code written to disk where we can investigate it and then start tailoring it to our requirements.</p>
<p>So now let's start once again to generate Scaffold code manually by using scaffold helper script:</p>
<table cellpadding="5" class="src"><tr><td><pre>
C:\ruby\cookbook&gt; ruby script/generate scaffold recipe
      exists  app/controllers/
      exists  app/helpers/
      create  app/views/recipes
      exists  app/views/layouts/
      exists  test/functional/
  dependency  model
      exists    app/models/
      exists    test/unit/
      exists    test/fixtures/
   identical    app/models/recipe.rb
   identical    test/unit/recipe_test.rb
   identical    test/fixtures/recipes.yml
      create  app/views/recipes/_form.rhtml
      create  app/views/recipes/list.rhtml
      create  app/views/recipes/show.rhtml
      create  app/views/recipes/new.rhtml
      create  app/views/recipes/edit.rhtml
      create  app/controllers/recipes_controller.rb
      create  test/functional/recipes_controller_test.rb
      create  app/helpers/recipes_helper.rb
      create  app/views/layouts/recipes.rhtml
      create  public/stylesheets/scaffold.css
C:\ruby\cookbook&gt;
</pre></td></tr></table>
<h2>The Controller:</h2>
<p>Let's look at the code behind the controller.This all code is generated by <b>scaffold</b> generator. So if you will open app/controllers/recipes_controller.rb then you will find something as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
class RecipesController &gt; ApplicationController
  def index
    list
    render :action =&gt; 'list'
  end

  verify :method =&gt; :post, :only =&gt; [ :destroy, :create, :update ],
         :redirect_to =&gt; { :action =&gt; :list }

  def list
    @recipe_pages, @recipes = paginate :recipes, :per_page =&gt; 10
  end

  def show
    @recipe = Recipe.find(params[:id])
  end

  def new
    @recipe = Recipe.new
  end

  def create
    @recipe = Recipe.new(params[:recipe])
    if @recipe.save
      flash[:notice] = 'Recipe was successfully created.'
      redirect_to :action =&gt; 'list'
    else
      render :action =&gt; 'new'
    end
  end

  def edit
    @recipe = Recipe.find(params[:id])
  end

  def update
    @recipe = Recipe.find(params[:id])
    if @recipe.update_attributes(params[:recipe])
      flash[:notice] = 'Recipe was successfully updated.'
      redirect_to :action =&gt; 'show', :id =&gt; @recipe
    else
      render :action =&gt; 'edit'
    end
  end

  def destroy
    Recipe.find(params[:id]).destroy
    redirect_to :action =&gt; 'list'
  end
end
</pre></td></tr></table>
<p>When the user of a Rails application selects an action . e.g. "Show" - the controller will execute any code in the appropriate section - "def show" - and then by default will render a template of the same name - "show.rthml". This default behavior  can be overwritten:</p>
<p>The controller uses ActiveRecord methods such as <i>find, find_all, new, save, update_attributes, and destroy</i> to move data to and from the database tables. Note that you do not have to write any SQL statements, rails will take care of it automatically.</p>
<h2>The Views:</h2>
<p>All the views and corresponding all the controller methods  are created by <b>scaffold</b> command and they are available in app/views/recipes directory.</p>
<h2>How Scaffolding is Different?</h2>
<p>If you have gone through previous chapters then you must have seen that we had created methods to list, show, delete and create data etc but scaffolding does that job automatically.<p>
<hr />
<a href="rails-layouts.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="rails-and-ajax.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversiondc51.html?tutorial=ruby-on-rails&amp;file=rails-scaffolding.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/ruby-on-rails/rails-scaffolding.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
