<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/jasper_reports/jasper_create_subreports.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:18:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>JasperReports - Create SubReports</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="JasperReports, Tutorials, Learning, Beginners, Basics, Environment, Environment setup, Report Designs, Compiling Report Design, Filling Reports, View and Print Reports, Exporting, Parameters, Data Sources, Fields, Expression, Variables, Sections, Groups, Styles, Scriplets, Subreports, Charts, Corsstabs and Internationalization." />
<meta name="keywords" content="JasperReports Create SubReports -  Learning designing and creating JasperReports in simple and easy steps using this beginner's tutorial containing basic to advanced knowledge starting from Environment Setup, Report Designs, Compiling Report Design, Filling Reports, View and Print Reports, Exporting, Parameters, Data Sources, Fields, Expression, Variables, Sections, Groups, Styles, Scriplets, Subreports, Charts, Corsstabs and Internationalization." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#bfc82f  !important;background-color:transparent;font-weight:bold;}
#header{
background:#bfc82f  !important;
}
#topmenu
{
background-color:#298f79 !important;
}
#leftcol ul.menu li.heading
{
background:#bfc82f !important;
border:1px solid #298f79  !important;
}
#leftcol, #middlecol, #rightcol {min-height:1200px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="../unix/index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/jasper-mini-logo.png" alt="JasperReports Tutorial" />
</div>
<ul class="menu">
<li class="heading">JasperReports Tutorial</li>
<li><a target="_top" href="index.htm">Home</a></li>
<li><a target="_top" href="jasper_getting_started.htm">Getting Started</a></li>
<li><a target="_top" href="jasper_environment_setup.htm">Environment Setup</a></li>
<li><a target="_top" href="jasper_report_life_cycle.htm">Report Life Cycle</a></li>
<li><a target="_top" href="jasper_report_designs.htm">Report Designs</a></li>
<li><a target="_top" href="jasper_compiling_report_design.htm">Compiling Report Design</a></li>
<li><a target="_top" href="jasper_filling_reports.htm">Filling Reports</a></li>
<li><a target="_top" href="jasper_view_and_print_reports.htm">View and Print Reports</a></li>
<li><a target="_top" href="jasper_exporting_reports.htm">Exporting Reports</a></li>
<li><a target="_top" href="jasper_report_parameters.htm">Report Parameters</a></li>
<li><a target="_top" href="jasper_report_data_sources.htm">Report Data Sources</a></li>
<li><a target="_top" href="jasper_report_fields.htm">Report Fields</a></li>
<li><a target="_top" href="jasper_report_expression.htm">Report Expression</a></li>
<li><a target="_top" href="jasper_report_variables.htm">Report Variables</a></li>
<li><a target="_top" href="jasper_report_sections.htm">Report Sections</a></li>
<li><a target="_top" href="jasper_report_groups.htm">Report Groups</a></li>
<li><a target="_top" href="jasper_report_fonts.htm">Report Fonts</a></li>
<li><a target="_top" href="jasper_unicode_support.htm">Unicode Support</a></li>
<li><a target="_top" href="jasper_report_styles.htm">Report Styles</a></li>
<li><a target="_top" href="jasper_report_scriptlets.htm">Report Scriptlets</a></li>
<li><a target="_top" href="jasper_create_subreports.htm"><b>Create Subreports</b></a></li>
<li><a target="_top" href="jasper_creating_charts.htm">Creating Charts</a></li>
<li><a target="_top" href="jasper_crosstabs.htm">Crosstabs</a></li>
<li><a target="_top" href="jasper_Internationalization.htm">Internationalization</a></li>
</ul>
<ul class="menu">
<li class="heading">JasperReports Resources</li>
<li><a target="_top" href="jasper_quick_guide.htm">Quick Guide</a></li>
<li><a target="_top" href="jasper_useful_resources.htm">Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>JasperReports - Create SubReports</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<hr />
<div class="pre-btn">
<a href="jasper_report_scriptlets.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="jasper_creating_charts.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>Subreports are one of the nice features of the JasperReports. This feature allows incorporating a report within another report, that is, one report can be a subreport of another. Subreports help us keep report designs simple, as we can create many simple reports and encapsulate them into a master report. Subreports are compiled and filled just like normal reports. Any report template can be used as a subreport when incorporated into another report template, without anything inside it having to change.</p>
<p>Subreports are like normal report templates. They are in fact <i>net.sf.jasperreports.engine.JasperReport</i> objects, which are obtained after compiling a <i>net.sf.jasperreports.engine.design.JasperDesign object</i>.</p>

<h2>&lt;subreport&gt; Element</h2>
<p>A &lt;subreport&gt; element is used when introducing subreports into master reports. Here is the list of sub-elements in the &lt;subreport&gt; JRXML element.</p>
<ul class="list">
<li><p>&lt;reportElement&gt;</p></li>
<li><p>&lt;parametersMapExpression&gt; : This is used to pass a map containing report parameters to the subreport. The map is usually obtained from a parameter in the master report, or by using the built-in REPORTS_PARAMETERS_MAP parameter to pass the parent report's parameters to the subreport. This expression should always return a <i>java.util.Map</i> object in which the keys are the parameter
names.</p></li>
<li><p>&lt;subreportParameter&gt; : This element is used to pass parameters to the subreport. It has an attribute <i>name</i>, which is mandatory.</p></li>
<li><p>&lt;connectionExpression &gt; : This is used to pass a <i>java.sql.Connection</i> to the subreport. It is used only when the subreport template needs a database connection during report filling phase.</p></li>
<li><p>&lt;dataSourceExpression&gt; : This is used to pass a datasource to the subreport. This datasource is usually obtained from a parameter in the master report or by using the built-in REPORT_DATA_SOURCE parameter to pass the parent report's datasource to the subreport.</p>
<p>The elements (<i>connectionExpression and dataSourceExpression</i>) cannot be present at the same time in a &lt;subreport&gt; element declaration. This is because we cannot supply both a data source and a connection to the subreport. We must decide on one of them and stick to it.</p></li>
<li><p>&lt;returnValue&gt; : This is used to assign the value of one of the subreport's variables to one of the master report's variables. This sub element has attributes as follows:
<ul class="list">
<li><p><i>subreportVariable</i>: This attribute specifies the name of the subreport variable whose value is to be returned.</p></li>
<li><p><i>toVariable</i>: This attribute specifies the name of the parent report variable whose value is to be copied/incremented with the value from the subreport.</p></li>
<li><p><i>calculation</i>: This attribute can take values : Nothing, Count, DistinctCount, Sum, Average, Lowest, Highest, StandardDeviation, Variance. Default value for attribute <i>calculation</i> is "Nothing".</p></li>
<li><p><i>incrementerFactoryClass</i>: This attribute specifies the factory class for creating the incrementer instance.</p></li>
</ul>
</p></li>
<li><p>&lt;subreportExpression&gt; : This indicates where to find the compiled report template for the subreport. This element has a <b>class</b> attribute. The <i>class</i> attribute can take any of these values:java.lang.String, java.io.File, java.net.URL, java.io.InputStream, net.sf.jasperreports.engine.JasperReport.Default value is <i>java.lang.String</i>.</p></li>
<li><p>isUsingCache : This is an attribute of the &lt;subreport&gt; element. This is a Boolean, when set to <i>true</i>, the reporting engine will try to recognize previously loaded subreport template objects, using their specified source. This caching functionality is available only for subreport elements that have expressions returning java.lang.String objects as the subreport template source, representing file names, URLs, or classpath resources.</p></li>
</ul>

<h2>Example</h2>
<p>Let take up a simple example to demonstrate creation of subreports using JRDataSource. Let's first write two new report templates, one being subreport and the other Master report. The contents of subreport (address_report_template.jrxml) template is as below. Save it to C:\tools\jasperreports-5.0.1\test directory.</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;jasperReport
xmlns="http://jasperreports.sourceforge.net/jasperreports"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
name="address_report_template" pageWidth="175" pageHeight="842" columnWidth="175" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0"&gt;
   &lt;field name="city" class="java.lang.String"/&gt;
   &lt;field name="street" class="java.lang.String"/&gt;
   &lt;background&gt;
         &lt;band splitType="Stretch"/&gt;
   &lt;/background&gt;
   &lt;title&gt;
      &lt;band height="20" splitType="Stretch"&gt;
         &lt;staticText&gt;
            &lt;reportElement x="0" y="0" width="100" height="20"/&gt;
            &lt;textElement&gt;
               &lt;font size="14" isBold="true"/&gt;
            &lt;/textElement&gt;
            &lt;text&gt;&lt;![CDATA[Addresses]]&gt;&lt;/text&gt;
         &lt;/staticText&gt;
      &lt;/band&gt;
   &lt;/title&gt;
   &lt;pageHeader&gt;
      &lt;band height="12" splitType="Stretch"/&gt;
   &lt;/pageHeader&gt;
   &lt;columnHeader&gt;
      &lt;band height="12" splitType="Stretch"/&gt;
   &lt;/columnHeader&gt;
   &lt;detail&gt;
      &lt;band height="27" splitType="Stretch"&gt;
         &lt;textField&gt;
            &lt;reportElement x="0" y="0" width="120" height="20"/&gt;
            &lt;textElement&gt;
               &lt;font size="12" isBold="true"/&gt;
            &lt;/textElement&gt;
            &lt;textFieldExpression class="java.lang.String"&gt;
               &lt;![CDATA[$F{city}+" Address:"]]&gt;
            &lt;/textFieldExpression&gt;
         &lt;/textField&gt;
         &lt;textField isStretchWithOverflow="true"&gt;
            &lt;reportElement x="120" y="0" width="435" height="20"/&gt;
            &lt;textElement&gt;
               &lt;font size="12"/&gt;
            &lt;/textElement&gt;
            &lt;textFieldExpression class="java.lang.String"&gt;
               &lt;![CDATA[$F{street}]]&gt;
            &lt;/textFieldExpression&gt;
         &lt;/textField&gt;
      &lt;/band&gt;
   &lt;/detail&gt;
   &lt;columnFooter&gt;
      &lt;band height="8" splitType="Stretch"/&gt;
   &lt;/columnFooter&gt;
   &lt;pageFooter&gt;
      &lt;band height="11" splitType="Stretch"/&gt;
   &lt;/pageFooter&gt;
   &lt;summary&gt;
      &lt;band height="9" splitType="Stretch"/&gt;
   &lt;/summary&gt;

&lt;/jasperReport&gt;
</pre>
<p>As we use a data source we need to write a corresponding POJO file <b>SubReportBean.java </b> as below. Save it to directory  C:\tools\jasperreports-5.0.1\test\src\com\tutorialspoint:</p>
<pre class="prettyprint">
package com.tutorialspoint;

public class SubReportBean {
   private String city;
   private String street;

   public String getCity() {
      return city;
   }

   public void setCity(String city) {
      this.city = city;
   }

   public String getStreet() {
      return street;
   }

   public void setStreet(String street) {
      this.street = street;
   }
}
</pre>
<p>Here we have declared two fields' <i>city</i> and <i>street</i> and respective getter and setter methods are defined.</p>
<p>Now let's update our existing <b>DataBean</b> file. We will add a new field <i>subReportBeanList</i> which is a java.util.List. This field will hold the list of SubReportBean objects. The contents of the file DataBean are as below. Save it to directory C:\tools\jasperreports-5.0.1\test\src\com\tutorialspoint. </p>
<pre class="prettyprint">
package com.tutorialspoint;

import java.util.List;

public class DataBean {
   private String name;
   private String country;<b>
   private List&lt;SubReportBean&gt; subReportBeanList;</b>

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }

   public String getCountry() {
      return country;
   }

   public void setCountry(String country) {
      this.country = country;
   }

   public List&lt;SubReportBean&gt; getSubReportBeanList() {
      return subReportBeanList;
   }

   public void setSubReportBeanList(List&lt;SubReportBean&gt; subReportBeanList) {
      this.subReportBeanList = subReportBeanList;
   }
}
</pre>
<p>Let's now update the file C:\tools\jasperreports-5.0.1\test\src\com\tutorialspoint\<b>DataBeanList.java</b>. The contents of this file are as below:</p>
<pre class="prettyprint">
package com.tutorialspoint;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class DataBeanList {
   public ArrayList&lt;DataBean&gt; getDataBeanList() {

      // Create sub report data
      SubReportBean subBean1 = new SubReportBean();
      subBean1.setCity("Mumbai");
      subBean1.setStreet("M.G.Road");
      SubReportBean subBean2 = new SubReportBean();
      subBean2.setCity("New York");
      subBean2.setStreet("Park Street");
      SubReportBean subBean3 = new SubReportBean();
      subBean3.setCity("San Fransisco");
      subBean3.setStreet("King Street");

      ArrayList&lt;DataBean&gt; dataBeanList =
            new ArrayList&lt;DataBean&gt;();

      // Create master report data
      dataBeanList.add(produce("Manisha", "India",
            Arrays.asList(subBean1)));
      dataBeanList.add(produce("Dennis Ritchie", "USA",
            Arrays.asList(subBean2)));
      dataBeanList.add(produce("V.Anand", "India",
            Arrays.asList(subBean1)));
      dataBeanList.add(produce("Shrinath", "California",
            Arrays.asList(subBean3)));

      return dataBeanList;
   }

   /*
    * This method returns a DataBean object,
    * with name, country and sub report
    * bean data set in it.
    */
   private DataBean produce(String name, String country,
         List&lt;SubReportBean&gt; subBean) {
      DataBean dataBean = new DataBean();

      dataBean.setName(name);
      dataBean.setCountry(country);
      dataBean.setSubReportBeanList(subBean);

      return dataBean;
   }
}
</pre>
<p>In the method produce() in the above file, we are setting the list of SubReportBean. </p>
<p>Now let's write a new master report template (jasper_report_template.jrxml). Save this file to directory <b>C:\tools\jasperreports-5.0.1\test</b>. The contents for this file are as below: </p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
name="jasper_report_template" language="groovy" pageWidth="595"
pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20"
topMargin="20" bottomMargin="20"&gt;
   <b>
   &lt;parameter name="SUBREPORT_DIR" class="java.lang.String"
      isForPrompting="false"&gt;
      &lt;defaultValueExpression&gt;
      &lt;![CDATA["C:\\tools\\jasperreports-5.0.1\\test\\"]]&gt;</b>
      &lt;/defaultValueExpression&gt;
   &lt;/parameter&gt;
   &lt;field name="country" class="java.lang.String"/&gt;
   &lt;field name="name" class="java.lang.String"/&gt;<b>
   &lt;field name="subReportBeanList" class="java.util.List"/&gt;</b>
   &lt;background&gt;
      &lt;band splitType="Stretch"/&gt;
   &lt;/background&gt;
   &lt;title&gt;
      &lt;band height="35" splitType="Stretch"&gt;
         &lt;staticText&gt;
            &lt;reportElement x="0" y="0" width="204" height="34"/&gt;
            &lt;textElement&gt;
            &lt;font size="26" isBold="true"/&gt;
            &lt;/textElement&gt;
            &lt;text&gt;&lt;![CDATA[Contact Report]]&gt;&lt;/text&gt;
         &lt;/staticText&gt;
      &lt;/band&gt;
   &lt;/title&gt;
   &lt;pageHeader&gt;
      &lt;band height="17" splitType="Stretch"/&gt;
   &lt;/pageHeader&gt;
   &lt;columnHeader&gt;
      &lt;band height="21" splitType="Stretch"/&gt;
   &lt;/columnHeader&gt;
   &lt;detail&gt;
      &lt;band height="112" splitType="Stretch"&gt;
            &lt;staticText&gt;
            &lt;reportElement x="0" y="0" width="100" height="20"/&gt;
            &lt;textElement&gt;
               &lt;font size="12" isBold="true"/&gt;
            &lt;/textElement&gt;
            &lt;text&gt;&lt;![CDATA[Name:]]&gt;&lt;/text&gt;
         &lt;/staticText&gt;
         &lt;staticText&gt;
            &lt;reportElement x="0" y="20" width="100" height="20"/&gt;
            &lt;textElement&gt;
               &lt;font size="12" isBold="true"/&gt;
            &lt;/textElement&gt;
            &lt;text&gt;&lt;![CDATA[Country:]]&gt;&lt;/text&gt;
         &lt;/staticText&gt;
         &lt;textField&gt;
         &lt;reportElement x="104" y="0" width="277" height="20"/&gt;
            &lt;textElement&gt;
               &lt;font size="12"/&gt;
            &lt;/textElement&gt;
            &lt;textFieldExpression class="java.lang.String"&gt;
               &lt;![CDATA[$F{name}]]&gt;
            &lt;/textFieldExpression&gt;
         &lt;/textField&gt;
         &lt;textField&gt;
            &lt;reportElement x="104" y="20" width="277" height="20"/&gt;
            &lt;textElement&gt;
            &lt;font size="12"/&gt;
            &lt;/textElement&gt;
            &lt;textFieldExpression class="java.lang.String"&gt;
               &lt;![CDATA[$F{country}]]&gt;
            &lt;/textFieldExpression&gt;
         &lt;/textField&gt;<b>
         &lt;subreport&gt;
            &lt;reportElement positionType="Float" x="335" y="25" width="175"
            height="20" isRemoveLineWhenBlank="true"
            backcolor="#99ccff"/&gt;

            &lt;dataSourceExpression&gt;
            new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource
            ($F{subReportBeanList})
            &lt;/dataSourceExpression&gt;
            &lt;subreportExpression class="java.lang.String"&gt;
               &lt;![CDATA[$P{SUBREPORT_DIR} + "address_report_template.jasper"]]&gt;
            &lt;/subreportExpression&gt;
         &lt;/subreport&gt;</b>
         &lt;line&gt;
            &lt;reportElement x="0" y="50" width="550" height="1"/&gt;
         &lt;/line&gt;
      &lt;/band&gt;
   &lt;/detail&gt;
   &lt;columnFooter&gt;
      &lt;band height="19" splitType="Stretch"/&gt;
   &lt;/columnFooter&gt;
   &lt;pageFooter&gt;
      &lt;band height="18" splitType="Stretch"/&gt;
   &lt;/pageFooter&gt;
   &lt;summary&gt;
      &lt;band height="14" splitType="Stretch"/&gt;
   &lt;/summary&gt;
&lt;/jasperReport&gt;
</pre>
<p>In the above template, we have defined a new parameter "SUBREPORT_DIR" which defines the path of the subreport.  We have defined a field <i>subReportBeanList</i> of type <i>java.util.List</i> which corresponds to property in the file DataBean. The element &lt;subreport&gt; has sub-element &lt;dataSourceExpression&gt;. We have put the list <i>subReportBeanList</i> in an instance of JRBeanCollectionDataSource. In the sub-element &lt;subreportExpression/&gt;,  we have give the subreport name (AddressReport.jasper).  </p>
<p>Now let's write a new class <b>CreateReport</b> to compile and execute our report template. The contents of file <b>C:\tools\jasperreports-5.0.1\test\src\com\tutorialspoint\CreateReport.java</b> are as below: </p>
<pre class="prettyprint">
package com.tutorialspoint;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;

public class CreateReport {

   public static void main(String[] args) {
      String masterReportFileName = "C://tools/jasperreports-5.0.1/test"
            + "/jasper_report_template.jrxml";
      String subReportFileName = "C://tools/jasperreports-5.0.1/test"
            + "/AddressReport.jrxml";
      String destFileName = "C://tools/jasperreports-5.0.1/test"
            + "/jasper_report_template.JRprint";
      DataBeanList DataBeanList = new DataBeanList();
      ArrayList&lt;DataBean&gt; dataList = DataBeanList.getDataBeanList();
      JRBeanCollectionDataSource beanColDataSource =
            new JRBeanCollectionDataSource(dataList);

      try {
         /* Compile the master and sub report */
         JasperReport jasperMasterReport = JasperCompileManager
            .compileReport(masterReportFileName);
         JasperReport jasperSubReport = JasperCompileManager
            .compileReport(subReportFileName);

         Map&lt;String, Object&gt; parameters = new HashMap&lt;String, Object&gt;();
         parameters.put("subreportParameter", jasperSubReport);
         JasperFillManager.fillReportToFile(jasperMasterReport,
            destFileName, parameters, beanColDataSource);

      } catch (JRException e) {

         e.printStackTrace();
      }
      System.out.println("Done filling!!! ...");
   }
}
</pre>
</p>Here we see that we are compiling both the master and sub report templates and passing the master report (.jasper) file for report filling.</p>

<h3>Report Generation</h3>
<p>Now that all our files are ready, let's compile and execute them using our regular ANT build process. The contents of the file build.xml (saved under directory C:\tools\jasperreports-5.0.1\test) are as below.
<blockquote>The import file - baseBuild.xml is picked from chapter <a href="jasper_environment_setup.htm">Environment Setup</a> and should be placed in the same directory as the build.xml.</blockquote>
</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project name="JasperReportTest" default="viewFillReport" basedir="."&gt;
   &lt;import file="baseBuild.xml" /&gt;
   &lt;target name="viewFillReport"
      depends="compile,compilereportdesing,run"
      description="Launches the report viewer to preview
      the report stored in the .JRprint file."&gt;
      &lt;java classname="net.sf.jasperreports.view.JasperViewer"
      fork="true"&gt;
         &lt;arg value="-F${file.name}.JRprint" /&gt;
         &lt;classpath refid="classpath" /&gt;
      &lt;/java&gt;
   &lt;/target&gt;
   &lt;target name="compilereportdesing"
      description="Compiles the JXML file and
      produces the .jasper file."&gt;
      &lt;taskdef name="jrc"
      classname="net.sf.jasperreports.ant.JRAntCompileTask"&gt;
         &lt;classpath refid="classpath" /&gt;
      &lt;/taskdef&gt;
      &lt;jrc destdir="."&gt;
         &lt;src&gt;
         &lt;fileset dir="."&gt;
            &lt;include name="*.jrxml" /&gt;
         &lt;/fileset&gt;
         &lt;/src&gt;
         &lt;classpath refid="classpath" /&gt;
      &lt;/jrc&gt;
   &lt;/target&gt;
&lt;/project&gt;
</pre>
<p>Next, let's open command line window and go to the directory where build.xml is placed. Finally execute the command <b>ant -Dmain-class=com.tutorialspoint.CreateReport</b> (viewFullReport is the default target) as follows:</p>
<pre class="result">
Buildfile: C:\tools\jasperreports-5.0.1\test\build.xml

clean-sample:
   [delete] Deleting directory C:\tools\jasperreports-5.0.1\test\classes

compile:
    [mkdir] Created dir: C:\tools\jasperreports-5.0.1\test\classes
    [javac] C:\tools\jasperreports-5.0.1\test\baseBuild.xml:28: warning: 'includeantruntime' was not set, defaulting to
    [javac] Compiling 7 source files to C:\tools\jasperreports-5.0.1\test\classes

compilereportdesing:
      [jrc] Compiling 1 report design files.
      [jrc] log4j:WARN No appenders could be found for logger (net.sf.jasperreports.engine.xml.JRXmlDigesterFactory).
      [jrc] log4j:WARN Please initialize the log4j system properly.
      [jrc] log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
      [jrc] File : C:\tools\jasperreports-5.0.1\test\jasper_report_template.jrxml ... OK.

run:
     [echo] Runnin class : com.tutorialspoint.CreateReport
     [java] Compiling Report Design ...
     [java] log4j:WARN No appenders could be found for logger (net.sf.jasperreports.engine.xml.JRXmlDigesterFactory).
     [java] log4j:WARN Please initialize the log4j system properly.
     [java] Done filling!!! ...

viewFillReport:
     [java] log4j:WARN No appenders could be found for logger (net.sf.jasperreports.extensions.ExtensionsEnvironment).
     [java] log4j:WARN Please initialize the log4j system properly.

BUILD SUCCESSFUL
Total time: 72 minutes 13 seconds
</pre>
<p>As a result of above compilation, a JasperViewer window opens up as in the screen below:</p>
<img src="images/subreport_example.jpg" alt="Jasper Report Viewer" />
<p>Here we can see that the Name, country and address are displayed.</p>
<hr />
<div class="pre-btn">
<a href="jasper_report_scriptlets.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/jasper_create_subreports.pdf" alt="JasperReports - Create SubReports" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="jasper_creating_charts.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="index.htm" target="_top">iOS </a> |
<a href="../servlets/index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="../struts_2/index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="../unix/index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2012 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/jasper_reports/jasper_create_subreports.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:18:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>