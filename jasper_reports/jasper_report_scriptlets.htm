<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/jasper_reports/jasper_report_scriptlets.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:18:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>JasperReports - Report Scriptlets</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="JasperReports, Tutorials, Learning, Beginners, Basics, Environment, Environment setup, Report Designs, Compiling Report Design, Filling Reports, View and Print Reports, Exporting, Parameters, Data Sources, Fields, Expression, Variables, Sections, Groups, Styles, Scriplets, Subreports, Charts, Corsstabs and Internationalization." />
<meta name="keywords" content="JasperReports Report Scriptlets -  Learning designing and creating JasperReports in simple and easy steps using this beginner's tutorial containing basic to advanced knowledge starting from Environment Setup, Report Designs, Compiling Report Design, Filling Reports, View and Print Reports, Exporting, Parameters, Data Sources, Fields, Expression, Variables, Sections, Groups, Styles, Scriplets, Subreports, Charts, Corsstabs and Internationalization." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#bfc82f  !important;background-color:transparent;font-weight:bold;}
#header{
background:#bfc82f  !important;
}
#topmenu
{
background-color:#298f79 !important;
}
#leftcol ul.menu li.heading
{
background:#bfc82f !important;
border:1px solid #298f79  !important;
}
#leftcol, #middlecol, #rightcol {min-height:1200px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="../unix/index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/jasper-mini-logo.png" alt="JasperReports Tutorial" />
</div>
<ul class="menu">
<li class="heading">JasperReports Tutorial</li>
<li><a target="_top" href="index.htm">Home</a></li>
<li><a target="_top" href="jasper_getting_started.htm">Getting Started</a></li>
<li><a target="_top" href="jasper_environment_setup.htm">Environment Setup</a></li>
<li><a target="_top" href="jasper_report_life_cycle.htm">Report Life Cycle</a></li>
<li><a target="_top" href="jasper_report_designs.htm">Report Designs</a></li>
<li><a target="_top" href="jasper_compiling_report_design.htm">Compiling Report Design</a></li>
<li><a target="_top" href="jasper_filling_reports.htm">Filling Reports</a></li>
<li><a target="_top" href="jasper_view_and_print_reports.htm">View and Print Reports</a></li>
<li><a target="_top" href="jasper_exporting_reports.htm">Exporting Reports</a></li>
<li><a target="_top" href="jasper_report_parameters.htm">Report Parameters</a></li>
<li><a target="_top" href="jasper_report_data_sources.htm">Report Data Sources</a></li>
<li><a target="_top" href="jasper_report_fields.htm">Report Fields</a></li>
<li><a target="_top" href="jasper_report_expression.htm">Report Expression</a></li>
<li><a target="_top" href="jasper_report_variables.htm">Report Variables</a></li>
<li><a target="_top" href="jasper_report_sections.htm">Report Sections</a></li>
<li><a target="_top" href="jasper_report_groups.htm">Report Groups</a></li>
<li><a target="_top" href="jasper_report_fonts.htm">Report Fonts</a></li>
<li><a target="_top" href="jasper_unicode_support.htm">Unicode Support</a></li>
<li><a target="_top" href="jasper_report_styles.htm">Report Styles</a></li>
<li><a target="_top" href="jasper_report_scriptlets.htm"><b>Report Scriptlets</b></a></li>
<li><a target="_top" href="jasper_create_subreports.htm">Create Subreports</a></li>
<li><a target="_top" href="jasper_creating_charts.htm">Creating Charts</a></li>
<li><a target="_top" href="jasper_crosstabs.htm">Crosstabs</a></li>
<li><a target="_top" href="jasper_Internationalization.htm">Internationalization</a></li>
</ul>
<ul class="menu">
<li class="heading">JasperReports Resources</li>
<li><a target="_top" href="jasper_quick_guide.htm">Quick Guide</a></li>
<li><a target="_top" href="jasper_useful_resources.htm">Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>JasperReports - Report Scriptlets</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<hr />
<div class="pre-btn">
<a href="jasper_report_styles.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="jasper_create_subreports.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>We saw in our previous chapters, data displayed on the report is usually fetched from report parameters and report fields. This data can be processed using the report variables and their expressions. There are situations when a complex functionality cannot be achieved easily using report expressions or variables. Examples of this may be complex String manipulations, building of Maps or Lists of objects in memory or manipulations of dates using 3rd party Java APIs. For such situations, JasperReports provides us with a simple and powerful means of doing this with <b>Scriptlets</b>.</p>
<p>Scriptlets are sequences of Java code that are executed every time a report event occurs. Values of report variables can be affected through scriptlets.
<h2>Scriptlet Declaration</h2>
<p>We can declare a scriptlet in two ways:</p>
<ul class="list">
<li><p>Using <b>&lt;scriptlet&gt;</b> element. This element has <i>name</i> attribute and <i>class</i> attribute. The <i>class</i> attribute should specify the name of the class, which extends <i>JRAbstractScriptlet</i> class. The class must be available in the classpath at report filling time and must have an empty constructor, so that the engine can instantiate it on the fly.</p></li>
<li><p>Using the attribute <b>scriptletClass</b> of the element <b>&lt;jasperReport&gt;</b>, in the report template (JRXML). By setting this attribute with fully qualified name of scriptlet (including the entire package name),  we indicate that we want to use a scriptlet. The scriptlet instance created with this attribute, acts like the first scriptlet in the list of scriptlets and has the
predefined name REPORT.
</p></li>
</ul>

<h2>Scriptlet class</h2>
<p>A scriptlet is a java class which must extend either of the following classes: </p></p>
<ul class="list">
<li><p><b>net.sf.jasperreports.engine.JRAbstractScriptlet</b>: This class contains a number of abstract methods that must be overridden in every implementation. These methods are called automatically by JasperReports at the appropriate moment. Developer must implement all the abstract methods.</p></li>
<li><p><b>net.sf.jasperreports.engine.JRDefaultScriptlet</b>: This class contains default empty implementations of every method in JRAbstractScriptlet. A developer is only required to implement those methods he/she needs for their project.
</p></li>
</ul>
<p>Following table lists the methods in the above class. These methods will be called by the report engine at the appropriate time, during report filling phase.</p>
<table class="src">
<tr><th>Method</th><th>Description</th></tr>
<tr><td>public void beforeReportInit()</td><td>Called before report initialization.</td></tr>
<tr><td>public void afterReportInit()</td><td>Called after report initialization.</td></tr>
<tr><td>public void beforePageInit()</td><td>Called before each page is initialized.</td></tr>
<tr><td>public void afterPageInit()</td><td>Called after each page is initialized.</td></tr>
<tr><td>public void beforeColumnInit()</td><td>Called before each column is initialized.</td></tr>
<tr><td>public void afterColumnInit()</td><td>Called after each column is initialized.</td></tr>
<tr><td>public void beforeGroupInit(String groupName)</td><td>Called before the group specified in the parameter is initialized.</td></tr>
<tr><td>public void afterGroupInit(String groupName)</td><td>Called after the group specified in the parameter is initialized.</td></tr>
<tr><td>public void beforeDetailEval()</td><td>Called before each record in the detail section of the report is evaluated.</td></tr>
<tr><td>public void afterDetailEval()</td><td>Called after each record in the detail section of the report is evaluated.</td></tr>
</table>
<p>Any number of scriptlets can be specified per report. If no scriptlet is specified for a report, the engine still creates a single JRDefaultScriptlet instance and registers it with the built-in REPORT_SCRIPTLET parameter.</p>
<p>We can add any additional methods we need to our scriptlets. Reports can call these methods by using the built-in parameter REPORT_SCRIPTLET.</p>


<h2>Global Scriptlets</h2>
<p>We can associate scriptlets in another way to reports, which is by declaring the scriptlets globally. This makes the scriptlets apply to all reports being filled in the given JasperReports deployment. This is made easy by the fact that scriptlets can be added to JasperReports as extensions. The scriptlet extension point is represented by the <i>net.sf.jasperreports.engine.scriptlets.ScriptletFactory</i> interface. JasperReports will load all scriptlet factories available through extensions at runtime. Then, it will ask each one of them for the list of scriptlets instances that they want to apply to the
current report that is being run. When asking for the list of scriptlet instances, the engine gives some context information that the factory could use in order to decide which scriptlets actually apply to the current report.</p>

<h2>Report Governors</h2>
<p>Governors are just an extension of global scriptlets that enable us to tackle a problem of report engine entering infinite loop at runtime, while generating reports. Invalid report templates cannot be detected at design time, because most of the time the conditions for entering the infinite loops depend on the actual data that is fed into the engine at runtime. Report Governors help deciding whether a certain report has entered an infinite loop and they can stop it, preventing resource exhaustion for the machine that runs the report.</p>
<p>JasperReports has two simple report governors that would stop a report execution based on a specified maximum number of pages or a specified timeout interval. They are:</p>
<ol class="list">
<li><p><b>net.sf.jasperreports.governors.MaxPagesGovernor</b>: This is a global scriptlet that is looking for two configuration properties to decide if it applies or not to the report currently being run. The configuration properties are:</p></li>
<ul class="list"><li><p>net.sf.jasperreports.governor.max.pages.enabled=[true|false]</p></li>
<li><p>net.sf.jasperreports.governor.max.pages=[integer]</p></li></ul>
<li><p><b>net.sf.jasperreports.governors.TimeoutGovernor</b>: This is also a global scriptlet that is looking for the following two configuration properties to decide if it applies or not: The configuration properties are:</p></li>
<ul class="list"><li><p>net.sf.jasperreports.governor.timeout.enabled=[true|false]</p></li>
<li><p>net.sf.jasperreports.governor.timeout=[milliseconds]</p></li></ul>
</ol>
<p>The properties for both governors can be set globally, in the jasperreports.properties file, or at report level, as custom report properties. This is useful because different reports can have different estimated size or timeout limits and also because you might want turn on the governors for all reports, while turning it off for some, or vice-versa.</p>
<h2>Example</h2>
<p>Let's write a scriptlet class (<b>MyScriptlet</b>). The contents of file C:\tools\jasperreports-5.0.1\test\src\com\tutorialspoint\MyScriptlet.java are as follows:</p>
<pre class="prettyprint">
package com.tutorialspoint;

import net.sf.jasperreports.engine.JRDefaultScriptlet;
import net.sf.jasperreports.engine.JRScriptletException;


public class MyScriptlet extends JRDefaultScriptlet
{
 public void afterReportInit() throws JRScriptletException
   {
      System.out.println("call afterReportInit()");
     // this.setVariableValue("AllCountries", sbuffer.toString());
      this.setVariableValue("someVar", new String("This variable value was modified by the scriptlet."));
   }

   public String hello() throws JRScriptletException
   {
      return "Hello! I'm the report's scriptlet object.";
   }

}
</pre>
<p>Details of the above scriptlet class are as below:</p>
<ul class="list">
<li><p>In the <i>afterReportInit</i> method, we set a value to the variable <b>"someVar"</b> this.setVariableValue("someVar", new String("This variable value was modified by the scriptlet.")). </p></li>
<li><p>At the end of the class an extra method called <b>hello</b> has been defined. This is an example of a method that can be added to the Scriptlet that actually returns a value, rather than setting a Variable.</p></li>
</ul>

<p>Next we will add the scriptlet class reference in our existing report template (Chapter <a href="jasper_report_designs.htm">Report designs</a>). The revised report template (jasper_report_template.jrxml) are as follows. Save it to C:\tools\jasperreports-5.0.1\test directory:</p>
<pre class="prettyprint">
&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE jasperReport PUBLIC
"//JasperReports//DTD Report Design//EN"
"http://jasperreports.sourceforge.net/dtds/jasperreport.dtd"&gt;

&lt;jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
name="jasper_report_template" pageWidth="595"
pageHeight="842" columnWidth="515"
leftMargin="40" rightMargin="40" topMargin="50" bottomMargin="50"<b>
scriptletClass="com.tutorialspoint.MyScriptlet"&gt;</b>
   &lt;style name="alternateStyle" fontName="Arial" forecolor="red"&gt;
      &lt;conditionalStyle&gt;
         &lt;conditionExpression&gt;
            &lt;![CDATA[new Boolean($V{countNumber}.intValue() % 2 == 0)]]&gt;
         &lt;/conditionExpression&gt;
         &lt;style forecolor="blue" isBold="true"/&gt;
      &lt;/conditionalStyle&gt;
   &lt;/style&gt;
   &lt;parameter name="ReportTitle" class="java.lang.String"/&gt;
   &lt;parameter name="Author" class="java.lang.String"/&gt;

   &lt;queryString&gt;
    &lt;![CDATA[]]&gt;
   &lt;/queryString&gt;

   &lt;field name="country" class="java.lang.String"&gt;
      &lt;fieldDescription&gt;
      &lt;![CDATA[country]]&gt;
      &lt;/fieldDescription&gt;
   &lt;/field&gt;

   &lt;field name="name" class="java.lang.String"&gt;
      &lt;fieldDescription&gt;
      &lt;![CDATA[name]]&gt;
      &lt;/fieldDescription&gt;
   &lt;/field&gt;

   &lt;variable name="countNumber" class="java.lang.Integer"
      calculation="Count"&gt;
      &lt;variableExpression&gt;&lt;![CDATA[Boolean.TRUE]]&gt;
      &lt;/variableExpression&gt;
   &lt;/variable&gt;
<b>
   &lt;variable name="someVar" class="java.lang.String"&gt;
      &lt;initialValueExpression&gt;
        &lt;![CDATA["This is the initial variable value."]]&gt;
      &lt;/initialValueExpression&gt;
   &lt;/variable&gt;
</b>
   &lt;title&gt;
      &lt;band height="100"&gt;
         &lt;line&gt;
            &lt;reportElement x="0" y="0" width="515"
            height="1"/&gt;
         &lt;/line&gt;
         &lt;textField isBlankWhenNull="true" bookmarkLevel="1"&gt;
            &lt;reportElement x="0" y="10" width="515"
             height="30"/&gt;
            &lt;textElement textAlignment="Center"&gt;
              &lt;font size="22"/&gt;
            &lt;/textElement&gt;
            &lt;textFieldExpression class="java.lang.String"&gt;
              &lt;![CDATA[$P{ReportTitle}]]&gt;
            &lt;/textFieldExpression&gt;
            &lt;anchorNameExpression&gt;&lt;![CDATA["Title"]]&gt;
            &lt;/anchorNameExpression&gt;
         &lt;/textField&gt;
         &lt;textField isBlankWhenNull="true"&gt;
            &lt;reportElement  x="0" y="40" width="515" height="20"/&gt;
            &lt;textElement textAlignment="Center"&gt;
                 &lt;font size="10"/&gt;
            &lt;/textElement&gt;
            &lt;textFieldExpression class="java.lang.String"&gt;
            &lt;![CDATA[$P{Author}]]&gt;
            &lt;/textFieldExpression&gt;
         &lt;/textField&gt;<b>
         &lt;textField isBlankWhenNull="true"&gt;
             &lt;reportElement  x="0" y="50" width="515"
             height="30" forecolor="#993300"/&gt;
             &lt;textElement textAlignment="Center"&gt;
                  &lt;font size="10"/&gt;
             &lt;/textElement&gt;
             &lt;textFieldExpression class="java.lang.String"&gt;
             &lt;![CDATA[$V{someVar}]]&gt;
             &lt;/textFieldExpression&gt;
         &lt;/textField&gt;</b>

      &lt;/band&gt;
   &lt;/title&gt;

   &lt;columnHeader&gt;
      &lt;band height="23"&gt;
         &lt;staticText&gt;
            &lt;reportElement mode="Opaque" x="0" y="3"
            width="535"	height="15"
            backcolor="#70A9A9" /&gt;
            &lt;box&gt;
            &lt;bottomPen lineWidth="1.0"
            lineColor="#CCCCCC" /&gt;
            &lt;/box&gt;
            &lt;textElement /&gt;
            &lt;text&gt;&lt;![CDATA[]]&gt;
            &lt;/text&gt;
         &lt;/staticText&gt;
         &lt;staticText&gt;
            &lt;reportElement x="414" y="3" width="121"
            height="15" /&gt;
            &lt;textElement textAlignment="Center"
            verticalAlignment="Middle"&gt;
               	&lt;font isBold="true" /&gt;
            &lt;/textElement&gt;
            &lt;text&gt;&lt;![CDATA[Country]]&gt;&lt;/text&gt;
         &lt;/staticText&gt;
         &lt;staticText&gt;
            &lt;reportElement x="0" y="3" width="136"
            height="15" /&gt;
            &lt;textElement textAlignment="Center"
            verticalAlignment="Middle"&gt;
               &lt;font isBold="true" /&gt;
            &lt;/textElement&gt;
            &lt;text&gt;&lt;![CDATA[Name]]&gt;&lt;/text&gt;
         &lt;/staticText&gt;
      &lt;/band&gt;
   &lt;/columnHeader&gt;

   &lt;detail&gt;
      &lt;band height="16"&gt;
         &lt;staticText&gt;
            &lt;reportElement mode="Opaque" x="0" y="0"
            width="535"	height="14"
            backcolor="#E5ECF9" /&gt;
            &lt;box&gt;
               &lt;bottomPen lineWidth="0.25"
               lineColor="#CCCCCC" /&gt;
            &lt;/box&gt;
            &lt;textElement /&gt;
            &lt;text&gt;&lt;![CDATA[]]&gt;
            &lt;/text&gt;
         &lt;/staticText&gt;
         &lt;textField&gt;
            &lt;reportElement style="alternateStyle"
            x="414" y="0" width="121" height="15" /&gt;
            &lt;textElement textAlignment="Center"
            verticalAlignment="Middle"&gt;
               &lt;font size="9" /&gt;
            &lt;/textElement&gt;
            &lt;textFieldExpression class="java.lang.String"&gt;
            &lt;![CDATA[$F{country}]]&gt;
            &lt;/textFieldExpression&gt;
         &lt;/textField&gt;
         &lt;textField&gt;
            &lt;reportElement x="0" y="0" width="136"
            height="15" /&gt;
            &lt;textElement textAlignment="Center"
            verticalAlignment="Middle" /&gt;
            &lt;textFieldExpression class="java.lang.String"&gt;
            &lt;![CDATA[$F{name}]]&gt;
            &lt;/textFieldExpression&gt;
         &lt;/textField&gt;
      &lt;/band&gt;
   &lt;/detail&gt;<b>
   &lt;summary&gt;
         &lt;band height="45"&gt;
            &lt;textField isStretchWithOverflow="true"&gt;
               &lt;reportElement x="0" y="10" width="515" height="15" /&gt;
               &lt;textElement textAlignment="Center"/&gt;
               &lt;textFieldExpression class="java.lang.String"&gt;
                  &lt;![CDATA["There are " +
                  String.valueOf($V{REPORT_COUNT}) +
                     " records on this report."]]&gt;
               &lt;/textFieldExpression&gt;

            &lt;/textField&gt;
            &lt;textField isStretchWithOverflow="true"&gt;
               &lt;reportElement positionType="Float" x="0" y="30" width="515"
               height="15" forecolor="#993300" /&gt;
               &lt;textElement textAlignment="Center"&gt;
               &lt;font size="10"/&gt;
               &lt;/textElement&gt;
               &lt;textFieldExpression class="java.lang.String"&gt;
                  &lt;![CDATA[$P{REPORT_SCRIPTLET}.hello()]]&gt;
               &lt;/textFieldExpression&gt;
            &lt;/textField&gt;
         &lt;/band&gt;
   &lt;/summary&gt;</b>
&lt;/jasperReport&gt;
</pre>
<p>The details of the revised report template is as below:</p>
<ul class="list">
<li><p>We have referenced the MyScriptlet class in the attribute <i>scriptletClass</i> of &lt;jasperReport&gt; element. </p></li>
<li><p>Scriptlets can only access, but not modify, report fields and parameters. However, scriptlets can modify report variable values. This can be accomplished by calling the setVariableValue() method. This method is defined in JRAbstractScriptlet class, which is always the parent class of any scriptlet. Here we have defined a variable <i>someVar</i>, which will be modified by the MyScriptlet to have the value <i>This value was modified by the scriptlet</i>.</p></li>
<li><p>The above report template has a method call in the Summary band that illustrates how to write new methods (in scriptlets) and use them in the report template. (<b>$P{REPORT_SCRIPTLET}.hello()</b>)</p></li>
</ul>
<p>The java codes for report filling remain unchanged. The contents of the file <b>C:\tools\jasperreports-5.0.1\test\src\com\tutorialspoint\JasperReportFill.java</b> are as below.</p>
<pre class="prettyprint">
package com.tutorialspoint;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;

public class JasperReportFill {
   @SuppressWarnings("unchecked")
   public static void main(String[] args) {
      String sourceFileName =
      "C://tools/jasperreports-5.0.1/test/jasper_report_template.jasper";

      DataBeanList DataBeanList = new DataBeanList();
      ArrayList&lt;DataBean&gt; dataList = DataBeanList.getDataBeanList();

      JRBeanCollectionDataSource beanColDataSource =
      new JRBeanCollectionDataSource(dataList);

      Map parameters = new HashMap();
      /**
       * Passing ReportTitle and Author as parameters
       */
      parameters.put("ReportTitle", "List of Contacts");
      parameters.put("Author", "Prepared By Manisha");

      try {
         JasperFillManager.fillReportToFile(
         sourceFileName, parameters, beanColDataSource);
      } catch (JRException e) {
         e.printStackTrace();
      }
   }
}
</pre>
<p>The contents of the POJO file <b>C:\tools\jasperreports-5.0.1\test\src\com\tutorialspoint\DataBean.java</b> are as below:</p>
<pre class="prettyprint">
package com.tutorialspoint;

public class DataBean {
   private String name;
   private String country;

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }

   public String getCountry() {
      return country;
   }

   public void setCountry(String country) {
      this.country = country;
   }
}
</pre>
<p>The contents of the file <b>C:\tools\jasperreports-5.0.1\test\src\com\tutorialspoint\DataBeanList.java</b> are as below:</p>
<pre class="prettyprint">
package com.tutorialspoint;

import java.util.ArrayList;

public class DataBeanList {
   public ArrayList&lt;DataBean&gt; getDataBeanList() {
      ArrayList&lt;DataBean&gt; dataBeanList = new ArrayList&lt;DataBean&gt;();

      dataBeanList.add(produce("Manisha", "India"));
      dataBeanList.add(produce("Dennis Ritchie", "USA"));
      dataBeanList.add(produce("V.Anand", "India"));
      dataBeanList.add(produce("Shrinath", "California"));

      return dataBeanList;
   }

   /**
    * This method returns a DataBean object,
    * with name and country set in it.
    */
   private DataBean produce(String name, String country) {
      DataBean dataBean = new DataBean();
      dataBean.setName(name);
      dataBean.setCountry(country);
      return dataBean;
   }
}
</pre>

<h3>Report Generation</h3>
<p>We will compile and execute the above file using our regular ANT build process. The contents of the file build.xml (saved under directory C:\tools\jasperreports-5.0.1\test) are as below.
<blockquote>The import file - baseBuild.xml is picked from chapter <a href="jasper_environment_setup.htm">Environment Setup</a> and should be placed in the same directory as the build.xml.</blockquote>
</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project name="JasperReportTest" default="viewFillReport" basedir="."&gt;
   &lt;import file="baseBuild.xml" /&gt;
   &lt;target name="viewFillReport"
      depends="compile,compilereportdesing,run"
      description="Launches the report viewer to preview
      the report stored in the .JRprint file."&gt;
      &lt;java classname="net.sf.jasperreports.view.JasperViewer"
      fork="true"&gt;
         &lt;arg value="-F${file.name}.JRprint" /&gt;
         &lt;classpath refid="classpath" /&gt;
      &lt;/java&gt;
   &lt;/target&gt;
   &lt;target name="compilereportdesing"
      description="Compiles the JXML file and
      produces the .jasper file."&gt;
      &lt;taskdef name="jrc"
      classname="net.sf.jasperreports.ant.JRAntCompileTask"&gt;
         &lt;classpath refid="classpath" /&gt;
      &lt;/taskdef&gt;
      &lt;jrc destdir="."&gt;
         &lt;src&gt;
         &lt;fileset dir="."&gt;
            &lt;include name="*.jrxml" /&gt;
         &lt;/fileset&gt;
         &lt;/src&gt;
         &lt;classpath refid="classpath" /&gt;
      &lt;/jrc&gt;
   &lt;/target&gt;
&lt;/project&gt;
</pre>
<p>Next, let's open command line window and go to the directory where build.xml is placed. Finally execute the command <b>ant -Dmain-class=com.tutorialspoint.JasperReportFill</b> (viewFullReport is the default target) as follows:</p>
<pre class="result">
C:\tools\jasperreports-5.0.1\test>ant -Dmain-class=com.tutorialspoint.JasperReportFill
Buildfile: C:\tools\jasperreports-5.0.1\test\build.xml

clean-sample:
   [delete] Deleting directory C:\tools\jasperreports-5.0.1\test\classes
   [delete] Deleting: C:\tools\jasperreports-5.0.1\test\jasper_report_template.jasper
   [delete] Deleting: C:\tools\jasperreports-5.0.1\test\jasper_report_template.jrprint

compile:
    [mkdir] Created dir: C:\tools\jasperreports-5.0.1\test\classes
    [javac] C:\tools\jasperreports-5.0.1\test\baseBuild.xml:28:
    warning: 'includeantruntime' was not set, defaulting to bu
    [javac] Compiling 4 source files to C:\tools\jasperreports-5.0.1\test\classes

compilereportdesing:
      [jrc] Compiling 1 report design files.
      [jrc] log4j:WARN No appenders could be found for logger
      (net.sf.jasperreports.engine.xml.JRXmlDigesterFactory).
      [jrc] log4j:WARN Please initialize the log4j system properly.
      [jrc] log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
      [jrc] File : C:\tools\jasperreports-5.0.1\test\jasper_report_template.jrxml ... OK.

run:
     [echo] Runnin class : com.tutorialspoint.JasperReportFill
     [java] log4j:WARN No appenders could be found for logger
     (net.sf.jasperreports.extensions.ExtensionsEnvironment).
     [java] log4j:WARN Please initialize the log4j system properly.
     [java] call afterReportInit()
     [java] call afterReportInit()

viewFillReport:
     [java] log4j:WARN No appenders could be found for logger
     (net.sf.jasperreports.extensions.ExtensionsEnvironment).
     [java] log4j:WARN Please initialize the log4j system properly.

BUILD SUCCESSFUL
Total time: 18 minutes 49 seconds
</pre>
<p>As a result of above compilation, a JasperViewer window opens up as in the screen below:</p>
<img src="images/report_scriptlet_example.jpg" alt="Jasper Report Viewer" />
<p>Here we see that in the title section a message <i>This variable value was modified by the scriptlet.</i> is displayed and at the bottom of the report a message <i>Hello! I'm the report's scriptlet object.</i> from the <i>hello</i> method of the MyScriptlet class is displayed.</p>
<hr />
<div class="pre-btn">
<a href="jasper_report_styles.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/jasper_report_scriptlets.pdf" alt="JasperReports - Report Scriptlets" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="jasper_create_subreports.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="index.htm" target="_top">iOS </a> |
<a href="../servlets/index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="../struts_2/index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="../unix/index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2012 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/jasper_reports/jasper_report_scriptlets.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:18:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>