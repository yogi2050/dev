<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from www.tutorialspoint.com/asp.net/asp.net_web_services.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>ASP.NET - Web Services</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="Keywords" content="Web Services, Free, ASP.NET, Tutorial, Reference, Manual, Guide, Beginners,Event Handling, Life Cycle, ADO.NET, AJAX control,Web Services,Add Rotator, Panel, control, LINQ, Database Access, Security, Debugging, Error, Handling, Configuration, Deployment." />
<meta name="description" content="ASP.NET Web Services -  Free ASP.NET Tutorials, Reference Manual, and Quick Guide for Beginners. Learn ASP.NET starting from Environment Setup, Basic Controls, Directives, Event Handling, Life Cycle, ADO.NET, AJAX control,Web Services,Add Rotator, Panel control, LINQ, Database Access, Security, Debugging, Error Handling, Configuration and Deployment." />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base  />
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript"> 
</script>
<script type="text/javascript"> 
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<a name="top"></a>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>ASP.NET Tutorial</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="index.html">ASP.NET -  Home</a></li>
<li><a class="left" target="_top" href="asp.net_introduction.html">ASP.NET -  Introduction</a></li>
<li><a class="left" target="_top" href="asp.net_environment_setup.html">ASP.NET -  Environment</a></li>
<li><a class="left" target="_top" href="asp.net_life_cycle.html">ASP.NET -  Life Cycle</a></li>
<li><a class="left" target="_top" href="asp.net_first_example.html">ASP.NET -  First Example</a></li>
<li><a class="left" target="_top" href="asp.net_event_handling.html">ASP.NET -  Event Handling</a></li>
<li><a class="left" target="_top" href="asp.net_server_side.html">ASP.NET -  Server Side</a></li>
<li><a class="left" target="_top" href="asp.net_server_controls.html">ASP.NET -  Server Controls</a></li>
<li><a class="left" target="_top" href="asp.net_html_server.html">ASP.NET -  HTML Server</a></li>
<li><a class="left" target="_top" href="asp.net_client_side.html">ASP.NET -  Client Side</a></li>
<li><a class="left" target="_top" href="asp.net_basic_controls.html">ASP.NET -  Basic Controls</a></li>
<li><a class="left" target="_top" href="asp.net_directives.html">ASP.NET -  Directives</a></li>
<li><a class="left" target="_top" href="asp.net_managing_state.html">ASP.NET -  Managing State</a></li>
<li><a class="left" target="_top" href="asp.net_validators.html">ASP.NET -  Validators</a></li>
<li><a class="left" target="_top" href="asp.net_database_access.html">ASP.NET -  Database Access</a></li>
<li><a class="left" target="_top" href="asp.net_ado_net.html">ASP.NET -  ADO.net</a></li>
<li><a class="left" target="_top" href="asp.net_file_uploading.html">ASP.NET -  File Uploading</a></li>
<li><a class="left" target="_top" href="asp.net_ad_rotator.html">ASP.NET -  Ad Rotator</a></li>
<li><a class="left" target="_top" href="asp.net_calenders.html">ASP.NET -  Calendars</a></li>
<li><a class="left" target="_top" href="asp.net_multi_views.html">ASP.NET -  Multi Views</a></li>
<li><a class="left" target="_top" href="asp.net_panel_controls.html">ASP.NET -  Panel Controls</a></li>
<li><a class="left" target="_top" href="asp.net_ajax_control.html">ASP.NET -  AJAX Control</a></li>
<li><a class="left" target="_top" href="asp.net_data_sources.html">ASP.NET -  Data Sources</a></li>
<li><a class="left" target="_top" href="asp.net_data_binding.html">ASP.NET -  Data Binding</a></li>
<li><a class="left" target="_top" href="asp.net_custom_controls.html">ASP.NET -  Custom Controls</a></li>
<li><a class="left" target="_top" href="asp.net_personalization.html">ASP.NET -  Personalization</a></li>
<li><a class="left" target="_top" href="asp.net_error_handling.html">ASP.NET -  Error Handling</a></li>
<li><a class="left" target="_top" href="asp.net_debugging.html">ASP.NET -  Debugging</a></li>
<li><a class="left" target="_top" href="asp.net_linq.html">ASP.NET -  LINQ</a></li>
<li><a class="left" target="_top" href="asp.net_security.html">ASP.NET -  Security</a></li>
<li><a class="left" target="_top" href="asp.net_data_caching.html">ASP.NET -  Data Caching</a></li>
<li><a class="left" target="_top" href="asp.net_web_services.html"><b>ASP.NET -  Web Services</b></a></li>
<li><a class="left" target="_top" href="asp.net_multi_threading.html">ASP.NET -  Multi Threading</a></li>
<li><a class="left" target="_top" href="asp.net_configuration.html">ASP.NET -  Configuration</a></li>
<li><a class="left" target="_top" href="asp.net_deployment.html">ASP.NET -  Deployment</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>ASP.NET Quick Guide</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="asp.net_quick_guide.html">ASP.NET - Quick Guide</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>ASP.NET Useful Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="asp.net_useful_resources.html">ASP.NET - Useful Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../forums/index.html">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle" cellpadding="5" cellspacing="0">
<tr>
<td>
<!-- PRINTING STARTS HERE -->
<h1>ASP.NET -  Web Services</h1>
<hr />
<a href="asp.net_data_caching.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="asp.net_multi_threading.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
<hr />
<p>A web service is a web-based functionality accessed using the protocols of the web to be used by the web applications. There are three aspects of web service development:</p>
<ul>
<li><p>Creating the web service</p></li> 
<li><p>Creating a proxy</p></li> 
<li><p>Consuming the web service </p></li> 
</ul>
<h1>Creating the Web Sevice:</h1>
<p>A web service is an web application which is basically a class consisting of methods that could be used by other applications. It also follows a code-behind architecture like the ASP.Net web pages, although it does not have an user interface.</p>
<p>To understand the concept let us create a web service that will provide stock price information. The clients can query about the name and price of a stock based on the stock symbol. To keep this example simple, the values are hardcoded in a two-dimensional array. This web service will have three methods:</p>
<ul>
<li><p>A defaullt HelloWorld method</p></li>
<li><p>A GetName Method</p></li>
<li><p>A GetPrice Method</p></li>
</ul>
<p>Take the following steps to create the web service:</p>
<p><b>Step (1):</b> Select File--&gt; New --&gt; Web Site in Visual Studio, and then select ASP.Net Web Service. </p>
<p><b>Step (2):</b> A web service file called Service.asmx and its code behind file, Service.cs is created in the App_Code directory of the project. </p>
<p><b>Step (3):</b> Change the names of the files to StockService.asmx and StockService.cs. </p>
<p><b>Step (4):</b> The .asmx file has simply a WebService directive on it:</p>
<table class="src" cellpadding="5">
<tr><td><pre>
&lt;%@ WebService Language="C#" 
                  CodeBehind="~/App_Code/StockService.cs" 
                  Class="StockService" %&gt;
</pre></td></tr>
</table>
<p><b>Step (5):</b> Open the StockService.cs file, the code generated in it is the basic Hello World service.  The default web service code behind file looks like the following:</p>
<table class="src" cellpadding="5">
<tr><td><pre>
using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Linq;
namespace StockService
{
   /// &lt;summary&gt;
   /// Summary description for Service1
   /// &lt;summary&gt;
   [WebService(Namespace = "http://tempuri.org/")]
   [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
   [ToolboxItem(false)]
   // To allow this Web Service to be called from script, 
   // using ASP.NET AJAX, uncomment the following line. 
   // [System.Web.Script.Services.ScriptService]
   public class Service1 : System.Web.Services.WebService
   {
     [WebMethod]
     public string HelloWorld()
     {
        return "Hello World";
     }
   }
}
</pre></td></tr>
</table>
<p><b>Step (6):</b>  Change the code behind file to add the two dimensional array of strings for stock symbol, name and price and two web methods for getting the stock information. </p>
<table class="src" cellpadding="5">
<tr><td><pre>
using System;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Linq;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, 
// using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class StockService : System.Web.Services.WebService
{
   public StockService () {
     //Uncomment the following if using designed components 
     //InitializeComponent(); 
   }
   string[,] stocks =
   {
   {"RELIND", "Reliance Industries", "1060.15"},
   {"ICICI", "ICICI Bank", "911.55"},
   {"JSW", "JSW Steel", "1201.25"},
   {"WIPRO", "Wipro Limited", "1194.65"},
   {"SATYAM", "Satyam Computers", "91.10"}
   };

   [WebMethod]
   public string HelloWorld() {
      return "Hello World";
   }
   [WebMethod]
   public double GetPrice(string symbol)
   { 
      //it takes the symbol as parameter and returns price
      for (int i = 0; i &lt; stocks.GetLength(0); i++)
      {
         if (String.Compare(symbol, stocks[i, 0], true) == 0)
         return Convert.ToDouble(stocks[i, 2]);
      }
      return 0;
   }
   [WebMethod]
   public string GetName(string symbol)
   {
      // It takes the symbol as parameter and 
      // returns name of the stock
      for (int i = 0; i &lt; stocks.GetLength(0); i++)
      {
         if (String.Compare(symbol, stocks[i, 0], true) == 0)
           return stocks[i, 1];
      }
      return "Stock Not Found";
   }
}
</pre></td></tr>
</table>
<p><b>Step (7) :</b> Running the web service application gives a web service test page, which allows testing the service methods.</p>
<center>
<img src="../images/stock_service.html" alt="Stock Service" />
</center>
<p><b>Step (8) :</b> Click on a method name, and check whether it runs properly.</p>
<center>
<img src="../images/get_name_service.html" alt="Get Name" />
</center>
<p><b>Step (9):</b> For testing the GetName method, provide one of the stock symbols, which are hard coded, it returns the name of the stock</p>
<center>
<img src="../images/name_of_stock.html" alt="the name of the stock" />
</center>
<h1>Consuming the Web Service:</h1>
<p>For using the web service, create a web site under the same solution. This could be done by right clicking on the Solution name in the Solution Explorer. The web page calling the web service should have a label control to display the returned results and two button controls one for post back and another for calling the service.</p>
<p>The content file for the web application is as follows:</p>
<table class="src" cellpadding="5">
<tr><td><pre>
&lt;%@ Page Language="C#" 
         AutoEventWireup="true" 
         CodeBehind="Default.aspx.cs" 
         Inherits="wsclient._Default" %&gt;

&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml" &gt;
&lt;head runat="server"&gt;
&lt;title&gt;Untitled Page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form id="form1" runat="server"&gt;
    &lt;div&gt;
    &lt;h3&gt;Using the Stock Service&lt;/h3&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;asp:Label ID="lblmessage" runat="server"&gt;&lt;/asp:Label&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    &lt;asp:Button ID="btnpostback" runat="server" 
                onclick="Button1_Click" 
                Text="Post Back" Width="132px" /&gt;
    &nbsp;&nbsp;&nbsp;
    &lt;asp:Button ID="btnservice" runat="server" 
                onclick="btnservice_Click" 
                Text="Get Stock" Width="99px" /&gt;
    &lt;/div&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></td></tr>
</table>
<p>The code behind file for the web application is as follows:</p>
<table class="src" cellpadding="5">
<tr><td><pre>
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;

//this is the proxy
using localhost;

namespace wsclient
{
   public partial class _Default : System.Web.UI.Page
   {
      protected void Page_Load(object sender, EventArgs e)
     {
        if (!IsPostBack)
           lblmessage.Text = "First Loading Time: " + 
           DateTime.Now.ToLongTimeString();
        else
           lblmessage.Text = "PostBack at: " + 
           DateTime.Now.ToLongTimeString();
     }
     protected void btnservice_Click(object sender, EventArgs e)
     {
       StockService proxy = new StockService();
       lblmessage.Text = String.Format("Current SATYAM Price:{0}",
       proxy.GetPrice("SATYAM").ToString());
     }
   }
}
</pre></td></tr>
</table>
<h1>Creating the Proxy:</h1>
<p>A proxy is a stand-in for the web service codes. Before using the web service, a proxy must be created. The proxy is registered with the client application. Then the client application makes the calls to the web service as it were using a local method.</p>
<p>The proxy takes the calls, wraps it in proper format and sends it as a SOAP request to the server. SOAP stands for Simple Object Access Protocol. This protocol is used for exchanging web service data. </p>
<p>When the server returns the SOAP package to the client, the proxy decodes everything and presents it to the client application.</p>
<p>Before calling the web service using the btnservice_Click, a web reference should be added to the application. This creates a proxy class transparently, which is used by the btnservice_Click event. </p>
<table class="src" cellpadding="5">
<tr><td><pre>
protected void btnservice_Click(object sender, EventArgs e)
{
  StockService proxy = new StockService();
  lblmessage.Text = String.Format("Current SATYAM Price: {0}", 
  proxy.GetPrice("SATYAM").ToString());
}
</pre></td></tr>
</table>
<p>Take the following steps for creating the proxy:</p>
<p><b>Step (1):</b> Right click on the web application entry in the Solution Explorer and click on 'Add Web Reference'.</p>
<center>
<img src="../images/add_web_reference.html" alt="Add Web Reference" />
</center>
<p><b>Step (2):</b> Select 'Web Services in this solution'. It returns the StockService reference.</p>
<center>
<img src="../images/select_web_services.html" alt="Select Web Services" />
</center>
<p><b>Step (3):</b> Clicking on the service opens the test web page. By default the proxy created is called 'localhost', you can rename it. Click on 'Add Reference' to add the proxy to the client application. </p>
<center>
<img src="../images/stock_service2.html" alt="Stock Service 2" />
</center>
<p>Include the proxy in the code behind file by adding:</p>
<table class="src" cellpadding="5">
<tr><td><pre>
 using localhost;
</pre></td></tr>
</table>
<br />
<hr />
<a href="asp.net_data_caching.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="asp.net_multi_threading.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversiona7e3.html?tutorial=asp.net&amp;file=asp.net_web_services.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/asp.net/asp.net_web_services.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
