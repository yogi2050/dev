<html>

<!-- Mirrored from www.tutorialspoint.com/parrot/parrot_examples.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Parrot Programming Examples</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="Keywords" content="SOAP,XML-RPC,Web Services, AJAX, VB.NET,.NET,  JAVA, J2EE, Unix Makefile,PERL,XSL,XHTML,ASP,ADO,VBScript,DOM,SQL,COLORS,PHP,CGI,Authoring,Programming,Training,Learning, Beginner's guide,Primer,Lessons,School,Howto,Reference,Examples,Samples,Source Code,Tags,Demos,Tips,Links,FAQ,Tag list,Forms,Frames,HTML Entities, HTML Color,w3c,Cascading Style Sheets, CSS, Active Server Pages, ASP, Dynamic Html,DHTML, C++, C#, C, Pro*C, Internet,Database,Development,Web building,Webmaster,Html Guide" />
<meta name="Description" content="Free tutorials and references for SOAP XML-RPC Web Services AJAX JavaScript J2EE ASP.NET VB.NET  C# C++ C Pro*C Makefile PERL Parrot Ruby JAVA J2EE CORBA BILLING CRM OM DLL PHP CGI MySQL PL/SQL SDLC CSS ASP DHTML Flash" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base >
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<table border=0 class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="18" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br>
&nbsp;&nbsp;<b>Parrot Tutorial</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="index.html">Parrot HOME</a></li>
<li><a class="left" target="_top" href="what_is_parrot.html" >What is Parrot ?</a></li>
<li><a class="left" target="_top" href="parrot_installtion.html" >Parrot Installation</a></li>
<li><a class="left" target="_top" href="parrot_instructions.html" >Parrot Instructions</a></li>
<li><a class="left" target="_top" href="parrot_garbage.html" >Garbage Collection</a></li>
<li><a class="left" target="_top" href="parrot_datatype.html" >Parrot Datatypes</a></li>
<li><a class="left" target="_top" href="parrot_registers.html" >Parrot Registers</a></li>
<li><a class="left" target="_top" href="parrot_operations.html" >Parrot Operations</a></li>
<li><a class="left" target="_top" href="parrot_branches.html" >Parrot Branches</a></li>
</ul>
</div>
<br>
&nbsp;&nbsp;<b>Parrot Examples</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="parrot_examples.html" ><b>Parrot Examples</b></a></li>
</ul>
</div>
<br>
&nbsp;&nbsp;<b>Parrot Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="parrot_resources.html" >Parrot Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</b></a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top">
<br><br>
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
<td  style="width:10px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/about_advertising.html">Advertising</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle"  cellpadding="5" cellspacing="0">
<tr>
<td>
<!-- PRINTING STARTS HERE -->
<h1>Parrot Programming Examples</h1>

<a href="parrot_branches.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="parrot_resources.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<hr />
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="middle">
<p>Parrot programing is similar to assembly language programing  and you get a chance to work at lower level. here is the list of programming examples to make you aware of the various aspects of Parrot Programming.</p>
<hr>
<ul>
<li><a target="_top" href="parrot_examples.html#parrot_hello_world" >Classic Hello world!</a>
<li><a target="_top" href="parrot_examples.html#parrot_registers" >Using registers</a><br />
<li><a target="_top" href="parrot_examples.html#parrot_squares" >Summing squares</a><br />
<li><a target="_top" href="parrot_examples.html#parrot_fibonacci" >Fibonacci Numbers</a><br />

<li><a target="_top" href="parrot_examples.html#parrot_factorial" >Computing factorial</a><br />
<li><a target="_top" href="parrot_examples.html#parrot_pbc" >Compiling to PBC</a><br />
<li><a target="_top" href="parrot_examples.html#parrot_pir" >PIR vs. PASM </a><br />
</ul>
<hr>
<h2><a name="parrot_hello_world">Classic Hello world!</a></h2>
<p>Create a file called hello.pir that contains the following code.</p>
<table class="ex" width="100%"<tr><td>
<pre>
  .sub _main
      print "Hello world!\n"
      end
  .end
</pre>
</td></tr></table>
<p>Then run it by typing:</p>

<table class="ex" width="100%"<tr><td>
<pre>
  parrot hello.pir
</pre>
</td></tr></table>
<p>As expected, this will display the text Hello world! on the console, followed by a new line (due to the \n).</p>
<p>In this above example, .sub _main states that the instructions that follow make up a subroutine named _main, until a .end is encountered. The second line contains the print instruction. In this case, we are calling the variant of the instruction that accepts a constant string. The assembler takes care of deciding which variant of the instruction to use for us. The third line contains the end instruction, which causes the interpreter to terminate.</p>
<hr>
<h2><a name="parrot_registers">Using Registers</a></h2>
<p>We can modify hello.pir to first store the string Hello world!\n in a register and then use that register with the print instruction.</p>
<table class="ex" width="100%"<tr><td>
<pre>
  .sub _main
      set S1, "Hello world!\n"
      print S1
      end
  .end
</pre>
</td></tr></table>

<p>Here we have stated exactly which register to use. However, by replacing S1 with $S1 we can delegate the choice of which register to use to Parrot. It is also possible to use an = notation instead of writing the set instruction.</p>
<table class="ex" width="100%"<tr><td>
<pre>
  .sub _main
      $S0 = "Hello world!\n"
      print $S0
      end
  .end
</pre>
</td></tr></table>
<p>To make PIR even more readable, named registers can be used. These are later mapped to real numbered registers.</p>
<table class="ex" width="100%"<tr><td>
<pre>
  .sub _main
      .local string hello
      hello = "Hello world!\n"
      print hello
      end
  .end
</pre>
</td></tr></table>
<p>The .local directive indicates that the named register is only needed inside the current compilation unit (that is, between .sub and .end). Following .local is a type. This can be int (for I registers), float (for N registers), string (for S registers), pmc (for P registers) or the name of a PMC type.</p>
<hr>
<h2><a name="parrot_squares">Summing squares</a></h2>

<p>This example introduces some more instructions and PIR syntax. Lines starting with a # are comments.</P>
<table class="ex" width="100%"<tr><td>
<pre>
  .sub _main
      # State the number of squares to sum.
      .local int maxnum
      maxnum = 10

      # Some named registers we'll use. 
      # Note how we can declare many
      # registers of the same type on one line.
      .local int i, total, temp
      total = 0

      # Loop to do the sum.
      i = 1
  loop:
      temp = i * i
      total += temp
      inc i
      if i &lt;= maxnum goto loop

      # Output result.
      print "The sum of the first "
      print maxnum
      print " squares is "
      print total
      print ".\n"
      end
  .end
</pre>
</td></tr></table>
<p>PIR provides a bit of syntactic sugar that makes it look more high level than assembly. For example:</p>
<table class="ex" width="100%"<tr><td>
<pre>
  temp = i * i
</pre>
</td></tr></table>
<p>Is just another way of writing the more assembly-ish:</p>
<table class="ex" width="100%"<tr><td>
<pre>
  mul temp, i, i
</pre>
</td></tr></table>
<P>And:</p>
<table class="ex" width="100%"<tr><td>
<pre>
 if i <= maxnum goto loop
</pre>
</td></tr></table>
<p>Is the same as:</p>
<table class="ex" width="100%"<tr><td>
<pre>
le i, maxnum, loop
</pre>
</td></tr></table>
<p>And:</p>
<table class="ex" width="100%"<tr><td>
<pre>
  total += temp
</pre>
</td></tr></table>
<p>Is the same as:</p>
<table class="ex" width="100%"<tr><td>
<pre>
add total, temp
</pre>
</td></tr></table>
<p>As a rule, whenever a Parrot instruction modifies the contents of a register, that will be the first register when writing the instruction in assembly form.</p>
<p>As is usual in assembly languages, loops and selection are implemented in terms of conditional branch statements and labels, as shown above. Assembly programming is one place where using goto is not bad form!</p>
<hr>
<h2><a name="parrot_fibonacci">Fibonacci Numbers</a></h2>
<p>The Fibonnaci series is defined like this: take two numbers, 1 and 1. Then repeatedly add together the last two numbers in the series to make the next one: 1, 1, 2, 3, 5, 8, 13, and so on. The Fibonacci number fib(n) is the n'th number in the series. Here's a simple Parrot assembler program that finds the first 20 Fibonacci numbers:</p>
<table class="ex" width="100%"<tr><td>
<pre>
# Some simple code to print some Fibonacci numbers

        print   "The first 20 fibonacci numbers are:\n"
        set     I1, 0
        set     I2, 20
        set     I3, 1
        set     I4, 1
REDO:   eq      I1, I2, DONE, NEXT
NEXT:   set     I5, I4
        add     I4, I3, I4
        set     I3, I5
        print   I3
        print   "\n"
        inc     I1
        branch  REDO
DONE:   end

</pre>
</td></tr></table>
<p>This is the equivalent code in Perl: </p>
<table class="ex" width="100%"<tr><td>
<pre>
        print "The first 20 fibonacci numbers are:\n";
        my $i = 0;
        my $target = 20;
        my $a = 1;
        my $b = 1;
        until ($i == $target) {
           my $num = $b;
           $b += $a;
           $a = $num;
           print $a,"\n";
           $i++;
        }
</pre>
</td></tr></table>
<p><strong>NOTE:</strong> As a fine point of interest, one of the shortest and certainly the most beautiful ways of printing out a Fibonacci series in Perl is perl -le '$b=1; print $a+=$b while print $b+=$a'</p>
<hr>
<h2><a name="parrot_factorial">Recursively computing factorial</a></h2>
<p>In this example we define a factorial function and recursively call it to compute factorial.</p>
<table class="ex" width="100%"<tr><td>
<pre>

 .sub _fact
      # Get input parameter.
      .param int n

      # return (n &gt; 1 ? n * _fact(n - 1) : 1)
      .local int result

      if n &gt; 1 goto recurse
      result = 1
      goto return

  recurse:
      $I0 = n - 1
      result = _fact($I0)
      result *= n

  return:
      .return (result)
  .end


  .sub _main :main
      .local int f, i

      # We'll do factorial 0 to 10.
      i = 0
  loop:
      f = _fact(i)

      print "Factorial of "
      print i
      print " is "
      print f
      print ".\n"

      inc i
      if i &lt;= 10 goto loop

      # That's it.
      end
  .end
</pre>
</td></tr></table>
<p>Let's look at the _fact sub first. A point that was glossed over earlier is why the names of subroutines all start with an underscore. This is done simply as a way of showing that the label is global rather than scoped to a particular subroutine. This is significant as the label is then visible to other subroutines.</p>
<p>The first line, .param int n, specifies that this subroutine takes one integer parameter and that we'd like to refer to the register it was passed in by the name n for the rest of the sub.</p>
<p>Much of what follows has been seen in previous examples, apart from the line reading:</p>
<table class="ex" width="100%"<tr><td>
<pre>
result = _fact($I0)
</pre>
</td></tr></table>

<p>This single line of PIR actually represents quite a few lines of PASM. First, the value in register $I0 is moved into the appropriate register for it to be received as an integer parameter by the _fact function. Other calling related registers are then set up, followed by _fact being invoked. Then, once _fact returns, the value returned by _fact is placed into the register given the name result.</p>
<p>Right before the .end of the _fact sub, a .return directive is used to ensure the value held in the register named result is placed into the correct register for it to be seen as a return value by the code calling the sub.</p>
<p>The call to _fact in main works in just the same was as the recursive call to _fact within the sub _fact itself. The only remaining bit of new syntax is the :main, written after .sub _main. By default, PIR assumes that execution begins with the first sub in the file. This behavior can be changed by marking the sub to start in with :main.</p>
<hr>
<h2><a name="parrot_pbc">Compiling to PBC</a></h2>
<p>To compile PIR to bytecode, use the -o flag and specify an output file with the extension .pbc.</p>
<table class="ex" width="100%"<tr><td>
<pre>
 parrot -o factorial.pbc factorial.pir
</pre>
</td></tr></table>
<hr>
<h2><a name="parrot_pir">PIR vs. PASM</a></h2>

<p>PIR can be turned into PASM by running:</p>
<table class="ex" width="100%"<tr><td>
<pre>
parrot -o hello.pasm hello.pir
</pre>
</td></tr></table>
<p>The PASM for the final example looks like this:</p>
<table class="ex" width="100%"<tr><td>
<pre>
  _main:
      set S30, "Hello world!\n"
      print S30
      end
</pre>
</td></tr></table>
<p>PASM does not handle register allocation or provide support for named registers. It also does not have the .sub and .end directives, instead replacing them with a label at the start of the instructions.</p>
</td>
</tr>
</table>
<hr />
<a href="parrot_branches.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="parrot_resources.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversionb9ba.html?tutorial=parrot&amp;file=parrot_examples.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<hr />
<br />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/parrot/parrot_examples.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
