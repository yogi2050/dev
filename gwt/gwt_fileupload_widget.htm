<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/gwt/gwt_fileupload_widget.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:08:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>GWT FileUpload Widget</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="GWT FileUpload Widget - Learn Google Web Toolkit (GWT) programming in simple and easy steps starting with GWT Environment Setup, Web Application Creation, Deploy and Debug Application, Style with CSS, Component Model, Basic, Form and Complex Widgets,  Layout Panels, Event Handling,  Custom Widgets, RPC Communication, JUnit Integration, Internationalization, History Class, Bookmark Support and Logging Framework." />
<meta name="keywords" content="GWT, Environment, Setup, Web, Application, Deploy, Debug, Application, Style, CSS, Component, Model, Basic, Form, Complex, Widgets, Layout, Panels, Event, Handling, Custom, RPC, Communication, JUnit Integration, Internationalization, History, Class, Bookmark, Support, Logging, Framework." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
/* GWT Scheme */
#topmenu a:link {text-decoration:none;color:#000 !important;background-color:transparent;font-weight:bold;}
#topmenu a:visited {text-decoration:none;color:#000 !important;background-color:transparent;font-weight:bold;}
#topmenu a:hover {text-decoration:none;color:#fff !important;background-color:transparent;font-weight:bold;}
#header{ 
   background:#30ab75 !important;
}
#topmenu
{
   background-color:#dbaa02 !important;
}
#leftcol ul.menu li.heading 
{
   background:#30ab75 !important;
   border:1px solid #dbaa02 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1250px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
   _uacct = "UA-232293-6";
   urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index-2.html">Tutorials Point Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index-2.html" target="_top">HOME </a>
<a href="../java/index.html" target="_top">JAVA </a>
<a href="../php/index.html" target="_top">PHP </a>
<a href="../python/index.html" target="_top">Python </a>
<a href="../ruby/index.html" target="_top">Ruby </a>
<a href="../perl/index.html" target="_top">Perl </a>
<a href="../html/index.html" target="_top">HTML </a>
<a href="../css/index.html" target="_top">CSS </a>
<a href="../javascript/index.html" target="_top">Javascript </a>
<a href="../mysql/index.html" target="_top">MySQL </a>
<a href="../cplusplus/index.html" target="_top">C++ </a>
<a href="../unix/index.html" target="_top">UNIX </a>
<a href="../more.html" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.html" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.html" target="_top">ABOUT</a> |
<a href="../about/contact_us.html" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/gwt-mini.png" alt="GWT tutorial" />
</div>
<ul class="menu">
<li class="heading">GWT Tutorial</li>
<li><a target="_top" href="index.html">GWT - Home</a></li>
<li><a target="_top" href="gwt_overview.html">GWT - Overview</a></li>
<li><a target="_top" href="gwt_environment_setup.html">GWT - Environment</a></li>
<li><a target="_top" href="gwt_applications.html">GWT - Applications</a></li>
<li><a target="_top" href="gwt_create_application.html">GWT - Create Application</a></li>
<li><a target="_top" href="gwt_deploy_application.html">GWT - Deploy Application</a></li>
<li><a target="_top" href="gwt_style_with_css.html">GWT - Style with CSS</a></li>
<li><a target="_top" href="gwt_basic_widgets.html">GWT - Basic Widgets</a></li>
<li><a target="_top" href="gwt_form_widgets.html"><b>GWT - Form Widgets</b></a></li>
<li><a target="_top" href="gwt_complex_widgets.html">GWT - Complex widgets</a></li>
<li><a target="_top" href="gwt_layout_panels.html">GWT - Layout Panels</a></li>
<li><a target="_top" href="gwt_event_handling.html">GWT - Event Handling</a></li>
<li><a target="_top" href="gwt_custom_widget.html">GWT - Custom Widgets</a></li>
<li><a target="_top" href="gwt_uibinder.html">GWT -  UIBinder</a></li>
<li><a target="_top" href="gwt_rpc_communication.html">GWT - RPC Communication</a></li>
<li><a target="_top" href="gwt_junit_integration.html">GWT - JUnit Integration</a></li>
<li><a target="_top" href="gwt_debug_application.html">GWT - Debug Application</a></li>
<li><a target="_top" href="gwt_internationalization.html">GWT - Internationalization</a></li>
<li><a target="_top" href="gwt_history_class.html">GWT -  History Class</a></li>
<li><a target="_top" href="gwt_bookmark_support.html">GWT - Bookmark Support</a></li>
<li><a target="_top" href="gwt_logging_framework.html">GWT -  Logging Framework</a></li>
</ul>
<ul class="menu">
<li class="heading">GWT  Useful Resources</li>
<li><a target="_top" href="gwt_quick_guide.html">GWT - Quick Guide</a></li>
<li><a target="_top" href="gwt_useful_resources.html">GWT - Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>GWT - FileUpload Widget</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="gwt_form_widgets.html">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="gwt_form_widgets.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<h2>Introduction</h2>
<p>The <b>FileUpload</b> widget wraps the HTML &lt;input type='file'&gt; element. This widget must be used with FormPanel if it is to be submitted to a server. </p>
<h2>Class declaration</h2>
<p>Following is the declaration for <b>com.google.gwt.user.client.ui.FileUpload</b> class:</p>
<pre class="prettyprint">
public class FileUpload 
   extends Widget
      implements HasName, HasChangeHandlers
</pre>
<h2>CSS style rules</h2>
<p>Following default CSS Style rules will be applied to all the TextBox widget. You can override it as per your requirements.</p>
<pre class="prettyprint">
.gwt-FileUpload {}
</pre>
<h2>Class constructors</h2>
<table class="src">
<tr><th style="width:5%">S.N.</th><th>Constructor &amp; Description</th></tr>
<tr><td>1</td><td><b>FileUpload()  </b><br>Constructs a new file upload widget.</td></tr>
<tr><td>2</td><td><b>FileUpload(Element element) </b><br>This constructor may be used by subclasses to explicitly use an existing element.</td></tr>
</table>
<h2>Class methods</h2>
<table class="src">
<tr><th style="width:5%;">S.N.</th><th>Function name &amp; Description</th></tr>
<tr><td>1</td><td><b>HandlerRegistration addChangeHandler(ChangeHandler handler)</b><br />Adds a ChangeEvent handler.</td></tr>
<tr><td>2</td><td><b>java.lang.String getFilename()</b><br />Gets the filename selected by the user.</td></tr>
<tr><td>3</td><td><b>java.lang.String getName()</b><br />Gets the widget's name.</td></tr>
<tr><td>4</td><td><b>boolean isEnabled()</b><br />Gets whether this widget is enabled.</td></tr>
<tr><td>5</td><td><b>void onBrowserEvent(Event event)</b><br />Fired whenever a browser event is received.</td></tr>
<tr><td>6</td><td><b>void setEnabled(boolean enabled)</b><br />Sets whether this widget is enabled.</td></tr>
<tr><td>7</td><td><b>void setName(java.lang.String name)</b><br />Sets the widget's name.</td></tr>
<tr><td>8</td><td><b>static FileUpload wrap(Element element)</b><br />Creates a FileUpload widget that wraps an existing &lt;input type='file'&gt; element.</td></tr>
</table>
<h2>Methods inherited</h2>
<p>This class inherits methods from the following classes:</p>
<ul class="list">
<li><p>com.google.gwt.user.client.ui.UIObject</p></li>
<li><p>com.google.gwt.user.client.ui.Widget</p></li>
<li><p>java.lang.Object</p></li>
</ul>
<h2>FileUpload Widget Example</h2>
<p>This example will take you through simple steps to show usage of a FileUpload Widget in GWT. Follow the following steps to update the GWT application we created in <i>GWT -  Create Application</i> chapter:</p>
<table class="src">
<tr><th class="fivepct">Step</th><th>Description</th></tr>
<tr><td>1</td><td>Create a project with a name <i>HelloWorld</i> under a package <i>com.tutorialspoint</i> as explained in the <i>GWT - Create Application</i> chapter.</td></tr>
<tr><td>2</td><td>Modify <i>HelloWorld.gwt.xml</i>, <i>HelloWorld.css</i>, <i>HelloWorld.html</i> and <i>HelloWorld.java</i> as explained below. Keep rest of the files unchanged.</td></tr>
<tr><td>3</td><td>Compile and run the application to verify the result of the implemented logic.</td></tr>
</table>
<p>Following is the content of the modified module descriptor <b>src/com.tutorialspoint/HelloWorld.gwt.xml</b>.</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;module rename-to='helloworld'&gt;
  &lt;!-- Inherit the core Web Toolkit stuff.                        --&gt;
  &lt;inherits name='com.google.gwt.user.User'/&gt;

  &lt;!-- Inherit the default GWT style sheet.                       --&gt;
  &lt;inherits name='com.google.gwt.user.theme.clean.Clean'/&gt;

  &lt;!-- Specify the app entry point class.                         --&gt;
  &lt;entry-point class='com.tutorialspoint.client.HelloWorld'/&gt;

  &lt;!-- Specify the paths for translatable code                    --&gt;
  &lt;source path='client'/&gt;
  &lt;source path='shared'/&gt;

&lt;/module&gt;
</pre>
<p>Following is the content of the modified Style Sheet file <b>war/HelloWorld.css</b>.</p>
<pre class="prettyprint">
body{
   text-align: center;
   font-family: verdana, sans-serif;
}
h1{
   font-size: 2em;
   font-weight: bold;
   color: #777777;
   margin: 40px 0px 70px;
   text-align: center;
}
.gwt-FileUpload {
   color: green; 
}
</pre>
<p>Following is the content of the modified HTML host file <b>war/HelloWorld.html</b>.</p>
<pre class="prettyprint">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
   &lt;link rel="stylesheet" href="HelloWorld.css"/&gt;
   &lt;script language="javascript" src="helloworld/helloworld.nocache.js"&gt;
   &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;FileUpload Widget Demonstration&lt;/h1&gt;
&lt;div id="gwtContainer"&gt;&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Let us have following content of Java file <b>src/com.tutorialspoint/HelloWorld.java</b> which will demonstrate use of FileUpload widget.</p>
<pre class="prettyprint">
package com.tutorialspoint.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.FileUpload;
import com.google.gwt.user.client.ui.FormPanel;
import com.google.gwt.user.client.ui.FormPanel.SubmitCompleteEvent;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.VerticalPanel;

public class HelloWorld implements EntryPoint {
   public void onModuleLoad() {
      VerticalPanel panel = new VerticalPanel();
      //create a FormPanel 
      final FormPanel form = new FormPanel();
      //create a file upload widget
      final FileUpload fileUpload = new FileUpload();
      //create labels
      Label selectLabel = new Label("Select a file:");
      //create upload button
      Button uploadButton = new Button("Upload File");
      //pass action to the form to point to service handling file 
      //receiving operation.
      form.setAction("http://www.tutorialspoint.com/gwt/myFormHandler");
      // set form to use the POST method, and multipart MIME encoding.
      form.setEncoding(FormPanel.ENCODING_MULTIPART);
      form.setMethod(FormPanel.METHOD_POST);
    
      //add a label
      panel.add(selectLabel);
      //add fileUpload widget
      panel.add(fileUpload);
      //add a button to upload the file
      panel.add(uploadButton);
      uploadButton.addClickHandler(new ClickHandler() {
         @Override
         public void onClick(ClickEvent event) {
            //get the filename to be uploaded
            String filename = fileUpload.getFilename();
            if (filename.length() == 0) {
               Window.alert("No File Specified!");
            } else {
               //submit the form
               form.submit();			          
            }				
         }
      });
   
      form.addSubmitCompleteHandler(new FormPanel.SubmitCompleteHandler() {
         @Override
         public void onSubmitComplete(SubmitCompleteEvent event) {
            // When the form submission is successfully completed, this 
            //event is fired. Assuming the service returned a response 
            //of type text/html, we can get the result text here 
            Window.alert(event.getResults());				
         }
      });
      panel.setSpacing(10);
	  
      // Add form to the root panel.      
      form.add(panel);      

      RootPanel.get("gwtContainer").add(form);
   }	
}</pre>
<p>Once you are ready with all the changes done, let us compile and run the application in development mode as we did in <a target="_top" href="gwt_create_application.html">GWT - Create Application</a> chapter. If everything is fine with your application, this will produce following result:</p>
<img src="images/gwt_widget_fileupload.html" alt="GWT FileUpload Widget"/>
<ul class="list">
<li><p>Following is the java server page code snippet demonstrating server side capability for file upload</p></li>
<li><p>We're using <a href="http://commons.apache.org/io/" target="nofollow">Common IO</a> and <a href="http://commons.apache.org/fileupload/" target="nofollow">Commons FileUpload</a> libraries to add file-upload capability to server side page.</p></li>
<li><p>File will be uploaded to uploadFiles folder relative to location where upload.jsp is located on server side.</p></li>
</ul>
<pre class="prettyprint">
&lt;%@page import="org.apache.commons.fileupload.FileItemFactory"%&gt;
&lt;%@page import="org.apache.commons.fileupload.disk.DiskFileItemFactory"%&gt;
&lt;%@page import="org.apache.commons.fileupload.servlet.ServletFileUpload"%&gt;
&lt;%@page import="org.apache.commons.fileupload.FileItem"%&gt;
&lt;%@page import="org.apache.commons.io.FilenameUtils"%&gt;
&lt;%@page import="java.util.List"%&gt;
&lt;%@page import="java.util.Iterator"%&gt;
&lt;%@page import="java.io.File"%&gt;
&lt;%@page import="java.io.FileOutputStream"%&gt;
&lt;%@page import="java.io.InputStream"%&gt;

&lt;%
   // Create a factory for disk-based file items
   FileItemFactory factory = new DiskFileItemFactory();
   // Create a new file upload handler
   ServletFileUpload upload = new ServletFileUpload(factory);
   try{
      // Parse the request
         List items = upload.parseRequest(request); 

         // Process the uploaded items
         Iterator iter = items.iterator();

         while (iter.hasNext()) {
            FileItem item = (FileItem) iter.next();
            //handling a normal form-field
            if(item.isFormField()) {
               System.out.println("Got a form field");
               String name = item.getFieldName();
               String value = item.getString();
               System.out.print("Name:"+name+",Value:"+value);				
            } else {//handling file loads
               System.out.println("Not form field");
               String fieldName = item.getFieldName();
               String fileName = item.getName();
               if (fileName != null) {
                  fileName = FilenameUtils.getName(fileName);
               }
               String contentType = item.getContentType();
               boolean isInMemory = item.isInMemory();
               long sizeInBytes = item.getSize();
               System.out.print("Field Name:"+fieldName
               +",File Name:"+fileName);
               System.out.print("Content Type:"+contentType
               +",Is In Memory:"+isInMemory+",Size:"+sizeInBytes);			 
               byte[] data = item.get();
               fileName = getServletContext()
                         .getRealPath( "/uploadedFiles/" + fileName);
               System.out.print("File name:" +fileName);			
               FileOutputStream fileOutSt = new FileOutputStream(fileName);
               fileOutSt.write(data);
               fileOutSt.close();
               out.print("File Uploaded Successfully!");
            }	
         }
    } catch(Exception e){
	out.print("File Uploading Failed!" + e.getMessage());
}
%&gt;
</pre>
<hr />
<div class="pre-btn">
<a href="gwt_form_widgets.html">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/gwt_fileupload_widget.html" alt="GWT FileUpload Widget" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="gwt_form_widgets.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.html" target="_top">ASP.NET </a> |
<a href="../jquery/index.html" target="_top">jQuery </a> |
<a href="../ajax/index.html" target="_top">AJAX </a> |
<a href="../ant/index.html" target="_top">ANT</a> |
<a href="../jsp/index.html" target="_top">JSP </a> |
<a href="../servlets/index.html" target="_top">Servlets </a> |
<a href="../log4j/index.html" target="_top">log4j </a> |
<a href="../ibatis/index.html" target="_top">iBATIS </a> |
<a href="../hibernate/index.html" target="_top">Hibernate </a> |
<a href="../jdbc/index.html" target="_top">JDBC </a> |
<a href="../struts_2/index.html" target="_top">Struts </a> |
<a href="../html5/index.html" target="_top">HTML5 </a> |
<a href="../sql/index.html" target="_top">SQL </a> |
<a href="../mysql/index.html" target="_top">MySQL </a> |
<a href="../cplusplus/index.html" target="_top">C++ </a> |
<a href="../unix/index.html" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/gwt/gwt_fileupload_widget.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:08:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
