<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/jdbc/jdbc-transactions.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:47:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>JDBC - Transactions (Savepoint, AutoCommit, Commit and Rollback)</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="JDBC Transactions (Savepoint, AutoCommit, Commit and Rollback) - Learning JDBC in simple and easy steps using this beginner's tutorial containing basic to advanced knowledge of JDBC including Drivers, Environment Setup, SQL Statement, Insert, Update, Select, Delete, Group By, Where Clause, Pagination, Result Sets, Database, Exception, Handling etc." />
<meta name="Keywords" content="Java, JDBC, Tutorials, Learning, Beginners, Basics, Drivers, Environment, Setup, SQL, Statement, Insert, Update, Select, Delete, Group By, Where Clause, Pagination, Result Sets, Database, Exception, Handling" />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#DA406A !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#DA406A !important;
}
#topmenu
{
background-color:#760422 !important;
}
#leftcol ul.menu li.heading 
{
background:#DA406A !important;
border:1px solid #760422 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1020px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index-2.html">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index-2.html" target="_top">HOME </a>
<a href="../java/index.html" target="_top">JAVA </a>
<a href="../php/index.html" target="_top">PHP </a>
<a href="../python/index.html" target="_top">Python </a>
<a href="../ruby/index.html" target="_top">Ruby </a>
<a href="../perl/index.html" target="_top">Perl </a>
<a href="../html/index.html" target="_top">HTML </a>
<a href="../css/index.html" target="_top">CSS </a>
<a href="../javascript/index.html" target="_top">Javascript </a>
<a href="../mysql/index.html" target="_top">MySQL </a>
<a href="../cplusplus/index.html" target="_top">C++ </a>
<a href="../unix/index.html" target="_top">UNIX </a>
<a href="../more.html" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.html" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.html" target="_top">ABOUT</a> |
<a href="../about/contact_us.html" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/jdbc-mini-logo.png" alt="JDBC Tutorial" />
</div>
<ul class="menu">
<li class="heading">JDBC Tutorial</li>
<li><a target="_top" href="index.html">JDBC - Home</a></li>
<li><a target="_top" href="jdbc-introduction.html">JDBC - Introduction</a></li>
<li><a target="_top" href="jdbc-sql-syntax.html">JDBC - SQL Syntax</a></li>
<li><a target="_top" href="jdbc-environment-setup.html">JDBC - Environment</a></li>
<li><a target="_top" href="jdbc-sample-code.html">JDBC - Sample Code</a></li>
<li><a target="_top" href="jdbc-driver-types.html">JDBC - Driver Types</a></li>
<li><a target="_top" href="jdbc-db-connections.html">JDBC - Connections</a></li>
<li><a target="_top" href="jdbc-statements.html">JDBC - Statements</a></li>
<li><a target="_top" href="jdbc-result-sets.html">JDBC - Result Sets</a></li>
<li><a target="_top" href="jdbc-data-types.html">JDBC - Data Types</a></li>
<li><a target="_top" href="jdbc-transactions.html"><b>JDBC - Transactions</b></a></li>
<li><a target="_top" href="jdbc-exceptions.html">JDBC - Exceptions</a></li>
<li><a target="_top" href="jdbc-batch-processing.html">JDBC - Batch Processing</a></li>
<li><a target="_top" href="jdbc-stored-procedure.html">JDBC - Stored Procedure</a></li>
<li><a target="_top" href="jdbc-streaming-data.html">JDBC - Streaming Data</a></li>
</ul>
<ul class="menu">
<li class="heading">JDBC Examples</li>
<li><a target="_top" href="jdbc-create-database.html">JDBC - Create Database</a></li>
<li><a target="_top" href="jdbc-select-database.html">JDBC - Select Database</a></li>
<li><a target="_top" href="jdbc-drop-database.html">JDBC - Drop Database</a></li>
<li><a target="_top" href="jdbc-create-tables.html">JDBC - Create Tables</a></li>
<li><a target="_top" href="jdbc-drop-tables.html">JDBC - Drop Tables</a></li>
<li><a target="_top" href="jdbc-insert-records.html">JDBC - Insert Records</a></li>
<li><a target="_top" href="jdbc-select-records.html">JDBC - Select Records</a></li>
<li><a target="_top" href="jdbc-update-records.html">JDBC - Update Records</a></li>
<li><a target="_top" href="jdbc-delete-records.html">JDBC - Delete Records</a></li>
<li><a target="_top" href="jdbc-where-clause.html">JDBC - WHERE Clause</a></li>
<li><a target="_top" href="jdbc-like-clause.html">JDBC - Like Clause</a></li>
<li><a target="_top" href="jdbc-sorting-data.html">JDBC - Sorting Data</a></li>
</ul>
<ul class="menu">
<li class="heading">JDBC Useful Resources</li>
<li><a target="_top" href="jdbc-quick-guide.html">JDBC - Quick Guide</a></li>
<li><a target="_top" href="jdbc-useful-resources.html">JDBC Useful Resources</a></li>
<li><a target="_top" href="../java/index.html">Useful Java Tutorials</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>JDBC - Transactions</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="jdbc-data-types.html">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="jdbc-exceptions.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>If your JDBC Connection is in <i>auto-commit</i> mode, which it is by default, then every SQL statement is committed to the database upon its completion.</p>
<p>That may be fine for simple applications, but there are three reasons why you may want to turn off auto-commit and manage your own transactions:</p>
<ul class="list">
<li><p>To increase performance</p></li>
<li><p>To maintain the integrity of business processes</p></li>
<li><p>To use distributed transactions</p></li>
</ul>
<p>Transactions enable you to control if, and when, changes are applied to the database. It treats a single SQL statement or a group of SQL statements as one logical unit, and if any statement fails, the whole transaction fails.</p>
<p>To enable manual- transaction support instead of the <i>auto-commit</i> mode that the JDBC driver uses by default, use the Connection object's <b>setAutoCommit()</b> method. If you pass a boolean false to setAutoCommit( ), you turn off auto-commit. You can pass a boolean true to turn it back on again.</p>
<p>For example, if you have a Connection object named conn, code the following to turn off auto-commit:</p>
<pre class="prettyprint">
conn.setAutoCommit(false);
</pre>
<h2>Commit &amp; Rollback</h2>
<p>Once you are done with your changes and you want to commit the changes then call <b>commit()</b> method on connection object as follows:</p>
<pre class="prettyprint">
conn.commit( );
</pre>
<p>Otherwise, to roll back updates to the database made using the Connection named conn, use the following code:</p>
<pre class="prettyprint">
conn.rollback( );
</pre>
<p>The following example illustrates the use of a commit and rollback object:</p>
<pre class="prettyprint">
try{
   //Assume a valid connection object conn
   conn.setAutoCommit(false);
   Statement stmt = conn.createStatement();
   
   String SQL = "INSERT INTO Employees  " +
                "VALUES (106, 20, 'Rita', 'Tez')";
   stmt.executeUpdate(SQL);  
   //Submit a malformed SQL statement that breaks
   String SQL = "INSERTED IN Employees  " +
                "VALUES (107, 22, 'Sita', 'Singh')";
   stmt.executeUpdate(SQL);
   // If there is no error.
   conn.commit();
}catch(SQLException se){
   // If there is any error.
   conn.rollback();
}
</pre>
<p>In this case none of the abobe INSERT statement would success and everything would be rolled back.</p>
<p>For a better understanding, I would suggest to study <a href="commit-rollback.htm">Commit - Example Code</a>.</p>
<h2>Using Savepoints:</h2>
<p>The new JDBC 3.0 Savepoint interface gives you additional transactional control. Most modern DBMS support savepoints within their environments such as Oracle's PL/SQL.</p>
<p>When you set a savepoint you define a logical rollback point within a transaction. If an error occurs past a savepoint, you can use the rollback method to undo either all the changes or only the changes made after the savepoint.</p>
<p>The Connection object has two new methods that help you manage savepoints:</p>
<ul class="list">
<li><p><b>setSavepoint(String savepointName):</b> defines a new savepoint. It also returns a Savepoint object.</p></li>
<li><p><b>releaseSavepoint(Savepoint savepointName):</b> deletes a savepoint. Notice that it requires a Savepoint object as a parameter. This object is usually a savepoint generated by the setSavepoint() method.</p></li>
</ul>
<p>There is one <b>rollback ( String savepointName )</b> method which rolls back work to the specified savepoint.</p>
<p>The following example illustrates the use of a Savepoint object:</p>
<pre class="prettyprint">
try{
   //Assume a valid connection object conn
   conn.setAutoCommit(false);
   Statement stmt = conn.createStatement();
   
   //set a Savepoint
   Savepoint savepoint1 = conn.setSavepoint("Savepoint1");
   String SQL = "INSERT INTO Employees " +
                "VALUES (106, 20, 'Rita', 'Tez')";
   stmt.executeUpdate(SQL);  
   //Submit a malformed SQL statement that breaks
   String SQL = "INSERTED IN Employees " +
                "VALUES (107, 22, 'Sita', 'Tez')";
   stmt.executeUpdate(SQL);
   // If there is no error, commit the changes.
   conn.commit();

}catch(SQLException se){
   // If there is any error.
   conn.rollback(savepoint1);
}
</pre>
<p>In this case none of the abobe INSERT statement would success and everything would be rolled back.</p>
<p>For a better understanding, I would suggest to study <a href="jdbc-savepoints.htm">Savepoints - Example Code</a>.</p>
<hr />
<div class="pre-btn">
<a href="jdbc-data-types.html">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/jdbc-transactions.pdf" alt="JDBC - Transactions (Savepoint, AutoCommit, Commit and Rollback)" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="jdbc-exceptions.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.html" target="_top">ASP.NET </a> |
<a href="../jquery/index.html" target="_top">jQuery </a> |
<a href="../ajax/index.html" target="_top">AJAX </a> |
<a href="../ant/index.html" target="_top">ANT</a> |
<a href="../jsp/index.html" target="_top">JSP </a> |
<a href="../servlets/index.html" target="_top">Servlets </a> |
<a href="../log4j/index.html" target="_top">log4j </a> |
<a href="../ibatis/index.html" target="_top">iBATIS </a> |
<a href="../hibernate/index.html" target="_top">Hibernate </a> |
<a href="index.html" target="_top">JDBC </a> |
<a href="../struts_2/index.html" target="_top">Struts </a> |
<a href="../html5/index.html" target="_top">HTML5 </a> |
<a href="../sql/index.html" target="_top">SQL </a> |
<a href="../mysql/index.html" target="_top">MySQL </a> |
<a href="../cplusplus/index.html" target="_top">C++ </a> |
<a href="../unix/index.html" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/jdbc/jdbc-transactions.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:47:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>