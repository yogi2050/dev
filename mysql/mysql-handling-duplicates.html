<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/mysql/mysql-handling-duplicates.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 17:29:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>MySQL Handling Duplicates</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="Keywords" content="Learning, MySQL, Programming, Database, Clauses, Commands, Functions, Administration, Queries, Simple, Steps, Basic, Advanced, Concepts" />
<meta name="description" content="MySQL Handling Duplicates - Learn MySQL from basic to advanced convering database programming clauses command functions administration queries and usgae alongwith PHP in simple steps. This tutorial takes you starting from basic to advance MySQL concepts." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
/* MySQL Scheme */
#topmenu a:link {text-decoration:none;color:#fff !important;background-color:transparent;font-weight:bold;}
#topmenu a:visited {text-decoration:none;color:#fff !important;background-color:transparent;font-weight:bold;}
#topmenu a:hover {text-decoration:none;color:#e0b50c !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#F0CD45 !important;
}
#topmenu
{
background-color:#00618a !important;
}
#leftcol ul.menu li.heading 
{
background:#F0CD45 !important;
border:1px solid #00618a !important;
}
#leftcol, #middlecol, #rightcol {min-height:1250px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index-2.html">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index-2.html" target="_top">HOME </a>
<a href="../java/index.html" target="_top">JAVA </a>
<a href="../php/index.html" target="_top">PHP </a>
<a href="../python/index.html" target="_top">Python </a>
<a href="../ruby/index.html" target="_top">Ruby </a>
<a href="../perl/index.html" target="_top">Perl </a>
<a href="../html/index.html" target="_top">HTML </a>
<a href="../css/index.html" target="_top">CSS </a>
<a href="../javascript/index.html" target="_top">Javascript </a>
<a href="index.html" target="_top">MySQL </a>
<a href="../cplusplus/index.html" target="_top">C++ </a>
<a href="../unix/index.html" target="_top">UNIX </a>
<a href="../more.html" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.html" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.html" target="_top">ABOUT</a> |
<a href="../about/contact_us.html" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/mysql-mini-logo.png" alt="MySQL Tutorial" />
</div>
<ul class="menu">
<li class="heading">Learn MySQL</li>
<li><a target="_top" href="index.html">MySQL Home</a></li>
<li><a target="_top" href="mysql-introduction.html">MySQL Introduction</a></li>
<li><a target="_top" href="mysql-installation.html">MySQL Installation</a></li>
<li><a target="_top" href="mysql-administration.html" >MySQL Administration</a></li>
<li><a target="_top" href="mysql-php-syntax.html">MySQL PHP Syntax</a></li>
<li><a target="_top" href="mysql-connection.html">MySQL Connection</a></li>
<li><a target="_top" href="mysql-create-database.html">MySQL Create Database</a></li>
<li><a target="_top" href="mysql-drop-database.html">MySQL Drop Database</a></li>
<li><a target="_top" href="mysql-select-database.html">MySQL Select Database</a></li>
<li><a target="_top" href="mysql-data-types.html">MySQL Data Types</a></li>
<li><a target="_top" href="mysql-create-tables.html">MySQL Create Tables</a></li>
<li><a target="_top" href="mysql-drop-tables.html">MySQL Drop Tables</a></li>
<li><a target="_top" href="mysql-insert-query.html">MySQL Insert Query</a></li>
<li><a target="_top" href="mysql-select-query.html">MySQL Select Query</a></li>
<li><a target="_top" href="mysql-where-clause.html">MySQL Where Clause</a></li>
<li><a target="_top" href="mysql-update-query.html">MySQL Update Query</a></li>
<li><a target="_top" href="mysql-delete-query.html">MySQL Delete Query</a></li>
<li><a target="_top" href="mysql-like-clause.html">MySQL Like Clause</a></li>
<li><a target="_top" href="mysql-sorting-results.html">MySQL Sorting Results</a></li>
<li><a target="_top" href="mysql-using-joins.html">MySQL Using Join</a></li>
<li><a target="_top" href="mysql-null-values.html">MySQL NULL Values</a></li>
<li><a target="_top" href="mysql-regexps.html">MySQL Regexps</a></li>
<li><a target="_top" href="mysql-transactions.html">MySQL Transactions</a></li>
<li><a target="_top" href="mysql-alter-command.html">MySQL Alter Command</a></li>
<li><a target="_top" href="mysql-indexes.html">MySQL Indexes</a></li>
<li><a target="_top" href="mysql-temporary-tables.html">MySQL Temporary Tables</a></li>
<li><a target="_top" href="mysql-clone-tables.html">MySQL Clone Tables</a></li>
<li><a target="_top" href="mysql-database-info.html">MySQL Database Info</a></li>
<li><a target="_top" href="mysql-using-sequences.html">MySQL Using Sequences</a></li>
<li><a target="_top" href="mysql-handling-duplicates.html"><b>MySQL Handling Duplicates</b></a></li>
<li><a target="_top" href="mysql-sql-injection.html">MySQL SQL Injection</a></li>
<li><a target="_top" href="mysql-database-export.html">MySQL Database Export</a></li>
<li><a target="_top" href="mysql-database-import.html">MySQL Database Import</a></li>
</ul>
<ul class="menu">
<li class="heading">MySQL Useful Resources</li>
<li><a target="_top" href="mysql-useful-functions.html">MySQL Useful Functions</a></li>
<li><a target="_top" href="mysql-useful-resources.html">MySQL Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>MySQL Handling Duplicates</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="mysql-using-sequences.html">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="mysql-sql-injection.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>Tables or result sets sometimes contain duplicate records. Sometime it is allowed but sometime it is required to stop duplicate records. Sometime it is required to identify duplicate records and remove them from the table. This chapter will describe how to prevent duplicate records occurring in a table and how to remove already existing duplicate records.</p>
<h2>Preventing Duplicates from Occurring in a Table:</h2>
<p>You can use a <b>PRIMARY KEY</b> or <b>UNIQUE</b> Index on a table with appropriate fields to stop duplicate records. Lets take one example, The following table contains no such index or primary key, so it would allow duplicate records for first_name and last_name</p>
<pre class="prettyprint">
CREATE TABLE person_tbl
(
    first_name CHAR(20),
    last_name CHAR(20),
    sex CHAR(10)
);
</pre>
<p>To prevent multiple records with the same first and last name values from being created in this table, add a PRIMARY KEY to its definition. When you do this, it's also necessary to declare the indexed columns to be NOT NULL, because a PRIMARY KEY does not allow NULL values:</p>
<pre class="prettyprint">
CREATE TABLE person_tbl
(
   first_name CHAR(20) NOT NULL,
   last_name CHAR(20) NOT NULL,
   sex CHAR(10)
   PRIMARY KEY (last_name, first_name)
);
</pre>
<p>The presence of a unique index in a table normally causes an error to occur if you insert a record into the table that duplicates an existing record in the column or columns that define the index.</p>
<p>Use <b>INSERT IGNORE</b> rather than <b>INSERT</b>. If a record doesn't duplicate an existing record, MySQL inserts it as usual. If the record is a duplicate, the IGNORE keyword tells MySQL to discard it silently without generating an error.</p>
<p>Following example does not error out and same time it will not insert duplicate records.</p>
<pre class="prettyprint">
mysql&gt; INSERT IGNORE INTO person_tbl (last_name, first_name)
    -&gt; VALUES( 'Jay', 'Thomas');
Query OK, 1 row affected (0.00 sec)
mysql&gt; INSERT IGNORE INTO person_tbl (last_name, first_name)
    -&gt; VALUES( 'Jay', 'Thomas');
Query OK, 0 rows affected (0.00 sec)
</pre>
<p>Use <b>REPLACE</b> rather than INSERT. If the record is new, it's inserted just as with INSERT. If it's a duplicate, the new record replaces the old one:</p>
<pre class="prettyprint">
mysql&gt; REPLACE INTO person_tbl (last_name, first_name)
    -&gt; VALUES( 'Ajay', 'Kumar');
Query OK, 1 row affected (0.00 sec)
mysql&gt; REPLACE INTO person_tbl (last_name, first_name)
    -&gt; VALUES( 'Ajay', 'Kumar');
Query OK, 2 rows affected (0.00 sec)
</pre>
<p>INSERT IGNORE and REPLACE should be chosen according to the duplicate-handling behavior you want to effect. INSERT IGNORE keeps the first of a set of duplicated records and discards the rest. REPLACE keeps the last of a set of duplicates and erase out any earlier ones.</p>
<p>Another way to enforce uniqueness is to add a UNIQUE index rather than a PRIMARY KEY to a table.</p>
<pre class="prettyprint">
CREATE TABLE person_tbl
(
   first_name CHAR(20) NOT NULL,
   last_name CHAR(20) NOT NULL,
   sex CHAR(10)
   UNIQUE (last_name, first_name)
);
</pre>
<h2>Counting and Identifying Duplicates:</h2>
<p>Following is the query to count duplicate records with first_name and last_name in a table.</p>
<pre class="prettyprint">
mysql&gt; SELECT COUNT(*) as repetitions, last_name, first_name
    -&gt; FROM person_tbl
    -&gt; GROUP BY last_name, first_name
    -&gt; HAVING repetitions &gt; 1;
</pre>
<p>This query will return a list of all the duplicate records in person_tbl table.  In general, to identify sets of values that are duplicated, do the following:</p>
<ul class="list">
<li><p>Determine which columns contain the values that may be duplicated.</p></li>
<li><p>List those columns in the column selection list, along with COUNT(*).</p></li>
<li><p>List the columns in the GROUP BY clause as well.</p></li>
<li><p>Add a HAVING clause that eliminates unique values by requiring group counts to be greater than one.</p></li>
</ul>
<h2>Eliminating Duplicates from a Query Result:</h2>
<p>You can use <b>DISTINCT</b> along with SELECT statement to find out unique records available in a table.</p>
<pre class="prettyprint">
mysql&gt; SELECT DISTINCT last_name, first_name
    -&gt; FROM person_tbl
    -&gt; ORDER BY last_name;
</pre>
<p>An alternative to DISTINCT is to add a GROUP BY clause that names the columns you're selecting. This has the effect of removing duplicates and selecting only the unique combinations of values in the specified columns:</p>
<pre class="prettyprint">
mysql&gt; SELECT last_name, first_name
    -&gt; FROM person_tbl
    -&gt; GROUP BY (last_name, first_name);
</pre>
<h2>Removing Duplicates Using Table Replacement:</h2>
<p>If you have duplicate records in a table and you want to remove all the duplicate records from that table then here is the procedure.</p>
<pre class="prettyprint">
mysql&gt; CREATE TABLE tmp SELECT last_name, first_name, sex
    -&gt;                  FROM person_tbl;
    -&gt;                  GROUP BY (last_name, first_name);
mysql&gt; DROP TABLE person_tbl;
mysql&gt; ALTER TABLE tmp RENAME TO person_tbl;
</pre>
<p>An easy way of removing duplicate records from a table is that add an INDEX  or PRIMAY KEY to that table. Even if this table is already available you can use this technique to remove duplicate records and you will be safe in future as well.</p>
<pre class="prettyprint">
mysql&gt; ALTER IGNORE TABLE person_tbl
    -&gt; ADD PRIMARY KEY (last_name, first_name);
</pre>
<hr />
<div class="pre-btn">
<a href="mysql-using-sequences.html">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/mysql-handling-duplicates.pdf" alt="MySQL Handling Duplicates" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="mysql-sql-injection.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.html" target="_top">ASP.NET </a> |
<a href="../jquery/index.html" target="_top">jQuery </a> |
<a href="../ajax/index.html" target="_top">AJAX </a> |
<a href="../ant/index.html" target="_top">ANT</a> |
<a href="../jsp/index.html" target="_top">JSP </a> |
<a href="../servlets/index.html" target="_top">Servlets </a> |
<a href="../log4j/index.html" target="_top">log4j </a> |
<a href="../ibatis/index.html" target="_top">iBATIS </a> |
<a href="../hibernate/index.html" target="_top">Hibernate </a> |
<a href="../jdbc/index.html" target="_top">JDBC </a> |
<a href="../struts_2/index.html" target="_top">Struts </a> |
<a href="../html5/index.html" target="_top">HTML5 </a> |
<a href="../sql/index.html" target="_top">SQL </a> |
<a href="index.html" target="_top">MySQL </a> |
<a href="../cplusplus/index.html" target="_top">C++ </a> |
<a href="../unix/index.html" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/mysql/mysql-handling-duplicates.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 17:29:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>