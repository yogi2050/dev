<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from www.tutorialspoint.com/unix_commands/restore.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:05:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>restore - Unix, Linux Command</title>
<meta name="Description" Content="restore - Unix, Linux Command Manual Pages (Manpages) ,  Learning fundamentals of UNIX and Linux in simple and easy steps : A beginner's tutorial containing complete knowledge of Unix Korn  and Bourne Shell and Programming, Utilities, File System, Directories, Memory Management, Special Variables, vi editor, Processes" />
<meta name="Keywords" content="Unix, Tutorials, Learning, Operating, System, OS, Beginners, Basics, System Calls, Korn, Bourne, Shell,Programming, Utilities, File System, Directories, Memory Management, Special Variables, vi editor, Processes" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base  />
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<a name="top"></a>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>Unix for Beginners</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/index.html">Unix - Home</a></li>
<li><a class="left" target="_top" href="../unix/unix-getting-started.html">Unix - Getting Started</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-management.html">Unix - File Management</a></li>
<li><a class="left" target="_top" href="../unix/unix-directories.html">Unix - Directories</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-permission.html">Unix - File Permission</a></li>
<li><a class="left" target="_top" href="../unix/unix-environment.html">Unix - Environment</a></li>
<li><a class="left" target="_top" href="../unix/unix-basic-utilities.html">Unix - Basic Utilities</a></li>
<li><a class="left" target="_top" href="../unix/unix-pipes-filters.html">Unix - Pipes &amp; Filters</a></li>
<li><a class="left" target="_top" href="../unix/unix-processes.html">Unix - Processes</a></li>
<li><a class="left" target="_top" href="../unix/unix-communication.html">Unix - Communication</a></li>
<li><a class="left" target="_top" href="../unix/unix-vi-editor.html">Unix - The vi Editor</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Shell Programming</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-shell.html">Unix - What is Shell?</a></li>
<li><a class="left" target="_top" href="../unix/unix-using-variables.html">Unix - Using Variables</a></li>
<li><a class="left" target="_top" href="../unix/unix-special-variables.html">Unix - Special Variables</a></li>
<li><a class="left" target="_top" href="../unix/unix-using-arrays.html">Unix - Using Arrays</a></li>
<li><a class="left" target="_top" href="../unix/unix-basic-operators.html">Unix - Basic Operators</a></li>
<li><a class="left" target="_top" href="../unix/unix-decision-making.html">Unix - Decision Making</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-loops.html">Unix - Shell Loops</a></li>
<li><a class="left" target="_top" href="../unix/unix-loop-control.html">Unix - Loop Control</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-substitutions.html">Unix - Shell Substitutions</a></li>
<li><a class="left" target="_top" href="../unix/unix-quoting-mechanisms.html">Unix - Quoting Mechanisms</a></li>
<li><a class="left" target="_top" href="../unix/unix-io-redirections.html">Unix - IO Redirections</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-functions.html">Unix - Shell Functions</a></li>
<li><a class="left" target="_top" href="../unix/unix-manpage-help.html">Unix - Manpage Help</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Advanced Unix</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-regular-expressions.html">Unix - Regular Expressions</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-system.html">Unix - File System Basics</a></li>
<li><a class="left" target="_top" href="../unix/unix-user-administration.html">Unix - User Administration</a></li>
<li><a class="left" target="_top" href="../unix/unix-system-performance.html">Unix - System Performance</a></li>
<li><a class="left" target="_top" href="../unix/unix-system-logging.html">Unix - System Logging</a></li>
<li><a class="left" target="_top" href="../unix/unix-signals-traps.html">Unix - Signals and Traps</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Useful References</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-useful-commands.html">Unix - Useful Commands</a></li>
<li><a class="left" target="_top" href="../unix/unix-quick-guide.html">Unix - Quick Guide</a></li>
<li><a class="left" target="_top" href="../unix/unix-builtin-functions.html">Unix - Builtin Functions</a></li>
<li><a class="left" target="_top" href="../unix_system_calls/index.html">Unix - System Calls</a></li>
<li><a class="left" target="_top" href="index.html"><b>Unix - Commands List</b></a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Useful Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-useful-resources.html">Unix Useful Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../forums/index.html">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle" cellpadding="5" cellspacing="0">
<tr>
<td>
<!-- PRINTING STARTS HERE -->
<h1>restore - Unix, Linux Command</h1>
<hr />
<a href="index.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="index.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>  
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
<hr />
<h1 class="manpages">NAME</h1>
restore - restore files or file systems from backups made with dump
<h1 class="manpages">SYNOPSIS</h1>
<b>restore -C</b> [<b>-cdHklMvVy</b>]
[<b>-b </b><i>blocksize</i>]
[<b>-D </b><i>filesystem</i>]
[<b>-f </b><i>file</i>]
[<b>-F </b><i>script</i>]
[<b>-L </b><i>limit</i>]
[<b>-s </b><i>fileno</i>]
[<b>-T </b><i>directory</i>]
<p>
<b>restore -i</b> [<b>-acdhHklmMNouvVy</b>]
[<b>-A </b><i>file</i>]
[<b>-b </b><i>blocksize</i>]
[<b>-f </b><i>file</i>]
[<b>-F </b><i>script</i>]
[<b>-Q </b><i>file</i>]
[<b>-s </b><i>fileno</i>]
[<b>-T </b><i>directory</i>]
<p>
<b>restore -P</b> <i>file</i> [<b>-acdhHklmMNuvVy</b>]
[<b>-b </b><i>blocksize</i>]
[<b>-f </b><i>file</i>]
[<b>-F </b><i>script</i>]
[<b>-s </b><i>fileno</i>]
[<b>-T </b><i>directory</i>]
[<b>-X </b><i>filelist</i>]
[ <i>file ... </i>]
<p>
<b>restore -R</b> [<b>-cdHklMNuvVy</b>]
[<b>-b </b><i>blocksize</i>]
[<b>-f </b><i>file</i>]
[<b>-F </b><i>script</i>]
[<b>-s </b><i>fileno</i>]
[<b>-T </b><i>directory</i>]
<p>
<b>restore -r</b> [<b>-cdHklMNuvVy</b>]
[<b>-b </b><i>blocksize</i>]
[<b>-f </b><i>file</i>]
[<b>-F </b><i>script</i>]
[<b>-s </b><i>fileno</i>]
[<b>-T </b><i>directory</i>]
<p>
<b>restore -t</b> [<b>-cdhHklMNuvVy</b>]
[<b>-A </b><i>file</i>]
[<b>-b </b><i>blocksize</i>]
[<b>-f </b><i>file</i>]
[<b>-F </b><i>script</i>]
[<b>-Q </b><i>file</i>]
[<b>-s </b><i>fileno</i>]
[<b>-T </b><i>directory</i>]
[<b>-X </b><i>filelist</i>]
[ <i>file ... </i>]
<p>
<b>restore -x</b> [<b>-adchHklmMNouvVy</b>]
[<b>-A </b><i>file</i>]
[<b>-b </b><i>blocksize</i>]
[<b>-f </b><i>file</i>]
[<b>-F </b><i>script</i>]
[<b>-Q </b><i>file</i>]
[<b>-s </b><i>fileno</i>]
[<b>-T </b><i>directory</i>]
[<b>-X </b><i>filelist</i>]
[ <i>file ... </i>]
<h1 class="manpages">DESCRIPTION</h1>
The
<b>restore</b> command performs the inverse function of
<b>dump</b>(8).
A full backup of a file system may be restored and subsequent incremental
backups layered on top of it. Single files and directory subtrees may be
restored from full or partial backups.
<b>Restore</b> works across a network; to do this see the
<b>-f</b> flag described below. Other arguments to the command are file or directory
names specifying the files that are to be restored. Unless the
<b>-h</b> flag is specified (see below), the appearance of a directory name refers to
the files and (recursively) subdirectories of that directory.
<p>
Exactly one of the following flags is required:
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td>
<b>-C</b> </td><td valign="bottom">
This mode allows comparison of files from a dump.
<b>Restore</b> reads the backup and compares its contents with files present on the disk. It
first changes its working directory to the root of the filesystem that was
dumped and compares the tape with the files in its new current directory. See
also the
<b>-L</b> flag described below.
</td></tr>
<tr valign="top"><td>
<b>-i</b> </td><td valign="bottom">
This mode allows interactive restoration of files from a dump. After reading in
the directory information from the dump,
<b>restore</b> provides a shell like interface that allows the user to move around the
directory tree selecting files to be extracted. The available commands are
given below; for those commands that require an argument, the default is the
current directory.
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td colspan="2">
<b>add </b>[<i>arg</i>] </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
The current directory or specified argument is added to the list of files to be
extracted.  If a directory is specified, then it and all its descendents are
added to the extraction list (unless the
<b>-h</b> flag is specified on the command line). Files that are on the extraction list
are prepended with a &#147;*&#148; when they are listed by
<b>ls</b>. </td></tr>
<tr valign="top"><td colspan="2">
<b>cd</b><i> arg</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
Change the current working directory to the specified argument.
</td></tr>
<tr valign="top"><td colspan="2">
<b>delete </b>[<i>arg</i>] </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
The current directory or specified argument is deleted from the list of files
to be extracted. If a directory is specified, then it and all its descendents
are deleted from the extraction list (unless the
<b>-h</b> flag is specified on the command line). The most expedient way to extract most
of the files from a directory is to add the directory to the extraction list
and then delete those files that are not needed.
</td></tr>
<tr valign="top"><td colspan="2">
<b>extract</b> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
All files on the extraction list are extracted from the dump.
<b>Restore</b> will ask which volume the user wishes to mount. The fastest way to extract a f
ew files is to start with the last volume and work towards the first volume.
</td></tr>
<tr valign="top"><td>
<b>help</b> </td><td valign="bottom">
List a summary of the available commands.
</td></tr>
<tr valign="top"><td colspan="2">
<b>ls </b>[<i>arg</i>] </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
List the current or specified directory. Entries that are directories are
appended with a &#147;/&#148;. Entries that have been marked for extraction are
prepended with a &#147;*&#148;. If the verbose flag is set, the inode number of
each entry is also listed.
</td></tr>
<tr valign="top"><td>
<b>pwd</b> </td><td valign="bottom">
Print the full pathname of the current working directory.
</td></tr>
<tr valign="top"><td>
<b>quit</b> </td><td valign="bottom">
<b>Restore</b> immediately exits, even if the extraction list is not empty.
</td></tr>
<tr valign="top"><td colspan="2">
<b>setmodes</b> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
All directories that have been added to the extraction list have their owner,
modes, and times set; nothing is extracted from the dump. This is useful for
cleaning up after a
<b>restore</b> has been prematurely aborted.
</td></tr>
<tr valign="top"><td colspan="2">
<b>verbose</b> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
The sense of the
<b>-v</b> flag is toggled. When set, the verbose flag causes the
<b>ls</b> command to list the inode numbers of all entries. It also causes
<b>restore</b> to print out information about each file as it is extracted.
</td></tr>
</table>
</td></tr>
<tr valign="top"><td>
<b>-P</b><i> file</i> </td><td valign="bottom">
<b>Restore</b> creates a new Quick File Access file
<i>file</i> from an existing dump file without restoring its contents.
</td></tr>
<tr valign="top"><td>
<b>-R</b> </td><td valign="bottom">
<b>Restore</b> requests a particular tape of a multi-volume set on which to restart a full
restore (see the
<b>-r</b> flag below). This is useful if the restore has been interrupted.
</td></tr>
<tr valign="top"><td>
<b>-r</b> </td><td valign="bottom">
Restore (rebuild) a file system. The target file system should be made pristine
with
<b>mke2fs</b>(8),
mounted, and the user
<b>cd</b>&#146;d into the pristine file system before starting the restoration of the initial
level 0 backup. If the level 0 restores successfully, the
<b>-r</b> flag may be used to restore any necessary incremental backups on top of the
level 0. The
<b>-r</b> flag precludes an interactive file extraction and can be detrimental to one&#146;s
health (not to mention the disk) if not used carefully. An example:
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr><td width=8%>&nbsp;</td><td>
<b>mke2fs /dev/sda1</b> <table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td colspan="2">
<b>mount /dev/sda1 /mnt</b> <!-- Consumed .TP -->
<br />
<b>cd /mnt</b> <!-- Consumed .TP -->
<br />
<b>restore rf /dev/st0</b> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
</td></tr>
</table>
</td></tr>
</table>
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
Note that
<b>restore</b> leaves a file
<i>restoresymtable</i> in the root directory to pass information between incremental restore passes.
This file should be removed when the last incremental has been restored.
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
<b>Restore</b>, in conjunction with
<b>mke2fs</b>(8)
and
<b>dump</b>(8),
may be used to modify file system parameters such as size or block size.
</td></tr>
<tr valign="top"><td>
<b>-t</b> </td><td valign="bottom">
The names of the specified files are listed if they occur on the backup. If no
file argument is given, the root directory is listed, which results in the
entire content of the backup being listed, unless the
<b>-h</b> flag has been specified.  Note that the
<b>-t</b> flag replaces the function of the old
<b>dumpdir</b>(8)
program.  See also the
<b>-X</b> option below.
</td></tr>
<tr valign="top"><td>
<b>-x</b> </td><td valign="bottom">
The named files are read from the given media. If a named file matches a
directory whose contents are on the backup and the
<b>-h</b> flag is not specified, the directory is recursively extracted. The owner,
modification time, and mode are restored (if possible). If no file argument is
given, the root directory is extracted, which results in the entire content of
the backup being extracted, unless the
<b>-h</b> flag has been specified.  See also the
<b>-X</b> option below.
</td></tr>
</table>
<h1 class="manpages">OPTIONS</h1>
The following additional options may be specified:
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td>
<b>-a</b> </td><td valign="bottom">
In
<b>-i</b> or
<b>-x</b> mode,
<b>restore</b> does ask the user for the volume number on which the files to be extracted are
supposed to be (in order to minimise the time by reading only the interesting
volumes). The
<b>-a</b> option disables this behaviour and reads all the volumes starting with 1. This
option is useful when the operator does not know on which volume the files to
be extracted are and/or when he prefers the longer unattended mode rather than
the shorter interactive mode.
</td></tr>
<tr valign="top"><td colspan="2">
<b>-A</b><i> archive_file</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
Read the table of contents from
<i>archive_file</i> instead of the media. This option can be used in combination with the
<b>-t</b>, <b>-i</b>, or
<b>-x</b> options, making it possible to check whether files are on the media without
having to mount the media.
</td></tr>
<tr valign="top"><td colspan="2">
<b>-b</b><i> blocksize</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
The number of kilobytes per dump record. If the
<b>-b</b> option is not specified,
<b>restore</b> tries to determine the media block size dynamically.
</td></tr>
<tr valign="top"><td>
<b>-c</b> </td><td valign="bottom">
Normally,
<b>restore</b> will try to determine dynamically whether the dump was made from an old
(pre-4.4) or new format file system. The
<b>-c</b> flag disables this check, and only allows reading a dump in the old format.
</td></tr>
<tr valign="top"><td>
<b>-d</b> </td><td valign="bottom">
The
<b>-d</b> (debug) flag causes
<b>restore</b> to print debug information.
</td></tr>
<tr valign="top"><td colspan="2">
<b>-D</b><i> filesystem</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
The
<b>-D</b> flag allows the user to specify the filesystem name when using
<b>restore</b> with the
<b>-C</b> option to check the backup.
</td></tr>
<tr valign="top"><td>
<b>-f</b><i> file</i> </td><td valign="bottom">
Read the backup from
<i>file</i>; <i>file</i> may be a special device file like
<i>/dev/st0</i> (a tape drive),
<i>/dev/sda1</i> (a disk drive), an ordinary file, or
<i>-</i> (the standard input). If the name of the file is of the form
<i>host:file</i> or
<i>user@host:file</i>, <b>restore</b> reads from the named file on the remote host using
<b>rmt</b>(8).
</td></tr>
<tr valign="top"><td colspan="2">
<b>-F</b><i> script</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
Run script at the beginning of each tape. The device name and the current
volume number are passed on the command line. The script must return 0 if
<b>restore</b> should continue without asking the user to change the tape, 1 if
<b>restore</b> should continue but ask the user to change the tape. Any other exit code will
cause
<b>restore</b> to abort. For security reasons,
<b>restore</b> reverts back to the real user ID and the real group ID before running the
script.
</td></tr>
<tr valign="top"><td>
<b>-h</b> </td><td valign="bottom">
Extract the actual directory, rather than the files that it references. This
prevents hierarchical restoration of complete subtrees from the dump.
</td></tr>
<tr valign="top"><td colspan="2">
<b>-H</b><i> hash_size</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
Use a hashtable having the specified number of entries for storing the
directories entries instead of a linked list. This hashtable will
considerably speed up inode lookups (visible especially in interactive
mode when adding/removing files from the restore list), but at the
price of much more memory usage. The default value is 1, meaning no
hashtable is used.
</td></tr>
<tr valign="top"><td>
<b>-k</b> </td><td valign="bottom">
Use Kerberos authentication when contacting the remote tape server. (Only
available if this options was enabled when
<b>restore</b> was compiled.)
</td></tr>
<tr valign="top"><td>
<b>-l</b> </td><td valign="bottom">
When doing remote restores, assume the remote file is a regular file (instead
of a tape device). If you&#146;re restoring a remote compressed file, you will need
to specify this option or
<b>restore</b> will fail to access it correctly.
</td></tr>
<tr valign="top"><td colspan="2">
<b>-L</b><i> limit</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
The
<b>-L</b> flag allows the user to specify a maximal number of miscompares when using
<b>restore</b> with the
<b>-C</b> option to check the backup. If this limit is reached,
<b>restore</b> will abort with an error message. A value of 0 (the default value) disables
the check.
</td></tr>
<tr valign="top"><td>
<b>-m</b> </td><td valign="bottom">
Extract by inode numbers rather than by file name. This is useful if only a few
files are being extracted, and one wants to avoid regenerating the complete
pathname to the file.
</td></tr>
<tr valign="top"><td>
<b>-M</b> </td><td valign="bottom">
Enables the multi-volume feature (for reading dumps made using the
<b>-M</b> option of dump). The name specified with
<b>-f</b> is treated as a prefix and
<b>restore</b> tries to read in sequence from
<i>&lt;prefix&gt;001, &lt;prefix&gt;002</i> etc.
</td></tr>
<tr valign="top"><td>
<b>-N</b> </td><td valign="bottom">
The
<b>-N</b> flag causes
<b>restore</b> to perform a full execution as requested by one of
<b>-i</b>, <b>-R</b>, <b>-r</b>, <b>t</b> or
<b>x</b> command without actually writing any file on disk.
</td></tr>
<tr valign="top"><td>
<b>-o</b> </td><td valign="bottom">
The
<b>-o</b> flag causes
<b>restore</b> to automatically restore the current directory permissions without asking the
operator whether to do so in one of
<b>-i</b> or
<b>-x</b> modes.
</td></tr>
<tr valign="top"><td>
<b>-Q</b><i> file</i> </td><td valign="bottom">
Use the file
<i>file</i> in order to read tape position as stored using the dump Quick File Access mode,
in one of
<b>-i</b>, <b>-x</b> or
<b>-t</b> mode.
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
It is recommended to set up the st driver to return logical tape positions
rather than physical before calling
<b>dump/restore</b> with parameter
<b>-Q</b>. Since not all tape devices support physical tape positions those tape devices
return an error during
<b>dump/restore</b> when the st driver is set to the default physical setting. Please see the
<b>st</b>(4)
man page, option
<b>MTSETDRVBUFFER</b> , or the
<b>mt</b>(1) 
man page, on how to set the driver to return logical tape positions.
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
Before calling
<b>restore</b> with parameter
<b>-Q</b>, always make sure the st driver is set to return the same type of tape position
used during the call to
<b>dump</b>. Otherwise
<b>restore</b> may be confused.
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
This option can be used when restoring from local or remote tapes (see above)
or from local or remote files.
</td></tr>
<tr valign="top"><td colspan="2">
<b>-s</b><i> fileno</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
Read from the specified
<i>fileno</i> on a multi-file tape. File numbering starts at 1.
</td></tr>
<tr valign="top"><td colspan="2">
<b>-T</b><i> directory</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
The
<b>-T</b> flag allows the user to specify a directory to use for the storage of temporary
files. The default value is
<i>/tmp</i>. This flag is most useful when restoring files after having booted from a
floppy. There might be little or no space on the floppy filesystem, but another
source of space might exist.
</td></tr>
<tr valign="top"><td>
<b>-u</b> </td><td valign="bottom">
When creating certain types of files,
<b>restore</b> may generate a warning diagnostic if they already exist in the target
directory. To prevent this, the
<b>-u</b> (unlink) flag causes
<b>restore</b> to remove old entries before attempting to create new ones.
</td></tr>
<tr valign="top"><td>
<b>-v</b> </td><td valign="bottom">
Normally
<b>restore</b> does its work silently. The
<b>-v</b> (verbose) flag causes it to type the name of each file it treats preceded by
its file type.
</td></tr>
<tr valign="top"><td>
<b>-V</b> </td><td valign="bottom">
Enables reading multi-volume non-tape mediums like CDROMs.
</td></tr>
<tr valign="top"><td colspan="2">
<b>-X</b><i> filelist</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
Read list of files to be listed or extracted from the text file
<i>filelist</i> in addition to those specified on the command line. This can be used in
conjunction with the
<b>-t</b> or
<b>-x</b> commands. The file
<i>filelist</i> should contain file names separated by newlines.
<i>filelist</i> may be an ordinary file or
<i>-</i> (the standard input).
</td></tr>
<tr valign="top"><td>
<b>-y</b> </td><td valign="bottom">
Do not ask the user whether to abort the restore in the event of an error.
Always try to skip over the bad block(s) and continue.
</td></tr>
<!-- PP ends table -->
</table>
(The 4.3BSD option syntax is implemented for backward compatibility but is not
documented here.)
<h1 class="manpages">DIAGNOSTICS</h1>
Complains if it gets a read error. If
<b>y</b> has been specified, or the user responds
<b>y</b>, <b>restore</b> will attempt to continue the restore.
<p>
If a backup was made using more than one tape volume,
<b>restore</b> will notify the user when it is time to mount the next volume. If the
<b>-x</b> or
<b>-i</b> flag has been specified,
<b>restore</b> will also ask which volume the user wishes to mount. The fastest way to extract
a few files is to start with the last volume, and work towards the first volume.
<p>
There are numerous consistency checks that can be listed by
<b>restore</b>. Most checks are self-explanatory or can &#147;never happen&#148;. Common errors
are given below:
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td colspan="2">
<i>Converting to new file system format</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
A dump tape created from the old file system has been loaded. It is
automatically converted to the new file system format.
</td></tr>
<tr valign="top"><td colspan="2">
<i>&lt;filename&gt;: not found on tape</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
The specified file name was listed in the tape directory, but was not found on
the tape. This is caused by tape read errors while looking for the file, and
from using a dump tape created on an active file system.
</td></tr>
<tr valign="top"><td colspan="2">
<i>expected next file &lt;inumber&gt;, got &lt;inumber&gt;</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
A file that was not listed in the directory showed up. This can occur when
using a dump created on an active file system.
</td></tr>
<tr valign="top"><td colspan="2">
<i>Incremental dump too low</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
When doing an incremental restore, a dump that was written before the previous
incremental dump, or that has too low an incremental level has been loaded.
</td></tr>
<tr valign="top"><td colspan="2">
<i>Incremental dump too high</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
When doing an incremental restore, a dump that does not begin its coverage
where the previous incremental dump left off, or that has too high an
incremental level has been loaded.
</td></tr>
<tr valign="top"><td colspan="2">
<i>Tape read error while restoring &lt;filename&gt;</i> <!-- Consumed .TP -->
<br />
<i>Tape read error while skipping over inode &lt;inumber&gt;</i> <!-- Consumed .TP -->
<br />
<i>Tape read error while trying to resynchronize</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
A tape (or other media) read error has occurred. If a file name is specified,
its contents are probably partially wrong. If an inode is being skipped or the
tape is trying to resynchronize, no extracted files have been corrupted, though
files may not be found on the tape.
</td></tr>
<tr valign="top"><td colspan="2">
<i>resync restore, skipped &lt;num&gt; blocks</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
After a dump read error,
<b>restore</b> may have to resynchronize itself. This message lists the number of blocks that
were skipped over.
</td></tr>
</table>
<h1 class="manpages">EXIT STATUS</h1>
<b>Restore</b> exits with zero status on success. Tape errors are indicated with an exit code
of 1.
<p>
When doing a comparison of files from a dump, an exit code of 2 indicates that
some files were modified or deleted since the dump was made.
<h1 class="manpages">ENVIRONMENT</h1>
If the following environment variable exists it will be utilized by
<b>restore</b>: <table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td>
<b>TAPE</b> </td><td valign="bottom">
If no
<b>-f</b> option was specified,
<b>restore</b> will use the device specified via
<b>TAPE</b> as the dump device.
<b>TAPE</b> may be of the form
<i>tapename</i>, <i>host:tapename</i> or
<i>user@host:tapename</i>. </td></tr>
<tr valign="top"><td>
<b>TMPDIR</b> </td><td valign="bottom">
The directory given in
<b>TMPDIR</b> will be used instead of
<i>/tmp</i> to store temporary files.
</td></tr>
<tr valign="top"><td>
<b>RMT</b> </td><td valign="bottom">
The environment variable
<b>RMT</b> will be used to determine the pathname of the remote
<b>rmt</b>(8)
program.
</td></tr>
<tr valign="top"><td>
<b>RSH</b> </td><td valign="bottom">
<b>Restore</b> uses the contents of this variable to determine the name of the remote shell
command to use when doing a network restore (rsh, ssh etc.). If this variable
is not set,
<b>rcmd</b>(3)
will be used, but only root will be able to do a network restore.
</td></tr>
</table>
<h1 class="manpages">FILES</h1>
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td colspan="2">
<i>/dev/st0</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
the default tape drive
</td></tr>
<tr valign="top"><td colspan="2">
<i>/tmp/rstdir*</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
file containing directories on the tape
</td></tr>
<tr valign="top"><td colspan="2">
<i>/tmp/rstmode*</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
owner, mode, and time stamps for directories
</td></tr>
<tr valign="top"><td colspan="2">
<i>./restoresymtable</i> </td></tr><tr valign="top"><td width=6%>&nbsp;</td><td>
information passed between incremental restores
</td></tr>
</table>
<h1 class="manpages">SEE ALSO</h1>
<ul>
<li><p><a href="dump.htm">dump (8)</a></p></li>
<li><p><a href="mount.htm">mount (8)</a></p></li>
<li><p><a href="mke2fs.htm">mke2fs (8)</a></p></li>
<li><p><a href="rmt.htm">rmt (8)</a></p></li>
</ul>
<b>Restore</b> can get confused when doing incremental restores from dumps that were made on
active file systems.
<p>
A level 0 dump must be done after a full restore. Because
<b>restore</b> runs in user code, it has no control over inode allocation; thus a full dump
must be done to get a new set of directories reflecting the new inode
numbering, even though the content of the files is unchanged.
<p>
The temporary files
<i>/tmp/rstdir*</i> and
<i>/tmp/rstmode*</i> are generated with a unique name based on the date of the dump and the process
ID (see
<b>mktemp</b>(3)
), 
except when
<b>-r</b> or
<b>-R</b> is used. Because
<b>-R</b> allows you to restart a
<b>-r</b> operation that may have been interrupted, the temporary files should be the
same across different processes. In all other cases, the files are unique
because it is possible to have two different dumps started at the same time,
and separate operations shouldn&#146;t conflict with each other.
<p>
To do a network restore, you have to run
<b>restore</b> as root or use a remote shell replacement (see
<b>RSH</b> variable).  This is due to the previous security history of
<b>dump</b> and
<b>restore</b>. (
<b>restore</b> is written to be setuid root, but we are not certain all bugs are gone from the
code - run setuid at your own risk.)
<p>
At the end of restores in
<b>-i</b> or
<b>-x</b> modes (unless
<b>-o</b> option is in use),
<b>restore</b> will ask the operator whether to set the permissions on the current
directory. If the operator confirms this action, the permissions
on the directory from where
<b>restore</b> was launched will be replaced by the permissions on the dumped root
inode. Although this behaviour is not really a bug, it has proven itself
to be confusing for many users, so it is recommended to answer &#146;no&#146;,
unless you&#146;re performing a full restore and you do want to restore the
permissions on &#146;/&#146;.
<p>
It should be underlined that because it runs in user code,
<b>restore</b> , when run with the
<b>-C</b> option, sees the files as the kernel presents them, whereas
<b>dump</b> sees all the files on a given filesystem. In particular, this
can cause some confusion when comparing a dumped filesystem a part
of which is hidden by a filesystem mounted on top of it.
<h1 class="manpages">AUTHOR</h1>
The
<b>dump/restore</b> backup suite was ported to Linux&#146;s Second Extended File System by Remy Card
&lt;<a href="mailto:card@Linux.EU.Org">card@Linux.EU.Org</a>&gt;. He maintained the initial versions of
<b>dump</b> (up and including 0.4b4, released in January 1997).
<p>
Starting with 0.4b5, the new maintainer is Stelian Pop &lt;<a href="mailto:stelian@popies.net">stelian@popies.net</a>&gt;.
<h1 class="manpages">AVAILABILITY</h1>
The
<b>dump/restore</b> backup suite is available from &lt;<a href="http://dump.sourceforge.net/">http://dump.sourceforge.net</a>&gt;
<h1 class="manpages">HISTORY</h1>
The
<b>restore</b> command appeared in 4.2BSD.
<br />
<hr />
<a href="index.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="index.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversione740.html?tutorial=unix_commands&amp;file=restore.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/unix_commands/restore.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:05:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
