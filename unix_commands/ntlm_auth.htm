<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from www.tutorialspoint.com/unix_commands/ntlm_auth.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:05:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>ntlm_auth - Unix, Linux Command</title>
<meta name="Description" Content="ntlm_auth - Unix, Linux Command Manual Pages (Manpages) ,  Learning fundamentals of UNIX and Linux in simple and easy steps : A beginner's tutorial containing complete knowledge of Unix Korn  and Bourne Shell and Programming, Utilities, File System, Directories, Memory Management, Special Variables, vi editor, Processes" />
<meta name="Keywords" content="Unix, Tutorials, Learning, Operating, System, OS, Beginners, Basics, System Calls, Korn, Bourne, Shell,Programming, Utilities, File System, Directories, Memory Management, Special Variables, vi editor, Processes" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base  />
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<a name="top"></a>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>Unix for Beginners</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/index.html">Unix - Home</a></li>
<li><a class="left" target="_top" href="../unix/unix-getting-started.html">Unix - Getting Started</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-management.html">Unix - File Management</a></li>
<li><a class="left" target="_top" href="../unix/unix-directories.html">Unix - Directories</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-permission.html">Unix - File Permission</a></li>
<li><a class="left" target="_top" href="../unix/unix-environment.html">Unix - Environment</a></li>
<li><a class="left" target="_top" href="../unix/unix-basic-utilities.html">Unix - Basic Utilities</a></li>
<li><a class="left" target="_top" href="../unix/unix-pipes-filters.html">Unix - Pipes &amp; Filters</a></li>
<li><a class="left" target="_top" href="../unix/unix-processes.html">Unix - Processes</a></li>
<li><a class="left" target="_top" href="../unix/unix-communication.html">Unix - Communication</a></li>
<li><a class="left" target="_top" href="../unix/unix-vi-editor.html">Unix - The vi Editor</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Shell Programming</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-shell.html">Unix - What is Shell?</a></li>
<li><a class="left" target="_top" href="../unix/unix-using-variables.html">Unix - Using Variables</a></li>
<li><a class="left" target="_top" href="../unix/unix-special-variables.html">Unix - Special Variables</a></li>
<li><a class="left" target="_top" href="../unix/unix-using-arrays.html">Unix - Using Arrays</a></li>
<li><a class="left" target="_top" href="../unix/unix-basic-operators.html">Unix - Basic Operators</a></li>
<li><a class="left" target="_top" href="../unix/unix-decision-making.html">Unix - Decision Making</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-loops.html">Unix - Shell Loops</a></li>
<li><a class="left" target="_top" href="../unix/unix-loop-control.html">Unix - Loop Control</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-substitutions.html">Unix - Shell Substitutions</a></li>
<li><a class="left" target="_top" href="../unix/unix-quoting-mechanisms.html">Unix - Quoting Mechanisms</a></li>
<li><a class="left" target="_top" href="../unix/unix-io-redirections.html">Unix - IO Redirections</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-functions.html">Unix - Shell Functions</a></li>
<li><a class="left" target="_top" href="../unix/unix-manpage-help.html">Unix - Manpage Help</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Advanced Unix</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-regular-expressions.html">Unix - Regular Expressions</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-system.html">Unix - File System Basics</a></li>
<li><a class="left" target="_top" href="../unix/unix-user-administration.html">Unix - User Administration</a></li>
<li><a class="left" target="_top" href="../unix/unix-system-performance.html">Unix - System Performance</a></li>
<li><a class="left" target="_top" href="../unix/unix-system-logging.html">Unix - System Logging</a></li>
<li><a class="left" target="_top" href="../unix/unix-signals-traps.html">Unix - Signals and Traps</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Useful References</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-useful-commands.html">Unix - Useful Commands</a></li>
<li><a class="left" target="_top" href="../unix/unix-quick-guide.html">Unix - Quick Guide</a></li>
<li><a class="left" target="_top" href="../unix/unix-builtin-functions.html">Unix - Builtin Functions</a></li>
<li><a class="left" target="_top" href="../unix_system_calls/index.html">Unix - System Calls</a></li>
<li><a class="left" target="_top" href="index.html"><b>Unix - Commands List</b></a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Useful Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-useful-resources.html">Unix Useful Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../forums/index.html">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle" cellpadding="5" cellspacing="0">
<tr>
<td>
<!-- PRINTING STARTS HERE -->
<h1>ntlm_auth - Unix, Linux Command</h1>
<hr />
<a href="index.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="index.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>  
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
<hr />
<!-- ignored unsupported tag .nh -->
<!-- ignored unsupported tag .ad -->
<h1 class="manpages">NAME</h1>
ntlm_auth - tool to allow external access to Winbind&#146;s NTLM authentication function
<h1 class="manpages">SYNOPSIS</h1>
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td colspan="2">
ntlm_auth [-d debuglevel] [-l logdir] [-s &lt;smb config file&gt;]
</td></tr>
</table>
<h1 class="manpages">DESCRIPTION</h1>
<p>
This tool is part of the
<b>samba</b>(7)
suite&#46;
<p>
ntlm_auth
is a helper utility that authenticates users using NT/LM authentication&#46; It returns 0 if the users is authenticated successfully and 1 if access was denied&#46; ntlm_auth uses winbind to access the user and authentication data for a domain&#46; This utility is only indended to be used by other programs (currently
Squid
and
mod_ntlm_winbind)
<h1 class="manpages">OPERATIONAL REQUIREMENTS</h1>
<p>
The
<b>winbindd</b>(8)
daemon must be operational for many of these commands to function&#46;
<p>
Some of these commands also require access to the directory
<i>winbindd_privileged</i>
in
<i>$LOCKDIR</i>&#46; This should be done either by running this command as root or providing group access to the
<i>winbindd_privileged</i>
directory&#46; For security reasons, this directory should not be world-accessable&#46;
<h1 class="manpages">OPTIONS</h1>
<p>
--helper-protocol=PROTO
Operate as a stdio-based helper&#46; Valid helper protocols are:
<p>
squid-2&#46;4-basic
Server-side helper for use with Squid 2&#46;4&#39;s basic (plaintext) authentication&#46;
<p>
squid-2&#46;5-basic
Server-side helper for use with Squid 2&#46;5&#39;s basic (plaintext) authentication&#46;
<p>
squid-2&#46;5-ntlmssp
Server-side helper for use with Squid 2&#46;5&#39;s NTLMSSP authentication&#46;
<p>
Requires access to the directory
<i>winbindd_privileged</i>
in
<i>$LOCKDIR</i>&#46; The protocol used is described here:
<a href="http://devel/">http://devel</a>&#46;squid-cache&#46;org/ntlm/squid_helper_protocol&#46;html&#46; This protocol has been extended to allow the NTLMSSP Negotiate packet to be included as an argument to the
YR
command&#46; (Thus avoiding loss of information in the protocol exchange)&#46;
<p>
ntlmssp-client-1
Client-side helper for use with arbitrary external programs that may wish to use Samba&#39;s NTLMSSP authentication knowledge&#46;
<p>
This helper is a client, and as such may be run by any user&#46; The protocol used is effectively the reverse of the previous protocol&#46; A
YR
command (without any arguments) starts the authentication exchange&#46;
<p>
gss-spnego
Server-side helper that implements GSS-SPNEGO&#46; This uses a protocol that is almost the same as
squid-2&#46;5-ntlmssp, but has some subtle differences that are undocumented outside the source at this stage&#46;
<p>
Requires access to the directory
<i>winbindd_privileged</i>
in
<i>$LOCKDIR</i>&#46;
<p>
gss-spnego-client
Client-side helper that implements GSS-SPNEGO&#46; This also uses a protocol similar to the above helpers, but is currently undocumented&#46;
<p>
ntlm-server-1
Server-side helper protocol, intended for use by a RADIUS server or the &#39;winbind&#39; plugin for pppd, for the provision of MSCHAP and MSCHAPv2 authentication&#46;
<p>
This protocol consists of lines in the form:
Parameter: value
and
Parameter:: Base64-encode value&#46; The presence of a single period
&#46;
indicates that one side has finished supplying data to the other&#46; (Which in turn could cause the helper to authenticate the user)&#46;
<p>
Curently implemented parameters from the external program to the helper are:
<p>
Username
The username, expected to be in Samba&#39;s
<i>unix charset</i>&#46;
<p>
<p>
<p>
Username
The user&#39;s domain, expected to be in Samba&#39;s
<i>unix charset</i>&#46;
<p>
<p>
<p>
Full-Username
The fully qualified username, expected to be in Samba&#39;s
<i>unix charset</i>
and qualified with the
<i>winbind separator</i>&#46;
<p>
<p>
<p>
LANMAN-Challenge
The 8 byte
LANMAN Challenge
value, generated randomly by the server, or (in cases such as MSCHAPv2) generated in some way by both the server and the client&#46;
<p>
<p>
LANMAN-Response
The 24 byte
LANMAN Response
value, calculated from the user&#39;s password and the supplied
LANMAN Challenge&#46; Typically, this is provided over the network by a client wishing to authenticate&#46;
<p>
<p>
NT-Response
The &gt;= 24 byte
NT Response
calculated from the user&#39;s password and the supplied
LANMAN Challenge&#46; Typically, this is provided over the network by a client wishing to authenticate&#46;
<p>
<p>
Password
The user&#39;s password&#46; This would be provided by a network client, if the helper is being used in a legacy situation that exposes plaintext passwords in this way&#46;
<p>
<p>
<p>
Request-User-Session-Key
Apon sucessful authenticaiton, return the user session key associated with the login&#46;
<p>
<p>
Request-LanMan-Session-Key
Apon sucessful authenticaiton, return the LANMAN session key associated with the login&#46;
<p>
<p>
<!-- ignored unsupported tag .it -->
Warning
Implementors should take care to base64 encode
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;any data (such as usernames/passwords) that may contain malicous user data, such as
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a newline&#46;  They may also need to decode strings from
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the helper, which likewise may have been base64 encoded&#46;
<p>
--username=USERNAME
Specify username of user to authenticate
<p>
--domain=DOMAIN
Specify domain of user to authenticate
<p>
--workstation=WORKSTATION
Specify the workstation the user authenticated from
<p>
--challenge=STRING
NTLM challenge (in HEXADECIMAL)
<p>
--lm-response=RESPONSE
LM Response to the challenge (in HEXADECIMAL)
<p>
--nt-response=RESPONSE
NT or NTLMv2 Response to the challenge (in HEXADECIMAL)
<p>
--password=PASSWORD
User&#39;s plaintext password
<p>
If not specified on the command line, this is prompted for when required&#46;
<p>
For the NTLMSSP based server roles, this parameter specifies the expected password, allowing testing without winbindd operational&#46;
<p>
--request-lm-key
Retreive LM session key
<p>
--request-nt-key
Request NT key
<p>
--diagnostics
Perform Diagnostics on the authentication chain&#46; Uses the password from
--password
or prompts for one&#46;
<p>
--require-membership-of={SID|Name}
Require that a user be a member of specified group (either name or SID) for authentication to succeed&#46;
<p>
-d|--debuglevel=level
<i>level</i>
is an integer from 0 to 10&#46; The default value if this parameter is not specified is 0&#46;
<p>
The higher this value, the more detail will be logged to the log files about the activities of the server&#46; At level 0, only critical errors and serious warnings will be logged&#46; Level 1 is a reasonable level for day-to-day running - it generates a small amount of information about operations carried out&#46;
<p>
Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem&#46; Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic&#46;
<p>
Note that specifying this parameter here will override the
<i>log level</i>
parameter in the
<i>smb&#46;conf</i>
file&#46;
<p>
-V
Prints the program version number&#46;
<p>
-s &lt;configuration file&gt;
The file specified contains the configuration details required by the server&#46; The information in this file includes server-specific information such as what printcap file to use, as well as descriptions of all the services that the server is to provide&#46; See
<i>smb&#46;conf</i>
for more information&#46; The default configuration file name is determined at compile time&#46;
<p>
-l|--log-basename=logdirectory
Base directory name for log/debug files&#46; The extension
<b>"&#46;progname"</b>
will be appended (e&#46;g&#46; log&#46;smbclient, log&#46;smbd, etc&#46;&#46;&#46;)&#46; The log file is never removed by the client&#46;
<p>
-h|--help
Print a summary of command line options&#46;
<h1 class="manpages">EXAMPLE SETUP</h1>
<p>
To setup ntlm_auth for use by squid 2&#46;5, with both basic and NTLMSSP authentication, the following should be placed in the
<i>squid&#46;conf</i>
file&#46;
<p>
<table class="src" cellpadding="5" cellspacing="5">
<tr><td><pre>
auth_param ntlm program ntlm_auth --helper-protocol=squid-2&#46;5-ntlmssp
auth_param basic program ntlm_auth --helper-protocol=squid-2&#46;5-basic
auth_param basic children 5
auth_param basic realm Squid proxy-caching web server
auth_param basic credentialsttl 2 hours
</pre></td></tr>
</table>
<p>
<!-- ignored unsupported tag .it -->
Note
<p>
This example assumes that ntlm_auth has been installed into your path, and that the group permissions on
<i>winbindd_privileged</i>
are as described above&#46;
<p>
To setup ntlm_auth for use by squid 2&#46;5 with group limitation in addition to the above example, the following should be added to the
<i>squid&#46;conf</i>
file&#46;
<p>
<table class="src" cellpadding="5" cellspacing="5">
<tr><td><pre>
auth_param ntlm program ntlm_auth --helper-protocol=squid-2&#46;5-ntlmssp --require-membership-of=&#39;WORKGROUP&#92;Domain Users&#39;
auth_param basic program ntlm_auth --helper-protocol=squid-2&#46;5-basic --require-membership-of=&#39;WORKGROUP&#92;Domain Users&#39;
</pre></td></tr>
</table>
<h1 class="manpages">TROUBLESHOOTING</h1>
<p>
If you&#39;re experiencing problems with authenticating Internet Explorer running under MS Windows 9X or Millenium Edition against ntlm_auth&#39;s NTLMSSP authentication helper (--helper-protocol=squid-2&#46;5-ntlmssp), then please read
the Microsoft Knowledge Base article #239869 and follow instructions described there&#46;
<h1 class="manpages">VERSION</h1>
<p>
This man page is correct for version 3&#46;0 of the Samba suite&#46;
<h1 class="manpages">AUTHOR</h1>
<p>
The original Samba software and related utilities were created by Andrew Tridgell&#46; Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed&#46;
<p>
The ntlm_auth manpage was written by Jelmer Vernooij and Andrew Bartlett&#46;
<br />
<hr />
<a href="index.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="index.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversion3aa7-2.html?tutorial=unix_commands&amp;file=ntlm_auth.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/unix_commands/ntlm_auth.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:05:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
