<html>

<!-- Mirrored from www.tutorialspoint.com/makefile/makefile_rules.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Defining Rules in Makefile</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="Keywords" content="SOAP,XML-RPC,Web Services, AJAX, VB.NET,.NET,  JAVA, J2EE, Unix Makefile,PERL,XSL,XHTML,ASP,ADO,VBScript,DOM,SQL,COLORS,PHP,CGI,Authoring,Programming,Training,Learning, Beginner's guide,Primer,Lessons,School,Howto,Reference,Examples,Samples,Source Code,Tags,Demos,Tips,Links,FAQ,Tag list,Forms,Frames,HTML Entities, HTML Color,w3c,Cascading Style Sheets, CSS, Active Server Pages, ASP, Dynamic Html,DHTML, C++, C#, C, Pro*C, Internet,Database,Development,Web building,Webmaster,Html Guide" />
<meta name="Description" content="Free tutorials and references for SOAP XML-RPC Web Services AJAX JavaScript J2EE ASP.NET VB.NET  C# C++ C Pro*C Makefile PERL Parrot Ruby JAVA J2EE CORBA BILLING CRM OM DLL PHP CGI MySQL PL/SQL SDLC CSS ASP DHTML Flash" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base >
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<table border=0 class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="18" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br>
&nbsp;&nbsp;<b>Makefile Tutorial</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="index.html">Makefile HOME</a></li>
<li><a class="left" target="_top" href="why_makefile.html" >Why Makefile ?</a></li>
<li><a class="left" target="_top" href="makefile_macros.html" >Makefile Macros</a></li>
<li><a class="left" target="_top" href="makefile_dependencies.html" >Make Dependencies</a></li>
<li><a class="left" target="_top" href="makefile_rules.html" ><b>Makefile Rules</b></a></li>
<li><a class="left" target="_top" href="makefile_suffix_rules.html" >Suffix Rules</a></li>
<li><a class="left" target="_top" href="makefile_directives.html" >Makefile Directives</a></li>
<li><a class="left" target="_top" href="makefile_recompile.html" >Re-Compilation</a></li>
<li><a class="left" target="_top" href="makefile_features.html" >Other Features</a></li>
<li><a class="left" target="_top" href="makefile_example.html" >Makefile Example</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</b></a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top">
<br><br>
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
<td  style="width:10px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/about_advertising.html">Advertising</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle"  cellpadding="5" cellspacing="0">
<tr>
<td>
<!-- PRINTING STARTS HERE -->
<h1>Defining Rules in Makefile</h1>
<a href="makefile_dependencies.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="makefile_suffix_rules.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<hr />
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top">
<p>

The general syntax of a Makefile Target Rule is
</p>
<table class="ex" width="100%"<tr><td>
<pre>
    target [target...] : [dependent ....]
    [ command ...]
</pre>
</td></tr></table>
<p>Items in brackets are optional, ellipsis means one or more. Note the tab to preface each command is required.</p>
<pr>A simple example is given below where you define a rule to make your target hello from three other files.</p>
<table class="ex" width="100%"<tr><td>
<pre>
hello: main.o factorial.o hello.o
	$(CC) main.o factorial.o hello.o -o hello
</pre>
</td></tr></table>
<p><b>NOTE:</b> In this example you would have to give rules to make all object files also from the source files</p>
<p>The semantics is pretty simple. When you say "make target" make finds the target rule that applies and, if any of the dependents are newer than the target, make executes the commands one at a time (after macro substitution). If any dependents have to be made, that happens first (so you have a recursion).</p>

<p>A make will terminate if any command returns a failure status. That's why you see rules like:</p>
<table class="ex" width="100%"<tr><td>
<pre>
clean:
        -rm *.o *~ core paper
</pre>
</td></tr></table>
</p>Make ignores the returned status on command lines that begin with a dash. eg. who cares if there is no core file?</p>
<p>Make will echo the commands, after macro substition to show you what's happening as it happens. Sometimes you might want to turn that off. For example:</p>
<table class="ex" width="100%"<tr><td>
<pre>
install:
        @echo You must be root to install
</pre>
</td></tr></table>
<p>People have come to expect certain targets in Makefiles. You should always browse first, but it's reasonable to expect that the targets all (or just make), install, and clean will be found.</p>
<ul>
<li><p><b>make all</b> - hould compile everything so that you can do local testing before installing things.

<li><p><b>make install</b> - should install things in the right places. But watch out that things are installed in the right place for your system.
<li><p><b>make clean</b> - should clean things up. Get rid of the executables, any temporary files, object files, etc.
</ul>
<br>
<hr>
<h2>Makefile Implicit Rules</h2>
<p>The command is one that ought to work in all cases where we build an executable x out of the source code x.cpp This can be stated as an implicit rule:</p>
<table class="ex" width="100%"<tr><td>
<pre>
.cpp:
        $(CC) $(CFLAGS) $@.cpp $(LDFLAGS) -o $@
</pre>
</td></tr></table>
<p>This Implicit rule says how to make x out of x.c -- run cc on x.c and call the output x. The rule is implicit because no particular target is mentioned. It can be used in all cases.</p>

<p>Another common implicit rule is for the construction of .o (object) files out of .cpp (source files).</p>
<table class="ex" width="100%"<tr><td>
<pre>
.o.cpp:
        $(CC) $(CFLAGS) -c $<

alternatively

.o.cpp:
        $(CC) $(CFLAGS) -c $*.cpp
</pre>
</td></tr></table>
<br>
</td>
</tr>
</table>
<br />
<hr />
<a href="makefile_dependencies.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="makefile_suffix_rules.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversion382b.html?tutorial=makefile&amp;file=makefile_rules.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/makefile/makefile_rules.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
