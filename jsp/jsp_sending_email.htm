<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/jsp/jsp_sending_email.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:00:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>JSP - Sending Email</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="JSP, Tutorials, Learning, Beginners, Basics, Environment, Life Cycle, Examples, Client Request, Server Response, Http Codes, Writing Filters, Exceptions, Cookies, Sessions, Database Access, File Uploading, File Uploading, Internationalization." />
<meta name="keywords" content="JSP Sending Email - Learning JSP (Java Server Pages) in simple and easy steps using this beginner's tutorial containing basic to advanced knowledge of Java JSP Technology including Form Data, HTTP Request Header, Response Header, Status Codes, Cookies Handling and Session Tracking." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#00afe4 !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#00afe4  !important;
}
#topmenu
{
background-color:#113e78 !important;
}
#leftcol ul.menu li.heading 
{
background:#00afe4 !important;
border:1px solid #113e78  !important;
}
#leftcol, #middlecol, #rightcol {min-height:1275px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="../unix/index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/jsp-mini-logo.png" alt="JSP Tutorial" />
</div>
<ul class="menu">
<li class="heading">Basic JSP Tutorial</li>
<li><a target="_top" href="index.htm">JSP - Home</a></li>
<li><a target="_top" href="jsp_overview.htm">JSP - Overview</a></li>
<li><a target="_top" href="jsp_environment_setup.htm">JSP - Environment</a></li>
<li><a target="_top" href="jsp_architecture.htm">JSP - Architecture</a></li>
<li><a target="_top" href="jsp_life_cycle.htm">JSP - Life Cycle</a></li>
<li><a target="_top" href="jsp_syntax.htm">JSP - Syntax</a></li>
<li><a target="_top" href="jsp_directives.htm">JSP - Directives</a></li>
<li><a target="_top" href="jsp_actions.htm">JSP - Actions</a></li>
<li><a target="_top" href="jsp_implicit_objects.htm">JSP - Implicit Objects</a></li>
<li><a target="_top" href="jsp_client_request.htm">JSP - Client Request</a></li>
<li><a target="_top" href="jsp_server_response.htm">JSP - Server Response</a></li>
<li><a target="_top" href="jsp_http_status_codes.htm">JSP - Http Codes</a></li>
<li><a target="_top" href="jsp_form_processing.htm">JSP - Form Processing</a></li>
<li><a target="_top" href="jsp_writing_filters.htm">JSP - Writing Filters</a></li>
<li><a target="_top" href="jsp_cookies_handling.htm">JSP - Cookies Handling</a></li>
<li><a target="_top" href="jsp_session_tracking.htm">JSP - Session Tracking</a></li>
<li><a target="_top" href="jsp_file_uploading.htm">JSP - File Uploading</a></li>
<li><a target="_top" href="jsp_handling_date.htm">JSP - Handling Date</a></li>
<li><a target="_top" href="jsp_page_redirect.htm">JSP - Page Redirect</a></li>
<li><a target="_top" href="jsp_hits_counter.htm">JSP - Hits Counter</a></li>
<li><a target="_top" href="jsp_auto_refresh.htm">JSP - Auto Refresh</a></li>
<li><a target="_top" href="jsp_sending_email.htm"><b>JSP - Sending Email</b></a></li>
</ul>
<ul class="menu">
<li class="heading">Advanced JSP Tutorials</li>
<li><a target="_top" href="jsp_standard_tag_library.htm">JSP - Standard Tag Library</a></li>
<li><a target="_top" href="jsp_database_access.htm">JSP - Database Access</a></li>
<li><a target="_top" href="jsp_xml_data.htm">JSP - XML Data</a></li>
<li><a target="_top" href="jsp_java_beans.htm">JSP - Java Beans</a></li>
<li><a target="_top" href="jsp_custom_tags.htm">JSP - Custom Tags</a></li>
<li><a target="_top" href="jsp_expression_language.htm">JSP - Expression Language</a></li>
<li><a target="_top" href="jsp_exception_handling.htm">JSP - Exception Handling</a></li>
<li><a target="_top" href="jsp_debugging.htm">JSP - Debugging</a></li>
<li><a target="_top" href="jsp_security.htm">JSP - Security</a></li>
<li><a target="_top" href="jsp_internationalization.htm">JSP - Internationalization</a></li>
</ul>
<ul class="menu">
<li class="heading">JSP Useful Resources</li>
<li><a target="_top" href="jsp_quick_guide.htm">JSP - Quick Guide</a></li>
<li><a target="_top" href="jsp_useful_resources.htm">JSP Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>JSP - Sending Email</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="jsp_auto_refresh.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="jsp_standard_tag_library.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>To send an email using a JSP is simple enough but to start with you should have <b>JavaMail API</b> and <b>Java Activation Framework (JAF)</b> installed on your machine.</p>
<ul class="list">
<li><p>You can download  latest version of <a href="http://java.sun.com/products/javamail/" target="_blank">JavaMail (Version 1.2)</a> from Java's standard website.</p></li>
<li><p>You can download  latest version of JavaBeans Activation Framework  <a href="http://www.oracle.com/technetwork/java/javase/jaf-136260.html" target="_blank">JAF (Version 1.0.2)</a> from Java's standard website.</p></li>
</ul>
<p>Download and unzip these files, in the newly created top level directories you will find a number of jar files for both the applications.  You need to add <b>mail.jar</b> and <b>activation.jar</b> files in your CLASSPATH.</p>
<h2>Send a Simple Email:</h2>
<p>Here is an example to send a simple email from your machine. Here it is assumed that your <b>localhost</b> is connected to the internet and capable enough to send an email.  Same time make sure all the jar files from Java Email API package and JAF package ara available in CLASSPATH.</p>
<pre class="prettyprint">
&lt;%@ page import="java.io.*,java.util.*,javax.mail.*"%&gt;
&lt;%@ page import="javax.mail.internet.*,javax.activation.*"%&gt;
&lt;%@ page import="javax.servlet.http.*,javax.servlet.*" %&gt;
&lt;%
   String result;
   // Recipient's email ID needs to be mentioned.
   String to = "abcd@gmail.com";

   // Sender's email ID needs to be mentioned
   String from = "mcmohd@gmail.com";

   // Assuming you are sending email from localhost
   String host = "localhost";

   // Get system properties object
   Properties properties = System.getProperties();

   // Setup mail server
   properties.setProperty("mail.smtp.host", host);

   // Get the default Session object.
   Session mailSession = Session.getDefaultInstance(properties);

   try{
      // Create a default MimeMessage object.
      MimeMessage message = new MimeMessage(mailSession);
      // Set From: header field of the header.
      message.setFrom(new InternetAddress(from));
      // Set To: header field of the header.
      message.addRecipient(Message.RecipientType.TO,
                               new InternetAddress(to));
      // Set Subject: header field
      message.setSubject("This is the Subject Line!");
      // Now set the actual message
      message.setText("This is actual message");
      // Send message
      Transport.send(message);
      result = "Sent message successfully....";
   }catch (MessagingException mex) {
      mex.printStackTrace();
      result = "Error: unable to send message....";
   }
%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Send Email using JSP&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;center&gt;
&lt;h1&gt;Send Email using JSP&lt;/h1&gt;
&lt;/center&gt;
&lt;p align="center"&gt;
&lt;% 
   out.println("Result: " + result + "\n");
%&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Now let us put above code in SendEmail.jsp file and call this JSP using URL http://localhost:8080/SendEmail.jsp which would send an email to given email ID <i>abcd@gmail.com</i> and would display following response:</p>
<table cellpadding="5" class="src">
<tr><td bgcolor="#f0f0f0">
<h1 align="center">Send Email using JSP</h1>
<p align="center">Result: Sent message successfully....</p>
</td></tr>
</table>
<p>If you want to send an email to multiple recipients then following methods would be used to specify multiple email IDs:</p>
<pre class="prettyprint">
void addRecipients(Message.RecipientType type, 
                   Address[] addresses)
throws MessagingException
</pre>
<p>Here is the description of the parameters:</p>
<ul class="list">
<li><p><b>type:</b> This would be set to TO, CC or BCC. Here CC represents Carbon Copy and BCC represents Black Carbon Copy. Example <i>Message.RecipientType.TO</i></p></li>
<li><p><b>addresses:</b> This is the array of email ID. You would need to use InternetAddress() method while specifying email IDs</p></li>
</ul>
<h2>Send an HTML Email:</h2>
<p>Here is an example to send an HTML email from your machine. Here it is assumed that your <b>localhost</b> is connected to the internet and capable enough to send an email. Same time make sure all the jar files from Java Email API package and JAF package ara available in CLASSPATH.</p>
<p>This example is very similar to previous one, except here we are using setContent() method to set content whose second argument is "text/html" to specify that the HTML content is included in the message.</p>
<p>Using this example, you can send as big as HTML content you like.</p>
<pre class="prettyprint">
&lt;%@ page import="java.io.*,java.util.*,javax.mail.*"%&gt;
&lt;%@ page import="javax.mail.internet.*,javax.activation.*"%&gt;
&lt;%@ page import="javax.servlet.http.*,javax.servlet.*" %&gt;
&lt;%
   String result;
   // Recipient's email ID needs to be mentioned.
   String to = "abcd@gmail.com";

   // Sender's email ID needs to be mentioned
   String from = "mcmohd@gmail.com";

   // Assuming you are sending email from localhost
   String host = "localhost";

   // Get system properties object
   Properties properties = System.getProperties();

   // Setup mail server
   properties.setProperty("mail.smtp.host", host);

   // Get the default Session object.
   Session mailSession = Session.getDefaultInstance(properties);

   try{
      // Create a default MimeMessage object.
      MimeMessage message = new MimeMessage(mailSession);
      // Set From: header field of the header.
      message.setFrom(new InternetAddress(from));
      // Set To: header field of the header.
      message.addRecipient(Message.RecipientType.TO,
                               new InternetAddress(to));
      // Set Subject: header field
      message.setSubject("This is the Subject Line!");
     
      // Send the actual HTML message, as big as you like
      message.setContent("&lt;h1&gt;This is actual message&lt;/h1&gt;",
                            "text/html" );
      // Send message
      Transport.send(message);
      result = "Sent message successfully....";
   }catch (MessagingException mex) {
      mex.printStackTrace();
      result = "Error: unable to send message....";
   }
%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Send HTML Email using JSP&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;center&gt;
&lt;h1&gt;Send Email using JSP&lt;/h1&gt;
&lt;/center&gt;
&lt;p align="center"&gt;
&lt;% 
   out.println("Result: " + result + "\n");
%&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Now try to use above JSP to send HTML message on a given email ID.</p>
<h2>Send Attachment in Email:</h2>
<p>Here is an example to send an email with attachment from your machine:</p>
<pre class="prettyprint">
&lt;%@ page import="java.io.*,java.util.*,javax.mail.*"%&gt;
&lt;%@ page import="javax.mail.internet.*,javax.activation.*"%&gt;
&lt;%@ page import="javax.servlet.http.*,javax.servlet.*" %&gt;
&lt;%
   String result;
   // Recipient's email ID needs to be mentioned.
   String to = "abcd@gmail.com";

   // Sender's email ID needs to be mentioned
   String from = "mcmohd@gmail.com";

   // Assuming you are sending email from localhost
   String host = "localhost";

   // Get system properties object
   Properties properties = System.getProperties();

   // Setup mail server
   properties.setProperty("mail.smtp.host", host);

   // Get the default Session object.
   Session mailSession = Session.getDefaultInstance(properties);

   try{
      // Create a default MimeMessage object.
      MimeMessage message = new MimeMessage(mailSession);

      // Set From: header field of the header.
      message.setFrom(new InternetAddress(from));

      // Set To: header field of the header.
      message.addRecipient(Message.RecipientType.TO,
                               new InternetAddress(to));

      // Set Subject: header field
      message.setSubject("This is the Subject Line!");

      // Create the message part 
      BodyPart messageBodyPart = new MimeBodyPart();

      // Fill the message
      messageBodyPart.setText("This is message body");
      
      // Create a multipar message
      Multipart multipart = new MimeMultipart();

      // Set text message part
      multipart.addBodyPart(messageBodyPart);

      // Part two is attachment
      messageBodyPart = new MimeBodyPart();
      String filename = "file.txt";
      DataSource source = new FileDataSource(filename);
      messageBodyPart.setDataHandler(new DataHandler(source));
      messageBodyPart.setFileName(filename);
      multipart.addBodyPart(messageBodyPart);

      // Send the complete message parts
      message.setContent(multipart );

      // Send message
      Transport.send(message);
      String title = "Send Email";
      result = "Sent message successfully....";
   }catch (MessagingException mex) {
      mex.printStackTrace();
      result = "Error: unable to send message....";
   }
%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Send Attachement Email using JSP&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;center&gt;
&lt;h1&gt;Send Attachement Email using JSP&lt;/h1&gt;
&lt;/center&gt;
&lt;p align="center"&gt;
&lt;% 
   out.println("Result: " + result + "\n");
%&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Now try to run above JSP to send a file as an attachment  along with a message on a given email ID.</p>
<h2>User Authentication Part:</h2>
<p>If it is required to provide user ID and Password to the email server for authentication purpose then you can set these properties as follows:</p>
<pre class="prettyprint">
 props.setProperty("mail.user", "myuser");
 props.setProperty("mail.password", "mypwd");
</pre>
<p>Rest of the email sending mechanism would remain as explained above.</p>
<h2>Using Forms to send email:</h2>
<p>You can use HTML form to accept email parameters and then you can use <b>request</b> object to get all the information as follows:</p>
<pre class="prettyprint">
String to = request.getParameter("to");
String from = request.getParameter("from");
String subject = request.getParameter("subject");
String messageText = request.getParameter("body");
</pre>
<p>Once you have all the information, you can use above mentioned programs to send email.</p>
<hr />
<div class="pre-btn">
<a href="jsp_auto_refresh.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/jsp_sending_email.pdf" alt="JSP - Sending Email" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="jsp_standard_tag_library.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="index.htm" target="_top">JSP </a> |
<a href="../servlets/index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="../struts_2/index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="../unix/index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2012 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/jsp/jsp_sending_email.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:00:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
