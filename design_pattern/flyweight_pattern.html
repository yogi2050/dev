<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/design_pattern/flyweight_pattern.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:56:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Flyweight Pattern</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="Keywords" content="Flyweight Pattern - Design, Patterns, Java, Tutorials, Learning, Beginners, Basics, Factory Pattern, Abstract Factory, Singleton, Builder, Prototype, Adapter, Bridge, Filter, Composite, Decorator, Facade, Flyweight, Proxy, Command, Interpreter, Iterator, Mediator, Memento, Observer, State, Null Object,Strategy, Template, Visitor, MVC, Front, Controller" />
<meta name="description" content="Design Pattern Overview - Learning java design patterns in simple and easy steps : A beginner's tutorial containing complete knowledge about an java design patterns starting from its Factory Pattern, Abstract Factory, Singleton, Builder, Prototype, Adapter, Bridge, Filter, Composite, Decorator, Facade, Flyweight, Proxy, Command, Interpreter, Iterator, Mediator, Memento, Observer, State, Null Object,Strategy, Template, Visitor, MVC, Front Controller etc." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
/* Java Scheme */
#header{ 
background:#F3943D !important;
}
#topmenu
{
background-color:#5382A1 !important;
}
#leftcol ul.menu li.heading 
{
background:#F3943D !important;
border:1px solid #964800 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1300px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index-2.html">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index-2.html" target="_top">HOME </a>
<a href="../java/index.html" target="_top">JAVA </a>
<a href="../php/index.html" target="_top">PHP </a>
<a href="../python/index.html" target="_top">Python </a>
<a href="../ruby/index.html" target="_top">Ruby </a>
<a href="../perl/index.html" target="_top">Perl </a>
<a href="../html/index.html" target="_top">HTML </a>
<a href="../css/index.html" target="_top">CSS </a>
<a href="../javascript/index.html" target="_top">Javascript </a>
<a href="../mysql/index.html" target="_top">MySQL </a>
<a href="../cplusplus/index.html" target="_top">C++ </a>
<a href="../unix/index.html" target="_top">UNIX </a>
<a href="../more.html" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.html" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.html" target="_top">ABOUT</a> |
<a href="../about/contact_us.html" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/dp-mini-logo.png" alt="Design Patterns in Java Tutorial" />
</div>
<ul class="menu">
<li class="heading">Design Patterns Tutorial</li>
<li><a target="_top" href="index.html">Home</a></li>
<li><a target="_top" href="design_pattern_overview.html">Design Pattern Overview</a></li>
<li><a target="_top" href="factory_pattern.html">Factory Pattern</a></li>
<li><a target="_top" href="abstract_factory_pattern.html">Abstract Factory Pattern</a></li>
<li><a target="_top" href="singleton_pattern.html">Singleton Pattern</a></li>
<li><a target="_top" href="builder_pattern.html">Builder Pattern</a></li>
<li><a target="_top" href="prototype_pattern.html">Prototype Pattern</a></li>
<li><a target="_top" href="adapter_pattern.html">Adapter Pattern</a></li>
<li><a target="_top" href="bridge_pattern.html">Bridge Pattern</a></li>
<li><a target="_top" href="filter_pattern.html">Filter Pattern</a></li>
<li><a target="_top" href="composite_pattern.html">Composite Pattern</a></li>
<li><a target="_top" href="decorator_pattern.html">Decorator Pattern</a></li>
<li><a target="_top" href="facade_pattern.html">Facade Pattern</a></li>
<li><a target="_top" href="flyweight_pattern.html"><b>Flyweight Pattern</b></a></li>
<li><a target="_top" href="proxy_pattern.html">Proxy Pattern</a></li>
<li><a target="_top" href="chain_of_responsibility_pattern.html">Chain of Responsibility Pattern</a></li>
<li><a target="_top" href="command_pattern.html">Command Pattern</a></li>
<li><a target="_top" href="interpreter_pattern.html">Interpreter Pattern</a></li>
<li><a target="_top" href="iterator_pattern.html">Iterator Pattern</a></li>
<li><a target="_top" href="mediator_pattern.html">Mediator Pattern</a></li>
<li><a target="_top" href="memento_pattern.html">Memento Pattern</a></li>
<li><a target="_top" href="observer_pattern.html">Observer Pattern</a></li>
<li><a target="_top" href="state_pattern.html">State Pattern</a></li>
<li><a target="_top" href="null_object_pattern.html">Null Object Pattern</a></li>
<li><a target="_top" href="strategy_pattern.html">Strategy Pattern</a></li>
<li><a target="_top" href="template_pattern.html">Template Pattern</a></li>
<li><a target="_top" href="visitor_pattern.html">Visitor Pattern</a></li>
<li><a target="_top" href="mvc_pattern.html">MVC Pattern</a></li>
<li><a target="_top" href="business_delegate_pattern.html">Business Delegate Pattern</a></li>
<li><a target="_top" href="composite_entity_pattern.html">Composite Entity Pattern</a></li>
<li><a target="_top" href="data_access_object_pattern.html">Data Access Object Pattern</a></li>
<li><a target="_top" href="front_controller_pattern.html">Front Controller Pattern</a></li>
<li><a target="_top" href="intercepting_filter_pattern.html">Intercepting Filter Pattern</a></li>
<li><a target="_top" href="service_locator_pattern.html">Service Locator  Pattern</a></li>
<li><a target="_top" href="transfer_object_pattern.html">Transfer Object Pattern</a></li>
</ul>
<ul class="menu">
<li class="heading">Design Pattern Resources</li>
<li><a class="left" target="_top" href="design_pattern_quick_guide.htm">Design Pattern Guide</a></li>
<li><a class="left" target="_top" href="design_pattern_resources.html">Design Pattern Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Flyweight Pattern</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="facade_pattern.html">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="proxy_pattern.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>Flyweight pattern is primarily used to reduce the number of objects created, to decrease memory footprint and increase performance. This type of design pattern comes under structural pattern as this pattern provides ways to decrease objects count thus improving application required objects structure.</p>
<p>Flyweight pattern try to reuse already existing similar kind objects by storing them and creates new object when no matching object is found. We'll demonstrate this pattern by drawing 20 circle of different locations but we'll creating only 5 objects. Only 5 colors are available so color property is used to check already existing <i>Circle</i> objects.</p>
<h2>Implementation</h2>
<p>We're going to create a <i>Shape</i> interface and concrete class <i>Circle</i> implementing the <i>Shape</i> interface. A factory class <i>ShapeFactory</i> is defined as a next step.</p>
<p><i>ShapeFactory</i> have a <i>HashMap</i> of <i>Circle</i> having key as color of the <i>Circle</i> object. Whenever a request comes to create a circle of particular color to <i>ShapeFactory</i>. <i>ShapeFactory</i> checks the circle object in its <i>HashMap</i>, if object of <i>Circle</i> found, that object is returned otherwise a new object is created, stored in hashmap for future use and returned to client.</p>
<p><i>FlyWeightPatternDemo</i>, our demo class will use <i>ShapeFactory</i> to get a <i>Shape</i> object. It will pass information (<i>red / green / blue/ black / white</i>) to <i>ShapeFactory</i> to get the circle of desired color it needs.</p>
<img src="images/flyweight_pattern_uml_diagram.jpg" alt="Flyweight Pattern UML Diagram" />
<h2>Step 1</h2>
<p>Create an interface.</p>
<p><i>Shape.java</i></p>
<pre class="prettyprint">
public interface Shape {
   void draw();
}
</pre>
<h2>Step 2</h2>
<p>Create concrete class implementing the same interface.</p>
<p><i>Circle.java</i></p>
<pre class="prettyprint">
public class Circle implements Shape {
   private String color;
   private int x;
   private int y;
   private int radius;

   public Circle(String color){
      this.color = color;		
   }

   public void setX(int x) {
      this.x = x;
   }

   public void setY(int y) {
      this.y = y;
   }

   public void setRadius(int radius) {
      this.radius = radius;
   }

   @Override
   public void draw() {
      System.out.println("Circle: Draw() [Color : " + color 
         +", x : " + x +", y :" + y +", radius :" + radius);
   }
}
</pre>
<h2>Step 3</h2>
<p>Create a Factory to generate object of concrete class based on given information.</p>
<p><i>ShapeFactory.java</i></p>
<pre class="prettyprint">
import java.util.HashMap;

public class ShapeFactory {
   private static final HashMap&lt;String, Shape&gt; circleMap = new HashMap();

   public static Shape getCircle(String color) {
      Circle circle = (Circle)circleMap.get(color);

      if(circle == null) {
         circle = new Circle(color);
         circleMap.put(color, circle);
         System.out.println("Creating circle of color : " + color);
      }
      return circle;
   }
}
</pre>
<h2>Step 4</h2>
<p>Use the Factory to get object of concrete class by passing an information such as color.</p>
<p><i>FlyweightPatternDemo.java</i></p>
<pre class="prettyprint">
public class FlyweightPatternDemo {
   private static final String colors[] = 
      { "Red", "Green", "Blue", "White", "Black" };
   public static void main(String[] args) {

      for(int i=0; i &lt; 20; ++i) {
         Circle circle = 
            (Circle)ShapeFactory.getCircle(getRandomColor());
         circle.setX(getRandomX());
         circle.setY(getRandomY());
         circle.setRadius(100);
         circle.draw();
      }
   }
   private static String getRandomColor() {
      return colors[(int)(Math.random()*colors.length)];
   }
   private static int getRandomX() {
      return (int)(Math.random()*100 );
   }
   private static int getRandomY() {
      return (int)(Math.random()*100);
   }
}
</pre>
<h2>Step 5</h2>
<p>Verify the output.</p>
<pre class="result">
Creating circle of color : Black
Circle: Draw() [Color : Black, x : 36, y :71, radius :100
Creating circle of color : Green
Circle: Draw() [Color : Green, x : 27, y :27, radius :100
Creating circle of color : White
Circle: Draw() [Color : White, x : 64, y :10, radius :100
Creating circle of color : Red
Circle: Draw() [Color : Red, x : 15, y :44, radius :100
Circle: Draw() [Color : Green, x : 19, y :10, radius :100
Circle: Draw() [Color : Green, x : 94, y :32, radius :100
Circle: Draw() [Color : White, x : 69, y :98, radius :100
Creating circle of color : Blue
Circle: Draw() [Color : Blue, x : 13, y :4, radius :100
Circle: Draw() [Color : Green, x : 21, y :21, radius :100
Circle: Draw() [Color : Blue, x : 55, y :86, radius :100
Circle: Draw() [Color : White, x : 90, y :70, radius :100
Circle: Draw() [Color : Green, x : 78, y :3, radius :100
Circle: Draw() [Color : Green, x : 64, y :89, radius :100
Circle: Draw() [Color : Blue, x : 3, y :91, radius :100
Circle: Draw() [Color : Blue, x : 62, y :82, radius :100
Circle: Draw() [Color : Green, x : 97, y :61, radius :100
Circle: Draw() [Color : Green, x : 86, y :12, radius :100
Circle: Draw() [Color : Green, x : 38, y :93, radius :100
Circle: Draw() [Color : Red, x : 76, y :82, radius :100
Circle: Draw() [Color : Blue, x : 95, y :82, radius :100
</pre>
<hr />
<div class="pre-btn">
<a href="facade_pattern.html">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="nxt-btn">
<a href="proxy_pattern.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.html" target="_top">ASP.NET </a> |
<a href="../jquery/index.html" target="_top">jQuery </a> |
<a href="../ajax/index.html" target="_top">AJAX </a> |
<a href="../ant/index.html" target="_top">ANT</a> |
<a href="../jsp/index.html" target="_top">JSP </a> |
<a href="../servlets/index.html" target="_top">Servlets </a> |
<a href="../log4j/index.html" target="_top">log4j </a> |
<a href="../ibatis/index.html" target="_top">iBATIS </a> |
<a href="../hibernate/index.html" target="_top">Hibernate </a> |
<a href="../jdbc/index.html" target="_top">JDBC </a> |
<a href="../struts_2/index.html" target="_top">Struts </a> |
<a href="../html5/index.html" target="_top">HTML5 </a> |
<a href="../sql/index.html" target="_top">SQL </a> |
<a href="../mysql/index.html" target="_top">MySQL </a> |
<a href="../cplusplus/index.html" target="_top">C++ </a> |
<a href="../unix/index.html" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2012 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/design_pattern/flyweight_pattern.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:56:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>