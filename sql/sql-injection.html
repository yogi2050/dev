<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/sql/sql-injection.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>SQL - Injection</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="Keywords" content="Learning, SQL, Structured, Programming, Language, Syntax, Database, Clauses, database concepts, SQL Syntax, SELECT, INSERT, DELETE, UPDATE, DROP, TRUNCATE, DISTINCT, ORDER BY, GROUP BY, WHERE" />
<meta name="description" content="SQL Injection - Learn SQL (Structured Programming Language) in simple and easy steps starting from basics to advanced concepts. This tutorial would give you complete understanding on database concepts, SQL Syntax, SELECT, INSERT, DELETE, UPDATE, DROP, TRUNCATE, DISTINCT, ORDER BY, GROUP BY, WHERE clauses." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
/* SQL Scheme */
#topmenu a:link {text-decoration:none;color:#fff !important;background-color:transparent;font-weight:bold;}
#topmenu a:visited {text-decoration:none;color:#fff !important;background-color:transparent;font-weight:bold;}
#topmenu a:hover {text-decoration:none;color:#36B8D7 !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#36B8D7 !important;
}
#topmenu
{
background-color:#005C71 !important;
}
#leftcol ul.menu li.heading 
{
background:#36B8D7 !important;
border:1px solid #005C71 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1650px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index-2.html">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index-2.html" target="_top">HOME </a>
<a href="../java/index.html" target="_top">JAVA </a>
<a href="../php/index.html" target="_top">PHP </a>
<a href="../python/index.html" target="_top">Python </a>
<a href="../ruby/index.html" target="_top">Ruby </a>
<a href="../perl/index.html" target="_top">Perl </a>
<a href="../html/index.html" target="_top">HTML </a>
<a href="../css/index.html" target="_top">CSS </a>
<a href="../javascript/index.html" target="_top">Javascript </a>
<a href="../mysql/index.html" target="_top">MySQL </a>
<a href="../cplusplus/index.html" target="_top">C++ </a>
<a href="../unix/index.html" target="_top">UNIX </a>
<a href="../more.html" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.html" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.html" target="_top">ABOUT</a> |
<a href="../about/contact_us.html" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/sql-mini-logo.png" alt="SQL Tutorial" />
</div>
<ul class="menu">
<li class="heading">Basic SQL</li>
<li><a target="_top" href="index.html">SQL - Home</a></li>
<li><a target="_top" href="sql-overview.html" >SQL - Overview</a></li>
<li><a target="_top" href="sql-rdbms-concepts.html">SQL -  RDBMS Concepts</a></li>
<li><a target="_top" href="sql-databases.html" >SQL - Databases</a></li>
<li><a target="_top" href="sql-syntax.html" >SQL - Syntax</a></li>
<li><a target="_top" href="sql-data-types.html" >SQL - Data Types</a></li>
<li><a target="_top" href="sql-operators.html" >SQL - Operators</a></li>
<li><a target="_top" href="sql-expressions.html" >SQL - Expressions</a></li>
<li><a target="_top" href="sql-create-database.html" >SQL - Create Database</a></li>
<li><a target="_top" href="sql-drop-database.html" >SQL - Drop Database</a></li>
<li><a target="_top" href="sql-select-database.html" >SQL - Select Database</a></li>
<li><a target="_top" href="sql-create-table.html" >SQL - Create Table</a></li>
<li><a target="_top" href="sql-drop-table.html" >SQL - Drop Table</a></li>
<li><a target="_top" href="sql-insert-query.html" >SQL - Insert Query</a></li>
<li><a target="_top" href="sql-select-query.html" >SQL - Select Query</a></li>
<li><a target="_top" href="sql-where-clause.html" >SQL - Where Clause</a></li>
<li><a target="_top" href="sql-and-or-clauses.html" >SQL - AND &amp; OR Clauses</a></li>
<li><a target="_top" href="sql-update-query.html" >SQL - Update Query</a></li>
<li><a target="_top" href="sql-delete-query.html" >SQL - Delete Query</a></li>
<li><a target="_top" href="sql-like-clause.html" >SQL - Like Clause</a></li>
<li><a target="_top" href="sql-top-clause.html" >SQL - Top Clause</a></li>
<li><a target="_top" href="sql-order-by.html" >SQL - Order By</a></li>
<li><a target="_top" href="sql-group-by.html" >SQL - Group By</a></li>
<li><a target="_top" href="sql-distinct-keyword.html" >SQL - Distinct Keyword</a></li>
<li><a target="_top" href="sql-sorting-results.html" >SQL - Sorting Results</a></li>
</ul>
<ul class="menu">
<li class="heading">Advanced SQL</li>
<li><a target="_top" href="sql-constraints.html" >SQL - Constraints</a></li>
<li><a target="_top" href="sql-using-joins.html" >SQL - Using Joins</a></li>
<li><a target="_top" href="sql-unions-clause.html" >SQL - Unions Clause</a></li>
<li><a target="_top" href="sql-null-values.html" >SQL - NULL Values</a></li>
<li><a target="_top" href="sql-alias-syntax.html" >SQL - Alias Syntax</a></li>
<li><a target="_top" href="sql-indexes.html" >SQL - Indexes</a></li>
<li><a target="_top" href="sql-alter-command.html" >SQL - Alter Command</a></li>
<li><a target="_top" href="sql-truncate-table.html" >SQL - Truncate Table</a></li>
<li><a target="_top" href="sql-using-views.html" >SQL - Using Views</a></li>
<li><a target="_top" href="sql-having-clause.html" >SQL - Having Clause</a></li>
<li><a target="_top" href="sql-transactions.html" >SQL - Transactions</a></li>
<li><a target="_top" href="sql-wildcards.html" >SQL - Wildcards</a></li>
<li><a target="_top" href="sql-date-functions.html" >SQL - Date Functions</a></li>
<li><a target="_top" href="sql-temporary-tables.html" >SQL - Temporary Tables</a></li>
<li><a target="_top" href="sql-clone-tables.html" >SQL - Clone Tables</a></li>
<li><a target="_top" href="sql-sub-queries.html" >SQL - Sub Queries</a></li>
<li><a target="_top" href="sql-using-sequences.html" >SQL - Using Sequences</a></li>
<li><a target="_top" href="sql-handling-duplicates.html" >SQL - Handling Duplicates</a></li>
<li><a target="_top" href="sql-injection.html" ><b>SQL - Injection</b></a></li>
</ul>
<ul class="menu">
<li class="heading">SQL Useful Resources</li>
<li><a target="_top" href="sql-quick-guide.html" >SQL - Quick Guide</a></li>
<li><a target="_top" href="sql-useful-functions.html" >SQL - Useful Functions</a></li>
<li><a target="_top" href="sql-useful-resources.html" >SQL - Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>SQL - Injection</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="sql-handling-duplicates.html">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="sql-useful-functions.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>If you take user input through a webpage and insert it into a SQL database there's a chance that you have left yourself wide open for a security issue known as SQL Injection.</p>
<p>This lesson will teach you how to help prevent this from happening and help you secure your scripts and SQL statements in your server side scripts such as PERL Script.</p>
<p>Injection usually occurs when you ask a user for input, like their name, and instead of a name they give you a SQL statement that you will unknowingly run on your database.</p>
<p>Never trust user provided data, process this data only after validation; as a rule, this is done by pattern matching.</p>
<p>In the example below, the <b>name</b> is restricted to alphanumerical chars plus underscore and to a length between 8 and 20 chars (Modify these rules as needed).</p>
<pre class="prettyprint">
if (preg_match("/^\w{8,20}$/", $_GET['username'], $matches))
{
   $result = mysql_query("SELECT * FROM CUSTOMERS 
                          WHERE name=$matches[0]");
}
else 
{
   echo "user name not accepted";
}
</pre>
<p>To demonstrate the problem, consider this excerpt:</p>
<pre class="prettyprint">
// supposed input
$name = "Qadir'; DELETE FROM CUSTOMERS;";
mysql_query("SELECT * FROM CUSTOMSRS WHERE name='{$name}'");
</pre>
<p>The function call is supposed to retrieve a record from the CUSTOMERS table where the name column matches the name specified by the user. Under normal circumstances, $name would only contain alphanumeric characters and perhaps spaces, such as the string ilia. But here, by appending an entirely new query to $name, the call to the database turns into disaster: the injected DELETE query removes all records from CUSTOMERS.</p>
<p>Fortunately, if you use MySQL, the mysql_query() function does not permit query stacking, or executing multiple SQL queries in a single function call. If you try to stack queries, the call fails.</p>
<p>However, other PHP database extensions, such as SQLite and PostgreSQL, happily perform stacked queries, executing all of the queries provided in one string and creating a serious security problem.</p>
<h2>Preventing SQL Injection:</h2>
<p>You can handle all escape characters smartly in scripting languages like PERL and PHP. The MySQL extension for PHP provides the function mysql_real_escape_string() to escape input characters that are special to MySQL.</p>
<pre class="prettyprint">
if (get_magic_quotes_gpc()) 
{
  $name = stripslashes($name);
}
$name = mysql_real_escape_string($name);
mysql_query("SELECT * FROM CUSTOMERS WHERE name='{$name}'");
</pre>
<h2>The LIKE Quandary:</h2>
<p>To address the LIKE quandary, a custom escaping mechanism must convert user-supplied % and _ characters to literals. Use addcslashes(), a function that let's you specify a character range to escape.</p>
<pre class="prettyprint">
$sub = addcslashes(mysql_real_escape_string("%str"), "%_");
// $sub == \%str\_
mysql_query("SELECT * FROM messages 
             WHERE subject LIKE '{$sub}%'");
</pre>
<hr />
<div class="pre-btn">
<a href="sql-handling-duplicates.html">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/sql-injection.html" alt="SQL - Injection" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="sql-useful-functions.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.html" target="_top">ASP.NET </a> |
<a href="../jquery/index.html" target="_top">jQuery </a> |
<a href="../ajax/index.html" target="_top">AJAX </a> |
<a href="../ant/index.html" target="_top">ANT</a> |
<a href="../jsp/index.html" target="_top">JSP </a> |
<a href="../servlets/index.html" target="_top">Servlets </a> |
<a href="../log4j/index.html" target="_top">log4j </a> |
<a href="../ibatis/index.html" target="_top">iBATIS </a> |
<a href="../hibernate/index.html" target="_top">Hibernate </a> |
<a href="../jdbc/index.html" target="_top">JDBC </a> |
<a href="../struts_2/index.html" target="_top">Struts </a> |
<a href="../html5/index.html" target="_top">HTML5 </a> |
<a href="index.html" target="_top">SQL </a> |
<a href="../mysql/index.html" target="_top">MySQL </a> |
<a href="../cplusplus/index.html" target="_top">C++ </a> |
<a href="../unix/index.html" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/sql/sql-injection.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>