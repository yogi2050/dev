<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/unix/unix-regular-expressions.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 20:03:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Unix - Regular Expressions with SED</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Unix Regular Expressions with SED - Learning fundamentals of UNIX in simple and easy steps : A beginner's tutorial containing complete knowledge of Unix Korn  and Bourne Shell and Programming, Utilities, File System, Directories, Memory Management, Special Variables, vi editor, Processes" />
<meta name="keywords" content="Unix, Tutorials, Learning, Operating, System, OS, Beginners, Basics, Korn, Bourne, Shell,Programming, Utilities, File System, Directories, Memory Management, Special Variables, vi editor, Processes" />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#00afe4  !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#00afe4  !important;
}
#topmenu
{
background-color:#113e78 !important;
}
#leftcol ul.menu li.heading 
{
background:#00afe4 !important;
border:1px solid #113e78  !important;
}
#leftcol, #middlecol, #rightcol {min-height:1400px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/unix-mini-logo.png" alt="Unix Tutorial" />
</div>
<ul class="menu">
<li class="heading">Unix for Beginners</li>
<li><a target="_top" href="index.htm">Unix - Home</a></li>
<li><a target="_top" href="unix-getting-started.htm">Unix - Getting Started</a></li>
<li><a target="_top" href="unix-file-management.htm">Unix - File Management</a></li>
<li><a target="_top" href="unix-directories.htm">Unix - Directories</a></li>
<li><a target="_top" href="unix-file-permission.htm">Unix - File Permission</a></li>
<li><a target="_top" href="unix-environment.htm">Unix - Environment</a></li>
<li><a target="_top" href="unix-basic-utilities.htm">Unix - Basic Utilities</a></li>
<li><a target="_top" href="unix-pipes-filters.htm">Unix - Pipes &amp; Filters</a></li>
<li><a target="_top" href="unix-processes.htm">Unix - Processes</a></li>
<li><a target="_top" href="unix-communication.htm">Unix - Communication</a></li>
<li><a target="_top" href="unix-vi-editor.htm">Unix - The vi Editor</a></li>
</ul>
<ul class="menu">
<li class="heading">Unix Shell Programming</li>
<li><a target="_top" href="unix-shell.htm">Unix - What is Shell?</a></li>
<li><a target="_top" href="unix-using-variables.htm">Unix - Using Variables</a></li>
<li><a target="_top" href="unix-special-variables.htm">Unix - Special Variables</a></li>
<li><a target="_top" href="unix-using-arrays.htm">Unix - Using Arrays</a></li>
<li><a target="_top" href="unix-basic-operators.htm">Unix - Basic Operators</a></li>
<li><a target="_top" href="unix-decision-making.htm">Unix - Decision Making</a></li>
<li><a target="_top" href="unix-shell-loops.htm">Unix - Shell Loops</a></li>
<li><a target="_top" href="unix-loop-control.htm">Unix - Loop Control</a></li>
<li><a target="_top" href="unix-shell-substitutions.htm">Unix - Shell Substitutions</a></li>
<li><a target="_top" href="unix-quoting-mechanisms.htm">Unix - Quoting Mechanisms</a></li>
<li><a target="_top" href="unix-io-redirections.htm">Unix - IO Redirections</a></li>
<li><a target="_top" href="unix-shell-functions.htm">Unix - Shell Functions</a></li>
<li><a target="_top" href="unix-manpage-help.htm">Unix - Manpage Help</a></li>
</ul>
<ul class="menu">
<li class="heading">Advanced Unix</li>
<li><a target="_top" href="unix-regular-expressions.htm"><b>Unix - Regular Expressions</b></a></li>
<li><a target="_top" href="unix-file-system.htm">Unix - File System Basics</a></li>
<li><a target="_top" href="unix-user-administration.htm">Unix - User Administration</a></li>
<li><a target="_top" href="unix-system-performance.htm">Unix - System Performance</a></li>
<li><a target="_top" href="unix-system-logging.htm">Unix - System Logging</a></li>
<li><a target="_top" href="unix-signals-traps.htm">Unix - Signals and Traps</a></li>
</ul>
<ul class="menu">
<li class="heading">Unix Useful Resources</li>
<li><a target="_top" href="unix-useful-commands.htm">Unix - Useful Commands</a></li>
<li><a target="_top" href="unix-quick-guide.htm">Unix - Quick Guide</a></li>
<li><a target="_top" href="unix-builtin-functions.htm">Unix - Builtin Functions</a></li>
<li><a target="_top" href="../unix_system_calls/index.htm">Unix - System Calls</a></li>
<li><a target="_top" href="../unix_commands/index.htm">Unix - Commands List</a></li>
<li><a target="_top" href="unix-useful-resources.htm">Unix Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
 <div class="content">
<h1>Unix - Regular Expressions with SED</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="unix-manpage-help.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="unix-file-system.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>A regular expression is a string that can be used to describe several sequences of characters. Regular expressions are used by several different Unix commands, including <b>ed, sed, awk, grep, </b> and, to a more limited extent, <b>vi</b>.</p>
<p>This tutorial would teach you how to use regular expression along with <b>sed</b>.</p>
<p>Here sed stands for <b>s</b>tream <b>ed</b>itor is a stream oriented editor which was created exclusively for executing scripts. Thus all the input you feed into it passes through and goes to STDOUT and it does not change the input file.</p>
<h2>Invoking sed:</h2>
<p>Before we start, let us take make sure you have a local copy of /etc/passwd text file to work with <b>sed</b>.</p>
<p>As mentioned previously, sed can be invoked by sending data through a pipe to it as follows:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed
Usage: sed [OPTION]... {script-other-script} [input-file]...

  -n, --quiet, --silent
                 suppress automatic printing of pattern space
  -e script, --expression=script
...............................
</pre>
<p>The cat command dumps the contents of /etc/passwd to sed through the pipe into sed's pattern space. The pattern space is the internal work buffer that sed uses to do its work.</p>
<h2>The sed Genral Syntax:</h2>
<p>Following is the general syntax for sed</p>
<pre class="prettyprint">
/pattern/action
</pre>
<p>Here, <b>pattern</b> is a regular expression, and <b>action</b> is one of the commands given in the following table. If <b>pattern</b> is omitted, <b>action</b> is performed for every line as we have seen above.</p>
<p>The slash characters ( /) that surround the pattern are required because they are used as delimiters.</p>
 <table class="src">
<tr>
<th style="width:15%">Range</th><th style="width:85%">Description</th>
</tr>
<tr><td>p</td><td>Prints the line</td></tr>
<tr><td>d</td><td>Deletes the line</td></tr>
<tr><td>s/pattern1/pattern2/</td><td>Substitutes the first occurrence of pattern1 with pattern2.</td></tr>
</table>
<h2>Deleting All Lines with sed:</h2>
<p>Invoke sed again, but this time tell sed to use the editing command delete line, denoted by the single letter d:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed 'd'
$
</pre>
<p>Instead of invoking sed by sending a file to it through a pipe, you can instruct sed to read the data from a file, as in the following example.</p>
<p>The following command does exactly the same thing as the previous Try It Out, without the cat command:</p>
<pre class="prettyprint">
$ sed -e 'd' /etc/passwd
$
</pre>
<h2>The sed Addresses:</h2>
<p>Sed also understands something called addresses. Addresses are either particular locations in a file or a range where a particular editing command should be applied. When sed encounters no addresses, it performs its operations on every line in the file.</p>
<p>The following command adds a basic address to the sed command you've been using:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed '1d' |more
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
bin:x:2:2:bin:/bin:/bin/sh
sys:x:3:3:sys:/dev:/bin/sh
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/bin/sh
man:x:6:12:man:/var/cache/man:/bin/sh
mail:x:8:8:mail:/var/mail:/bin/sh
news:x:9:9:news:/var/spool/news:/bin/sh
backup:x:34:34:backup:/var/backups:/bin/sh
$
</pre>
<p>Notice that the number 1 is added before the delete edit command. This tells sed to perform the editing command on the first line of the file. In this example, sed will delete the first line of /etc/password and print the rest of the file.</p>
<h2>The sed Address Ranges:</h2>
<p>So what if you want to remove more than one line from a file? You can specify an address range with sed as follows:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed '1, 5d' |more
games:x:5:60:games:/usr/games:/bin/sh
man:x:6:12:man:/var/cache/man:/bin/sh
mail:x:8:8:mail:/var/mail:/bin/sh
news:x:9:9:news:/var/spool/news:/bin/sh
backup:x:34:34:backup:/var/backups:/bin/sh
$
</pre>
<p>Above command would be applied on all the lines starting from 1 through 5. So it deleted first five lines.</p>
<p>Try out the following address ranges:</p>
<table class="src">
<tr>
<th style="width:15%">Range</th><th style="width:85%">Description</th>
</tr>
<tr><td>'4,10d'</td><td>Lines starting from 4th till 10th are deleted</td></tr>
<tr><td>'10,4d'</td><td>Only 10th line is deleted, because sed does not work in reverse direction.</td></tr>
<tr><td>'4,+5d'</td><td>This will match line 4 in the file, delete that line, continue to delete the next five lines, and then cease its deletion and print the rest</td></tr>
<tr><td>'2,5!d'</td><td>This will deleted everything except starting from 2nd till 5th line.</td></tr>
<tr><td>'1~3d'</td><td>This deletes the first line, steps over the next three lines, and then deletes the fourth line. Sed continues
applying this pattern until the end of the file.</td></tr>
<tr><td>'2~2d'</td><td>This tells sed to delete the second line, step over the next line, delete the next line, and repeat until the end of the file is reached.</td></tr>
<tr><td>'4,10p'</td><td>Lines starting from 4th till 10th are printed</td></tr>
<tr><td>'4,d'</td><td>This would generate syntax error.</td></tr>
<tr><td>',10d'</td><td>This would also generate syntax error.</td></tr>
</table>
<p><b>Note:</b> While using <b>p</b> action, you should use <b>-n</b> option to avoid repetition of line printing. Check the difference in betweek following two commands:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed -n '1,3p'
</pre>
<p>Check the above command without <b>-n</b> as follows:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed '1,3p'
</pre>
<h2>The Substitution Command:</h2>
<p>The substitution command, denoted by <b>s</b>, will substitute any string that you specify with any other string that you specify.</p>
<p>To substitute one string with another, you need to have some way of telling sed where your first string ends and the substitution string begins. This is traditionally done by bookending the two strings with the forward slash (/) character.</p>
<p>The following command substitutes the first occurrence on a line of the string <b>root</b> with the string <b>amrood</b>.</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed 's/root/amrood/'
amrood:x:0:0:root user:/root:/bin/sh
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
..........................
</pre>
<p>It is very important to note that sed substitutes only the first occurrence on a line. If the string root occurs more than once on a line only the first match will be replaced.</p>
<p>To tell sed to do a global substitution, add the letter <b>g</b> to the end of the command as follows:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed 's/root/amrood/g'
amrood:x:0:0:amrood user:/amrood:/bin/sh
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
bin:x:2:2:bin:/bin:/bin/sh
sys:x:3:3:sys:/dev:/bin/sh
...........................
</pre>
<h2>Substitution Flags:</h2>
<p>There are a number of other useful flags that can be passed in addition to the g flag, and you can specify more than one at a time.</p>
<table class="src">
<tr>
<th style="width:20%">Flag</th><th style="width:80%">Description</th>
</tr>
<tr><td>g</td><td>Replace all matches, not just the first match.</td></tr>
<tr><td>NUMBER</td><td>Replace only NUMBERth match.</td></tr>
<tr><td>p</td><td>If substitution was made, print pattern space.</td></tr>
<tr><td>w FILENAME</td><td>If substitution was made, write result to FILENAME.</td></tr>
<tr><td>I or i</td><td>Match in a case-insensitive manner.</td></tr>
<tr><td>M or m</td><td>In addition to the normal behavior of the special regular expression characters ^ and $, this flag causes ^ to match the empty string after a newline and $ to match the empty string before a newline.</td></tr>
</table>
<h2>Using an Alternative String Separator:</h2>
<p>You may find yourself having to do a substitution on a string that includes the forward slash character. In this case, you can specify a different separator by providing the designated character after the s.</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed 's:/root:/amrood:g'
amrood:x:0:0:amrood user:/amrood:/bin/sh
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
</pre>
<p>In the above example we have used <b>:</b> as delimeter instead of slash / because we were trying to search /root instead of simple root.</p>
<h2>Replacing with Empty Space:</h2>
<p>Use an empty substitution string to delete the root string from the /etc/passwd file entirely:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed 's/root//g'
:x:0:0::/:/bin/sh
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
</pre>
<h2>Address Substitution:</h2>
<p>If you want to substitute the string sh with the string quiet only on line 10, you can specify it as follows:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed '10s/sh/quiet/g'
root:x:0:0:root user:/root:/bin/sh
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
bin:x:2:2:bin:/bin:/bin/sh
sys:x:3:3:sys:/dev:/bin/sh
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/bin/sh
man:x:6:12:man:/var/cache/man:/bin/sh
mail:x:8:8:mail:/var/mail:/bin/sh
news:x:9:9:news:/var/spool/news:/bin/sh
backup:x:34:34:backup:/var/backups:/bin/quiet
</pre>
<p>Similarly, to do an address range substitution, you could do something like the following:</p>
<pre class="prettyprint">
$ cat /etc/passwd | sed '1,5s/sh/quiet/g'
root:x:0:0:root user:/root:/bin/quiet
daemon:x:1:1:daemon:/usr/sbin:/bin/quiet
bin:x:2:2:bin:/bin:/bin/quiet
sys:x:3:3:sys:/dev:/bin/quiet
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/bin/sh
man:x:6:12:man:/var/cache/man:/bin/sh
mail:x:8:8:mail:/var/mail:/bin/sh
news:x:9:9:news:/var/spool/news:/bin/sh
backup:x:34:34:backup:/var/backups:/bin/sh
</pre>
<p>As you can see from the output, the first five lines had the string sh changed to quiet, but the rest of the lines were left untouched.</p>
<h2>The Matching Command:</h2>
<p>You would use <b>p</b> option along with <b>-n</b> option to print all the matching  lines as follows:</p>
<pre class="prettyprint">
$ cat testing | sed -n '/root/p'
root:x:0:0:root user:/root:/bin/sh
[root@ip-72-167-112-17 amrood]# vi testing
root:x:0:0:root user:/root:/bin/sh
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
bin:x:2:2:bin:/bin:/bin/sh
sys:x:3:3:sys:/dev:/bin/sh
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/bin/sh
man:x:6:12:man:/var/cache/man:/bin/sh
mail:x:8:8:mail:/var/mail:/bin/sh
news:x:9:9:news:/var/spool/news:/bin/sh
backup:x:34:34:backup:/var/backups:/bin/sh
</pre>
<h2>Using Regular Expression:</h2>
<p>While matching pattern, you can use regular expression which provides more flexibility.</p>
<p>Check following example which matches all the lines starting with <i>daemon</i> and then deleting them:</p>
<pre class="prettyprint">
$ cat testing | sed '/^daemon/d'
root:x:0:0:root user:/root:/bin/sh
bin:x:2:2:bin:/bin:/bin/sh
sys:x:3:3:sys:/dev:/bin/sh
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/bin/sh
man:x:6:12:man:/var/cache/man:/bin/sh
mail:x:8:8:mail:/var/mail:/bin/sh
news:x:9:9:news:/var/spool/news:/bin/sh
backup:x:34:34:backup:/var/backups:/bin/sh
</pre>
<p>Following is the example which would delete all the lines ending with <b>sh</b>:</p>
<pre class="prettyprint">
$ cat testing | sed '/sh$/d'
sync:x:4:65534:sync:/bin:/bin/sync
</pre>
<p>The following table lists four special characters that are very useful in regular expressions.</p>
<table class="src">
<tr>
<th style="width:20%">Character</th><th style="width:80%">Description</th>
</tr>
<tr><td>^</td><td>Matches the beginning of lines.</td></tr>
<tr><td>$</td><td>Matches the end of lines.</td></tr>
<tr><td>.</td><td>Matches any single character.</td></tr>
<tr><td>*</td><td>Matches zero or more occurrences of the previous character</td></tr>
<tr><td>[chars]</td><td>Matches any one of the characters given in chars, where chars is a sequence of characters. You can use the - character to indicate a range of characters.</td></tr>
</table>
<h2>Matching Characters:</h2>
<p>Look at a few more expressions to demonstrate the use of the metacharacters. For example, the following pattern:</p>
<table class="src">
<tr>
<th style="width:20%">Expression</th><th style="width:80%">Description</th>
</tr>
<tr><td>/a.c/</td><td>Matches lines that contain strings such as a+c, a-c, abc, match, and a3c, whereas the pattern</td></tr>
<tr><td>/a*c/</td><td>Matches the same strings along with strings such as ace, yacc, and arctic.</td></tr>
<tr><td>/[tT]he/</td><td>Matches the string The and the:</td></tr>
<tr><td>/^$/</td><td>Matches Blank lines</td></tr>
<tr><td>/^.*$/</td><td>Matches an entire line whatever it is.</td></tr>
<tr><td>/ */</td><td>Matches one or more spaces</td></tr>
<tr><td>/^$/</td><td>Matches Blank lines</td></tr>
</table>
<p>Following table shows some frequently used sets of characters:</p>
<table class="src">
<tr>
<th style="width:20%">Set</th><th style="width:80%">Description</th>
</tr>
<tr><td>[a-z]</td><td>Matches a single lowercase letter</td></tr>
<tr><td>[A-Z]</td><td>Matches a single uppercase letter</td></tr>
<tr><td>[a-zA-Z]</td><td>Matches a single letter</td></tr>
<tr><td>[0-9]</td><td>Matches a single number</td></tr>
<tr><td>[a-zA-Z0-9]</td><td>Matches a single letter or number</td></tr>
</table>
<h2>Character Class Keywords:</h2>
<p>Some special keywords are commonly available to regexps, especially GNU utilities that employ regexps. These are very useful for sed regular expressions as they simplify things and enhance readability.</p>
<p>For example, the characters a through z as well as the characters A through Z constitute one such class of characters that has the keyword [[:alpha:]]</p>
<p>Using the alphabet character class keyword, this command prints only those lines in the /etc/syslog.conf file that start with a letter of the alphabet:</p>
<pre class="prettyprint">
$ cat /etc/syslog.conf | sed -n '/^[[:alpha:]]/p'
authpriv.*                         /var/log/secure
mail.*                             -/var/log/maillog
cron.*                             /var/log/cron
uucp,news.crit                     /var/log/spooler
local7.*                           /var/log/boot.log
</pre>
<p>The following table is a complete list of the available character class keywords in GNU sed.</p>
<table class="src">
<tr>
<th style="width:30%">Character Class</th><th style="width:70%">Description</th>
</tr>
<tr><td>[[:alnum:]]</td><td>Alphanumeric [a-z A-Z 0-9]</td></tr>
<tr><td>[[:alpha:]]</td><td>Alphabetic [a-z A-Z]</td></tr>
<tr><td>[[:blank:]]</td><td>Blank characters (spaces or tabs)</td></tr>
<tr><td>[[:cntrl:]]</td><td>Control characters</td></tr>
<tr><td>[[:digit:]]</td><td>Numbers [0-9]</td></tr>
<tr><td>[[:graph:]]</td><td>Any visible characters (excludes whitespace)</td></tr>
<tr><td>[[:lower:]]</td><td>Lowercase letters [a-z]</td></tr>
<tr><td>[[:print:]]</td><td>Printable characters (noncontrol characters)</td></tr>
<tr><td>[[:punct:]]</td><td>Punctuation characters</td></tr>
<tr><td>[[:space:]]</td><td>Whitespace</td></tr>
<tr><td>[[:upper:]]</td><td>Uppercase letters [A-Z]</td></tr>
<tr><td>[[:xdigit:]]</td><td>Hex digits [0-9 a-f A-F]</td></tr>
</table>
<h2>Aampersand Referencing:</h2>
<p>The sed metacharacter &amp; represents the contents of the pattern that was matched. For instance, say you have a file called phone.txt full of phone numbers, such as the following:</p>
<pre class="prettyprint">
5555551212
5555551213
5555551214
6665551215
6665551216
7775551217
</pre>
<p>You want to make the area code (the first three digits) surrounded by parentheses for easier reading. To do this, you can use the ampersand replacement character, like so:</p>
<pre class="prettyprint">
$ sed -e 's/^[[:digit:]][[:digit:]][[:digit:]]/(&amp;)/g' phone.txt
(555)5551212
(555)5551213
(555)5551214
(666)5551215
(666)5551216
(777)5551217
</pre>
<p>Here in pattern part you are matching first 3 digits and then using &amp; you are replacing those 3 digits with surrounding parentheses.</p>
<h2>Using Multiple sed Commands:</h2>
<p>You can use multiple sed commands in a single sed command as follows:</p>
<pre class="prettyprint">
$ sed -e 'command1' -e 'command2' ... -e 'commandN' files
</pre>
<p>Here command1 through commandN are sed commands of the type discussed previously. These commands are applied to each of the lines in the list of files given by files.</p>
<p>Using the same mechanism, we can write above phone number example as follows:</p>
<pre class="prettyprint">
$ sed -e 's/^[[:digit:]]\{3\}/(&amp;)/g'  \
                      -e 's/)[[:digit:]]\{3\}/&amp;-/g' phone.txt
(555)555-1212
(555)555-1213
(555)555-1214
(666)555-1215
(666)555-1216
(777)555-1217
</pre>
<p><b>Note:</b> In the above example, instead of repeating the character class keyword [[:digit:]] three times, you replaced it with \{3\}, which means to match the preceding regular expression three times. Here I used \ to give line break you should remove this before running this command.</p>
<h2>Back References:</h2>
<p>The ampersand metacharacter is useful, but even more useful is the ability to define specific regions in a regular expressions so you can reference them in your replacement strings. By defining specific parts of a regular expression, you can then refer back to those parts with a special reference character.</p>
<p>To do back references, you have to first define a region and then refer back to that region. To define a region you insert backslashed parentheses around each region of interest. The first region that you surround with backslashes is then referenced by \1, the second region by \2, and so on.</p>
<p>Assuming phone.txt has the following text:</p>
<pre class="prettyprint">
(555)555-1212
(555)555-1213
(555)555-1214
(666)555-1215
(666)555-1216
(777)555-1217
</pre>
<p>Now try the following command:</p>
<pre class="prettyprint">
$ cat phone.txt | sed 's/\(.*)\)\(.*-\)\(.*$\)/Area \
                       code: \1 Second: \2 Third: \3/'
Area code: (555) Second: 555- Third: 1212
Area code: (555) Second: 555- Third: 1213
Area code: (555) Second: 555- Third: 1214
Area code: (666) Second: 555- Third: 1215
Area code: (666) Second: 555- Third: 1216
Area code: (777) Second: 555- Third: 1217
</pre>
<p><b>Note:</b>In the above example each regular expression inside the parenthesis would be back referenced by \1, \2 and so on.  Here I used \ to give line break you should remove this before running this command.</p>
<hr />
<div class="pre-btn">
<a href="unix-manpage-help.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/unix-regular-expressions.pdf" alt="Unix - Regular Expressions with SED" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="unix-file-system.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="../jsp/index.htm" target="_top">JSP </a> |
<a href="../servlets/index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="../struts_2/index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/unix/unix-regular-expressions.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 20:03:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>