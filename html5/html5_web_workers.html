<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.tutorialspoint.com/html5/html5_web_workers.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>HTML5 - Web Workers</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="keywords" content="HTML 5, Web Workers, Tutorials, Forms-2 Learning, Beginners,Canvas, Audio, Video, New Semantic Elements, Geolocation, Persistent Local Storage, Web Storage, Web SQL, Forms 2.0, Microdata and Drag and Drop" />
<meta name="description" content="HTML5 Web Workers - Learning HTML 5 in simple and easy steps with examples covering 2D Canvas, Audio, Video, New Semantic Elements, Geolocation, Persistent Local Storage, Web Storage, Web SQL, Forms 2.0, Microdata and Drag and Drop" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base  />
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript"> 
</script>
<script type="text/javascript"> 
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<a name="top"></a>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>HTML-5 Tutorial</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="index.html" >HTML5 Home</a></li>
<li><a class="left" target="_top" href="html5_overview.html" >HTML5 Overview</a></li>
<li><a class="left" target="_top" href="html5_syntax.html" >HTML5 Syntax</a></li>
<li><a class="left" target="_top" href="html5_attributes.html" >HTML5 Attributes</a></li>
<li><a class="left" target="_top" href="html5_events.html" >HTML5 Events</a></li>
<li><a class="left" target="_top" href="html5_web_forms2.html" >HTML5 Web Forms 2.0</a></li>
<li><a class="left" target="_top" href="html5_svg.html" >HTML5 SVG</a></li>
<li><a class="left" target="_top" href="html5_mathml.html" >HTML5 MathML</a></li>
<li><a class="left" target="_top" href="html5_web_storage.html">HTML5 Web Storage</a></li>
<li><a class="left" target="_top" href="html5_web_sql.html" >HTML5 Web SQL</a></li>
<li><a class="left" target="_top" href="html5_server_sent_events.html">HTML5 Server-Sent Events</a></li>
<li><a class="left" target="_top" href="html5_websocket.html">HTML5 WebSocket</a></li>
<li><a class="left" target="_top" href="html5_canvas.html">HTML5 Canvas</a></li>
<li><a class="left" target="_top" href="html5_audio_video.html">HTML5 Audio &amp; Video</a></li>
<li><a class="left" target="_top" href="html5_geolocation.html">HTML5 Geolocation</a></li>
<li><a class="left" target="_top" href="html5_microdata.html">HTML5 Microdata</a></li>
<li><a class="left" target="_top" href="html5_drag_drop.html">HTML5 Drag and drop</a></li>
<li><a class="left" target="_top" href="html5_web_workers.html"><b>HTML5 Web Workers</b></a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>HTML5 Tag Reference</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="html5_tags.html" >HTML5 Tags Reference</a></li>
<li><a class="left" target="_top" href="html5_deprecated_tags.html" >HTML5 Deprecated Tags</a></li>
<li><a class="left" target="_top" href="html5_new_tags.html" >HTML5 New Tags</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>HTML5 Useful References</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="html5_quick_guide.html" >HTML5 Quick Guide</a></li>
<li><a class="left" target="_top" href="html5_color_names.html" >HTML5 Color Names</a></li>
<li><a class="left" target="_top" href="html5_fonts.html" >HTML5 Fonts Reference</a></li>
<li><a class="left" target="_top" href="html5_url_encoding.html" >HTML5 URL Encoding</a></li>
<li><a class="left" target="_top" href="html5_entities.html" >HTML5 Entities</a></li>
<li><a class="left" target="_top" href="html5_character_encodings.html" >HTML5 Char Encodings</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>HTML5 Tools</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="html5_modernizr.html" >HTML5 Modernizr</a></li>
<li><a class="left" target="_top" href="html5_validation.html" >HTML5 Validation</a></li>
<li><a class="left" target="_top" href="html5_editor.html" >HTML5 Online Editor</a></li>
<li><a class="left" target="_top" href="html5_color_code_builder.html" >Color Code Builder</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>HTML5 Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="html5_useful_resources.html" >HTML5 Useful Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../forums/index.html">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle" cellpadding="5" cellspacing="0">
<tr>
<td>
<!-- PRINTING STARTS HERE -->
<h1>HTML5 Web Workers</h1>
<hr />
<a href="html5_drag_drop.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="html5_tags.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
<hr />
<p>JavaScript was designed to run in a single-threaded environment, meaning multiple scripts cannot run at the same time. Consider a situation where you need to handle UI events, query and process large amounts of API data, and manipulate the DOM.</p>
<p>Javascript will hang your browser in situation where CPU utilization is high. Let us take a simple example where Javascript goes through a big loop:</p>
<table  class="src" cellpadding="5">
<tr><td><pre>
&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Big for loop&lt;/title&gt;
  &lt;script&gt;
      function bigLoop(){
         for (var i = 0; i &lt;= 10000000000; i += 1){
            var j = i;
         }
         alert("Completed " + j + "iterations" );
      }
      function sayHello(){
         alert("Hello sir...." );
      }
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;input type="button" onclick="bigLoop();" value="Big Loop" /&gt;
   &lt;input type="button" onclick="sayHello();" value="Say Hello" /&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></td></tr>
</table>
<p>Try above example online to see the result - <a href="../cgi-bin/practice68ff.html?file=html5-60.htm" target="_blank">Try online</a> using any browser. When you click <i>Big Loop</i> button it displays following result in Firefox:</p>
<center>
<img src="../images/bigloop.html" alt="Big Loop" />
</center>
<h1>What is Web Workers?</h1>
<p>The situation explained above can be handled using <b>Web Workers</b> who will do all the computationally expensive tasks without interrupting the user interface and typically run on separate threads.</p>
<p>Web Workers allow for long-running scripts that are not interrupted by scripts that respond to clicks or other user interactions, and allows long tasks to be executed without yielding to keep the page responsive.</p>
<p>Web Workers are background scripts and they are relatively heavy-weight, and are not intended to be used in large numbers. For example, it would be inappropriate to launch one worker for each pixel of a four megapixel image.</p>
<p>When a script is executing inside a Web Worker it cannot access the web page's window object (window.document), which means that Web Workers don't have direct access to the web page and the DOM API. Although Web Workers cannot block the browser UI, they can still consume CPU cycles and make the system less responsive.</p>
<h1>How Web Workers Work?</h1>
<p>Web Workers are initialized with the URL of a JavaScript file, which contains the code the worker will execute. This code sets event listeners and communicates with the script that spawned it from the main page. Following is the simple syntax:</p>
<table  class="src" cellpadding="5">
<tr><td><pre>
var worker = new Worker('bigLoop.js');
</pre></td></tr>
</table>
<p>If the specified javascript file exists, the browser will spawn a new worker thread, which is downloaded asynchronously. If the path to your worker returns an 404, the worker will fail silently.</p>
<p>If your application has multiple supporting javascript files, you can import them <b>importScripts()</b> method which takes file name(s) as argument separated by comma as follows:</p>
<table  class="src" cellpadding="5">
<tr><td><pre>
importScripts("helper.js", "anotherHelper.js");
</pre></td></tr>
</table>
<p>Once the Web Worker is spawned, communication between web worker and its parent page is done using the <b>postMessage()</b> method. Depending on your browser/version, postMessage() can accept either a string or JSON object as its single argument.</p>
<p>Message passed by Web Worker is accessed using <b>onmessage</b> event in the main page. Now let us write our bigLoop example using Web Worker. Below is the main page (hello.htm) which will spawn a web worker to execute the loop and to return the final value of variable <b>j</b>:</p>
<table  class="src" cellpadding="5">
<tr><td><pre>
&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Big for loop&lt;/title&gt;
  &lt;script&gt;
      var worker = new Worker('bigLoop.js');
      worker.onmessage = function (event) {
        alert("Completed " + event.data + "iterations" );
      };

      function sayHello(){
         alert("Hello sir...." );
      }
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;input type="button" onclick="sayHello();" value="Say Hello"/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></td></tr>
</table>
<p>Following is the content of bigLoop.js file. This makes use of <b>postMessage()</b> API to pass the communication back to main page:</p>
<table  class="src" cellpadding="5">
<tr><td><pre>
for (var i = 0; i &lt;= 1000000000; i += 1){
   var j = i;
}
postMessage(j);
</pre></td></tr>
</table>
<p>Now let us keep hello.htm and bigLoop.js file in the same directory and try to access hello.htm using latest version of either Safari or Firefox.</p>
<p>Try above example online to see the result - <a href="../cgi-bin/practice0046.html?file=html5-61.htm" target="_blank">Try online</a> using latest version of either Safari or Firefox.</p>
<h1>Stopping Web Workers:</h1>
<p>Web Workers don't stop by themselves but the page that started them can stop them by calling <b>terminate()</b> method.</p>
<table  class="src" cellpadding="5">
<tr><td><pre>
worker.terminate();
</pre></td></tr>
</table>
<p>A terminated Web Worker will no longer respond to messages or perform any additional computations. You cannot restart a worker; instead, you can create a new worker using the same URL.</p>
<h1>Handling Errors:</h1>
<p>The following shows an example of an error handling function in a Web Worker JavaScript file that logs errors to the console. With error handling code, above example would become as following:</p>
<table  class="src" cellpadding="5">
<tr><td><pre>
&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Big for loop&lt;/title&gt;
  &lt;script&gt;
      var worker = new Worker('bigLoop.js');
      worker.onmessage = function (event) {
        alert("Completed " + event.data + "iterations" );
      };

      worker.onerror = function (event) {
         console.log(event.message, event);
      };

      function sayHello(){
         alert("Hello sir...." );
      }
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;input type="button" onclick="sayHello();" value="Say Hello"/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></td></tr>
</table>
<h1>Checking for Browser Support:</h1>
<p>Following is the syntax to detect a Web Worker feature support available in a browser:</p>
<table  class="src" cellpadding="5">
<tr><td><pre>
&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Big for loop&lt;/title&gt;
  &lt;script src="/js/modernizr-1.5.min.js"&gt;&lt;/script&gt;
  &lt;script&gt;
   if (Modernizr.webworkers) {
      alert("Congratulation!! you have web workers support." );
   }else{
      alert("Sorry!! you do not have web workers support." );
   }
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;p&gt;Checking for Browser Support for web workers&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></td></tr>
</table>
<p>Try above example online to see the result - <a href="../cgi-bin/practice516a.html?file=html5-62.htm" target="_blank">Try online</a> using different browsers.</p>
<br />
<hr />
<a href="html5_drag_drop.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="html5_tags.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversion651f.html?tutorial=html5&amp;file=html5_web_workers.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/html5/html5_web_workers.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
