<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from www.tutorialspoint.com/ruby-on-rails-2.1/rails-routes.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Ruby on Rails 2.1 Routes System</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="Keywords" content="Learning, Ruby, rails, strengths, framework, installation, examples, RubyGems, resources, Guide, actionpack, actionview, basics, directory, structure, advance, activerecord, libraries, Model, View, Controller, Embeded Ruby, Erb, Rolling, Metaprogramming,Built-in, testing, David, Black, Hansson, Heinemeier, RAA, Scaffolding" />
<meta name="Description" content="Ruby on Rails 2.1 Routes System -  Learn Ruby on Rails in simple and easy steps using this Guide/Book/Reference Manual. You will learn its installation, framework, strengths with examples and you will learn about active resources, actionpack, actionview, activerecord, Heinemeier, Scaffolding, Controller, Heinemeier, Hansson etc." />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base  />
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>Learning Ruby on Rails 2.1</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="index.html">Rails 2.1 Home</a></li>
<li><a class="left" target="_top" href="rails-preliminary.html">Rails 2.1 Preliminary</a></li>
<li><a class="left" target="_top" href="rails-introduction.html">Rails 2.1 Introduction</a></li>
<li><a class="left" target="_top" href="rails-installation.html">Rails 2.1 Installation</a></li>
<li><a class="left" target="_top" href="rails-framework.html">Rails 2.1 Framework</a></li>
<li><a class="left" target="_top" href="rails-directory-structure.html">Rails 2.1 Dir Structure</a></li>
<li><a class="left" target="_top" href="rails-examples.html">Rails 2.1 Examples</a></li>
<li><a class="left" target="_top" href="rails-database-setup.html">Rails 2.1 Database Setup</a></li>
<li><a class="left" target="_top" href="rails-active-records.html">Rails 2.1 Active Records</a></li>
<li><a class="left" target="_top" href="rails-migrations.html">Rails 2.1 Migrations</a></li>
<li><a class="left" target="_top" href="rails-controllers.html">Rails 2.1 Controllers</a></li>
<li><a class="left" target="_top" href="rails-views.html">Rails 2.1 Views</a></li>
<li><a class="left" target="_top" href="rails-layouts.html">Rails 2.1 Layouts</a></li>
<li><a class="left" target="_top" href="rails-scaffolding.html">Rails 2.1 Scaffolding</a></li>
<li><a class="left" target="_top" href="rails-and-ajax.html">Rails 2.1 and AJAX</a></li>
<li><a class="left" target="_top" href="rails-file-uploading.html">Rails 2.1 Uploads Files</a></li>
<li><a class="left" target="_top" href="rails-send-emails.html">Rails 2.1 Sends Emails</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Advanced Ruby on Rails 2.1</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="rails-and-rmagick.html">Rails 2.1 RMagick Guide</a></li>
<li><a class="left" target="_top" href="rails-http-basic-authentication.html">Rails 2.1 Basic HTTP Auth</a></li>
<li><a class="left" target="_top" href="rails-exception-handling.html">Rails 2.1 Error Handling</a></li>
<li><a class="left" target="_top" href="rails-routes.html"><b>Rails 2.1 Routes System</b></a></li>
<li><a class="left" target="_top" href="rails-unit-testing.html">Rails 2.1 Unit Testing</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby on Rails Quick Guide</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="rails-quick-guide.html" >Ruby on Rails Quick Guide</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby Tutorial</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../ruby/index-2.html" >Ruby Tutorial</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby on Rails Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="rails-resources.html" >Ruby on Rails Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top" align="left" width="100%">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../forums/index.html">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:10px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle"  cellpadding="5" cellspacing="0">
<tr>
<td align="left">
<!-- PRINTING STARTS HERE -->
<h1>Ruby on Rails 2.1 Routes System</h1>
<hr />
<a href="rails-exception-handling.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="rails-unit-testing.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<!-- AddThis Bookmark Button END -->
<hr />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<p>Rails parses the URL to determine the controller, action, and parameters for the request. With Rails routing, parts of the URL
can specify additional parameters, and the entire routing process is under your control. Routing rules work the same on any
web server.</p>
<p>The config/routes.rb file is at the heart of the Rails routing system. This file contains rules that try to match the URL path of a request and determine where to direct that request. The rules are tested in the order that they're defined in the file. The first rule to match a request's URL path determines the fate of that request.</p>
<p>The routing system actually does two things:</p>
<ul>
<li><p>It maps requests to action methods inside the controllers.</p></li>
<li><p>It writes URLs for you for use as arguments to methods like link_to, redirect_to, and form_tag.</p></li>
</ul>
<p>Thus, the routing system knows how to turn a visitor's request URL into a controller/action sequence. It also knows how to manufacture URL strings based on your specifications.</p>
<p>Consider the following route, installed by Rails when you generate your application:</p>
<table cellpadding="5" class="src"><tr><td><pre>
map.connect ':controller/:action/:id'
</pre></td></tr></table>
<p>This route states that it expects requests to consist of a <b>:controller</b> followed by an <b>:action</b> that in turn is fed some <b>:id</b>.</p>
<p>So if you get an incoming request for "http://localhost:3000/book/edit/2", then it will map as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
params = { :controller => 'book',
           :action     => 'edit',
           :id         => '2'
          }
</pre></td></tr></table>
<p>Thus the default routing (if you don't modify the routing rules) is </p>
<table cellpadding="5" class="src"><tr><td><pre>
http://&lt;base-url&gt;/&lt;controller&gt;/&lt;action&gt;/&lt;id&gt;
</pre></td></tr></table>
<p>So a URL like http://www.example.com/book/update/20 calls the <b>update</b> method (the action) in the <b>BooksController</b> class (the controller) with an <b>id</b> parameter set to the value 20.</p>
<p>Following will set up <i>book</i> as the default controller if no other is specified. This means visiting '/' would invoke the <b>book</b> controller.</p>
<table cellpadding="5" class="src"><tr><td><pre>
 ActionController::Routing:Routes.draw do |map|
   map.connect ':controller/:action/:id', :controller => 'book'
 end
</pre></td></tr></table>
<p>You can also define a default action if no action is specified in the given URL:</p>
<table cellpadding="5" class="src"><tr><td><pre>
 ActionController::Routing:Routes.draw do |map|
   map.connect ':controller/:action/:id', 
                :action => 'edit', :controller => 'book'
 end
</pre></td></tr></table>
<p>Now you can all edit method inside the book controller to edit book with ID as 20 as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
http://localhost:3000/2
</pre></td></tr></table>
<h1>Route priority:</h1>
<p>Routes have priority defined by the order of appearance of the routes in the routes.rb file. The priority goes from top to bottom.</p>
<p>The last route in that file is at the lowest priority and will be applied last. If no route matches, 404 is returned.</p>
<h1>Modifying the Default Route:</h1>
<p>You can change default route as per your requirement. In the following example we are going to interchange <i>controller</i> and <i>action</i> as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
# Install the default route as the lowest priority.
map.connect ':action/:controller/:id'
</pre></td></tr></table>
<p>Now to call <i>action</i> from the given <i>controller</i> you would have to write your URL as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
http://localhost:3000/action/controller/id
</pre></td></tr></table>
<p>It's not particularly logical to put <i>action</i> and <i>controller</i> in such sequence. The original default (the default default) route is better and recommended.</p>
<h1>The Ante-Default Route:</h1>
<p>The 'ante-default' route) looks like this:</p>
<table cellpadding="5" class="src"><tr><td><pre>
map.connect ':controller/:action/:id<b>.:format</b>'
</pre></td></tr></table>
<p>The <b>.:format</b> at the end matches a literal dot and a wildcard "format" value after
the <b>id</b> field. That means it will match, for example, a URL like this:</p>
<table cellpadding="5" class="src"><tr><td><pre>
http://localhost:3000/book/show/3.xml
</pre></td></tr></table>
<p>Here, inside the controller action your <b>params[:format]</b> will be set to xml.</p>
<h1>The Empty Route:</h1>
<p>The empty route is sort of the opposite of the default route. In a newly generated routes.rb file, the empty route is commented out, because there's no universal or reasonable default for it. You need to decide what this <i>nothing</i> URL should do for each application you write.</p>
<p>Here are some examples of fairly common empty route rules:</p>
<table cellpadding="5" class="src"><tr><td><pre>
map.connect '', :controller => "main", :action => "welcome"
map.connect '', :controller => "main"
</pre></td></tr></table>
<p>Here is the explaination of the above rules:</p>
<ul>
<li><p>The first one will search for welcome action inside main controller even if you type just <i>http://localhost:3000</i></p></li>
<li><p>That last one will connect to http://localhost:3000/main/index. Here <i>index</i> is the default action  when there's none specified.</p></li>
</ul>
<p>Rails 2.0 introduces a mapper method named root which becomes the proper way to define the empty route for a Rails application, like this:</p>
<table cellpadding="5" class="src"><tr><td><pre>
map.root :controller => "homepage"
</pre></td></tr></table>
<p>Defining the empty route gives people something to look at when they connect to your site with nothing but the domain name.</p>
<h1>Named routes:</h1>
<p>As you continue developing your application, you will probably have a few links that you use throughout your application. For example, you will probably often be putting a link back to the main listings page. Instead of having to add the following line throughout your application, you can instead create a named route that enables you to link to a shorthand version of that link:</p>
<table cellpadding="5" class="src"><tr><td><pre>
link_to 'Home', :controller => 'classified', :action => 'list'
</pre></td></tr></table>

<p>You can define named routes as follows. Here instead of using <i>connect</i>, you are using a unique name that you can define. In this case, the route is called <i>home</i>. The rest of the route looks similar to the others you have created.</p>
<table cellpadding="5" class="src"><tr><td><pre>
map.home '', :controller => 'classified', :action => 'list'
</pre></td></tr></table>
<p>Now you can use this in the controllers or views as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
&lt;%= link_to 'Back', home_url %&gt;
</pre></td></tr></table>
<p>Here, instead of listing the <i>:controller</i> and <i>:action</i> to which you will be linking, you are instead putting the name of the route followed by _url. Your user shouldn't notice any difference. Named routing is merely a convenience for the Rails developer
to save some typing. Above case can be written without named route as follows:</p>
<table cellpadding="5" class="src"><tr><td><pre>
&lt;%= link_to 'Back', {:action => 'list'} %&gt;
</pre></td></tr></table>
<h1>Pretty URLs:</h1>
<p>Routes can generate pretty URLs. For example:</p>
<table cellpadding="5" class="src"><tr><td><pre>
map.connect 'articles/:year/:month/:day',
             :controller => 'articles',
             :action     => 'find_by_date',
             :year       => /\d{4}/,
             :month      => /\d{1,2}/,
             :day        => /\d{1,2}/

 # Using the route above, the url below maps to:
 # params = {:year => '2005', :month => '11', :day => '06'}
 # http://localhost:3000/articles/2005/11/06
</pre></td></tr></table>
<p>For a more detail on Routes please go through the link <a href="http://api.rubyonrails.org/classes/ActionController/Routing.html" target="_blank">ActionController::Routing </a></p>
<br />
<hr />
<a href="rails-exception-handling.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="rails-unit-testing.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversion59fd.html?tutorial=ruby-on-rails-2.1&amp;file=rails-routes.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/ruby-on-rails-2.1/rails-routes.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:01:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
