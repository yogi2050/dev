<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from www.tutorialspoint.com/unix_system_calls/shmat.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:04:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>shmop() - Unix, Linux System Call</title>
<meta name="Description" Content="shmop() - Unix, Linux System Calls Manual Pages (Manpages) ,  Learning fundamentals of UNIX in simple and easy steps : A beginner's tutorial containing complete knowledge of Unix Korn  and Bourne Shell and Programming, Utilities, File System, Directories, Memory Management, Special Variables, vi editor, Processes" />
<meta name="Keywords" content="Unix, Tutorials, Learning, Operating, System, OS, Beginners, Basics, System Calls, Korn, Bourne, Shell,Programming, Utilities, File System, Directories, Memory Management, Special Variables, vi editor, Processes" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base  />
<link rel="stylesheet" type="text/css" href="../tp.css" />
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<a name="top"></a>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="../index-2.html"><img src="../images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="search">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>Unix for Beginners</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/index.html">Unix - Home</a></li>
<li><a class="left" target="_top" href="../unix/unix-getting-started.html">Unix - Getting Started</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-management.html">Unix - File Management</a></li>
<li><a class="left" target="_top" href="../unix/unix-directories.html">Unix - Directories</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-permission.html">Unix - File Permission</a></li>
<li><a class="left" target="_top" href="../unix/unix-environment.html">Unix - Environment</a></li>
<li><a class="left" target="_top" href="../unix/unix-basic-utilities.html">Unix - Basic Utilities</a></li>
<li><a class="left" target="_top" href="../unix/unix-pipes-filters.html">Unix - Pipes &amp; Filters</a></li>
<li><a class="left" target="_top" href="../unix/unix-processes.html">Unix - Processes</a></li>
<li><a class="left" target="_top" href="../unix/unix-communication.html">Unix - Communication</a></li>
<li><a class="left" target="_top" href="../unix/unix-vi-editor.html">Unix - The vi Editor</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Shell Programming</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-shell.html">Unix - What is Shell?</a></li>
<li><a class="left" target="_top" href="../unix/unix-using-variables.html">Unix - Using Variables</a></li>
<li><a class="left" target="_top" href="../unix/unix-special-variables.html">Unix - Special Variables</a></li>
<li><a class="left" target="_top" href="../unix/unix-using-arrays.html">Unix - Using Arrays</a></li>
<li><a class="left" target="_top" href="../unix/unix-basic-operators.html">Unix - Basic Operators</a></li>
<li><a class="left" target="_top" href="../unix/unix-decision-making.html">Unix - Decision Making</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-loops.html">Unix - Shell Loops</a></li>
<li><a class="left" target="_top" href="../unix/unix-loop-control.html">Unix - Loop Control</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-substitutions.html">Unix - Shell Substitutions</a></li>
<li><a class="left" target="_top" href="../unix/unix-quoting-mechanisms.html">Unix - Quoting Mechanisms</a></li>
<li><a class="left" target="_top" href="../unix/unix-io-redirections.html">Unix - IO Redirections</a></li>
<li><a class="left" target="_top" href="../unix/unix-shell-functions.html">Unix - Shell Functions</a></li>
<li><a class="left" target="_top" href="../unix/unix-manpage-help.html">Unix - Manpage Help</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Advanced Unix</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-regular-expressions.html">Unix - Regular Expressions</a></li>
<li><a class="left" target="_top" href="../unix/unix-file-system.html">Unix - File System Basics</a></li>
<li><a class="left" target="_top" href="../unix/unix-user-administration.html">Unix - User Administration</a></li>
<li><a class="left" target="_top" href="../unix/unix-system-performance.html">Unix - System Performance</a></li>
<li><a class="left" target="_top" href="../unix/unix-system-logging.html">Unix - System Logging</a></li>
<li><a class="left" target="_top" href="../unix/unix-signals-traps.html">Unix - Signals and Traps</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Useful References</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-useful-commands.html">Unix - Useful Commands</a></li>
<li><a class="left" target="_top" href="../unix/unix-quick-guide.html">Unix - Quick Guide</a></li>
<li><a class="left" target="_top" href="../unix/unix-builtin-functions.html">Unix - Builtin Functions</a></li>
<li><a class="left" target="_top" href="index.html"><b>Unix - System Calls</b></a></li>
<li><a class="left" target="_top" href="../unix_commands/index.html">Unix - Commands List</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Unix Useful Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../unix/unix-useful-resources.html">Unix Useful Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a class="left" target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2013 TutorialsPoint.COM </small>
</td>
<td valign="top">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../index-2.html">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../references.html">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../forums/index.html">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="../about/index.html">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle" cellpadding="5" cellspacing="0">
<tr>
<td>
<!-- PRINTING STARTS HERE -->
<h1>shmop() - Unix, Linux System Call</h1>
<hr />
<a href="index.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="index.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" rel="nofollow" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="../images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>
<script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>  
<!-- AddThis Bookmark Button END -->
<br />
<br />
<hr/><div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
<hr />
<h1 class="manpages">NAME</h1>
shmop - shared memory operations
<h1 class="manpages">SYNOPSIS</h1>
<table class="src" cellpadding="5" cellspacing="5">
<tr><td><pre>
<b></b> 
#include &lt;sys/types.h&gt;
<b></b> 
#include &lt;sys/shm.h&gt;
</pre></td></tr>
</table>
<p>
<b>void *shmat(int </b><i>shmid</i><b>,</b> <b>const void *</b><i>shmaddr</i><b>,</b> <b>int </b><i>shmflg</i><b>);</b> <p>
<b>int shmdt(const void *</b><i>shmaddr</i><b>);</b> <h1 class="manpages">DESCRIPTION</h1>
<b>shmat</b>() attaches the shared memory segment identified by
<i>shmid</i> to the address space of the calling process.
The attaching address is specified by
<i>shmaddr</i> with one of the following criteria:
<p>
If
<i>shmaddr</i> is NULL,
the system chooses a suitable (unused) address at which to attach
the segment.
<p>
If
<i>shmaddr</i> isn&#146;t NULL
and
<b>SHM_RND</b> is specified in
<i>shmflg</i>, the attach occurs at the address equal to
<i>shmaddr</i> rounded down to the nearest multiple of
<b>SHMLBA</b>. Otherwise
<i>shmaddr</i> must be a page-aligned address at which the attach occurs.
<p>
If
<b>SHM_RDONLY</b> is specified in
<i>shmflg</i>, the segment is attached for reading and the process must have
read permission for the segment.
Otherwise the segment is attached for read and write
and the process must have read and write permission for the segment.
There is no notion of a write-only shared memory segment.
<p>
The (Linux-specific)
<b>SHM_REMAP</b> flag may be specified in
<i>shmflg</i> to indicate that the mapping of the segment should replace
any existing mapping in the range starting at
<i>shmaddr</i> and continuing for the size of the segment.
(Normally an
<b>EINVAL</b> error would result if a mapping already exists in this address range.)
In this case,
<i>shmaddr</i> must not be NULL.
<p>
The
<b>brk</b>(2)
value of the calling process is not altered by the attach.
The segment will automatically be detached at process exit.
The same segment may be attached as a read and as a read-write
one, and more than once, in the process&#146;s address space.
<p>
A successful
<b>shmat</b>() call updates the members of the
<b>shmid_ds</b> structure (see
<b>shmctl</b>(2))
associated with the shared memory segment as follows:
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td width=6%>

</td><td>
<i>shm_atime</i> is set to the current time.
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
<i>shm_lpid</i> is set to the process-ID of the calling process.
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
<i>shm_nattch</i> is incremented by one.
</td></tr>
<!-- Found tag IP -->
<tr><td colspan="2">
<b>shmdt</b>() detaches the shared memory segment located at the address specified by
<i>shmaddr</i> from the address space of the calling process.
The to-be-detached segment must be currently
attached with
<i>shmaddr</i> equal to the value returned by the attaching
<b>shmat</b>() call.
</td></tr>
<!-- Found tag IP -->
<tr><td colspan="2">
On a successful
<b>shmdt</b>() call the system updates the members of the
<i>shmid_ds</i> structure associated with the shared memory segment as follows:
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
<i>shm_dtime</i> is set to the current time.
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
<i>shm_lpid</i> is set to the process-ID of the calling process.
</td></tr>
<tr valign="top"><td width=6%>

</td><td>
<i>shm_nattch</i> is decremented by one.
If it becomes 0 and the segment is marked for deletion,
the segment is deleted.
</td></tr>
</table>
<h1 class="manpages">SYSTEM CALLS</h1>
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td>
<b>fork</b>() </td><td valign="bottom">
After a
<b>fork</b>() the child inherits the attached shared memory segments.
</td></tr>
<tr valign="top"><td>
<b>exec</b>() </td><td valign="bottom">
After an
<b>exec</b>() all attached shared memory segments are detached from the process.
</td></tr>
<tr valign="top"><td>
<b>exit</b>() </td><td valign="bottom">
Upon
<b>exit</b>() all attached shared memory segments are detached from the process.
</td></tr>
</table>
<h1 class="manpages">RETURN VALUE</h1>
On success
<b>shmat</b>() returns the address of the attached shared memory segment; on error
<i>(void *) -1</i> is returned, and
<i>errno</i> is set to indicate the cause of the error.
<p>
On success
<b>shmdt</b>() returns 0; on error -1 is returned, and
<i>errno</i> is set to indicate the cause of the error.
<h1 class="manpages">ERRORS</h1>
When
<b>shmat</b>() fails,
<i>errno</i> is set to one of the following:
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td>
<b>EACCES</b> </td><td valign="bottom">
The calling process does not have the required permissions for
the requested attach type, and does not have the
<b>CAP_IPC_OWNER</b> capability.
</td></tr>
<tr valign="top"><td>
<b>EINVAL</b> </td><td valign="bottom">
Invalid
<i>shmid</i> value, unaligned (i.e., not page-aligned and <b>SHM_RND</b> was not
specified) or invalid
<i>shmaddr</i> value, or failing attach at
<b>brk</b>(), or
<b>SHM_REMAP</b> was specified and
<i>shmaddr</i> was NULL.
</td></tr>
<tr valign="top"><td>
<b>ENOMEM</b> </td><td valign="bottom">
Could not allocate memory for the descriptor or for the page tables.
</td></tr>
<!-- PP ends table -->
</table>
When
<b>shmdt</b>() fails,
<i>errno</i> is set as follows:
<table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td>
<b>EINVAL</b> </td><td valign="bottom">
There is no shared memory segment attached at
<i>shmaddr</i>; or,
<i>shmaddr</i> is not aligned on a page boundary.
</td></tr>
</table>
<h1 class="manpages">NOTES</h1>
Using
<b>shmat</b>() with
<i>shmaddr</i> equal to NULL
is the preferred, portable way of attaching a shared memory segment.
Be aware that the shared memory segment attached in this way
may be attached at different addresses in different processes.
Therefore, any pointers maintained within the shared memory must be
made relative (typically to the starting address of the segment),
rather than absolute.
<p>
On Linux, it is possible to attach a shared memory segment even if it
is already marked to be deleted.
However, POSIX.1-2001 does not specify this behaviour and
many other implementations do not support it.
<p>
The following system parameter affects
<b>shmat</b>(): <table class="src" cellpadding="5" cellspacing="0" border="1">
<tr><th width="25%">Tag</th><th>Description</th></tr>
<tr valign="top"><td>
<b>SHMLBA</b> </td><td valign="bottom">
Segment low boundary address multiple.
Must be page aligned.
For the current implementation the
<b>SHMLBA</b> value is
<b>PAGE_SIZE</b>. </td></tr>
<!-- PP ends table -->
</table>
The implementation places no intrinsic limit on the per-process maximum
number of shared memory segments
(<b>SHMSEG</b>). <h1 class="manpages">CONFORMING TO</h1>
SVr4, POSIX.1-2001. 
<p>
In SVID 3 (or perhaps earlier)
the type of the <i>shmaddr</i> argument was changed from
<b>char *</b> into
<b>const void *</b>, and the returned type of <i>shmat</i>() from
<b>char *</b> into
<b>void *</b>. (Linux libc4 and libc5 have the
<b>char *</b> prototypes; glibc2 has
<b>void *</b>.) <h1 class="manpages">SEE ALSO</h1>
<ul>
<li><p><a href="brk.htm">brk (2)</a></p></li>
<li><p><a href="mmap.htm">mmap (2)</a></p></li>
<li><p><a href="shmctl.htm">shmctl (2)</a></p></li>
<li><p><a href="shmget.htm">shmget (2)</a></p></li>
</ul>
<br />
<hr />
<a href="index.html"><img alt="previous" border="0" src="../images/previous.gif" /></a>
<a href="index.html"><img alt="next" border="0" src="../images/next.gif" /></a>
<a href='../cgi-bin/printversion6929.html?tutorial=unix_system_calls&amp;file=shmop.htm' target="_blank">
<img src="../images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisements</u>
</p>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>

<!-- Mirrored from www.tutorialspoint.com/unix_system_calls/shmat.htm by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 15 Apr 2013 05:04:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
