<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_tiles.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:52:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Struts 2 and Tiles Integration</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Struts 2 and Tiles Integration with Examples - Learn what is Basic Model View and Controller Architecture along with Struts 2 in simple and easy steps starting from Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling and Annotations." />
<meta name="Keywords" content="Struts, Tutorials, Learning, Beginners, Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling, Annotations." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#5c83ba !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#5c83ba !important;
}
#topmenu
{
background-color:#121212 !important;
}
#leftcol ul.menu li.heading 
{
background:#5c83ba !important;
border:1px solid #121212 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1020px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index-2.html">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index-2.html" target="_top">HOME </a>
<a href="../java/index.html" target="_top">JAVA </a>
<a href="../php/index.html" target="_top">PHP </a>
<a href="../python/index.html" target="_top">Python </a>
<a href="../ruby/index.html" target="_top">Ruby </a>
<a href="../perl/index.html" target="_top">Perl </a>
<a href="../html/index.html" target="_top">HTML </a>
<a href="../css/index.html" target="_top">CSS </a>
<a href="../javascript/index.html" target="_top">Javascript </a>
<a href="../mysql/index.html" target="_top">MySQL </a>
<a href="../cplusplus/index.html" target="_top">C++ </a>
<a href="../unix/index.html" target="_top">UNIX </a>
<a href="../more.html" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.html" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.html" target="_top">ABOUT</a> |
<a href="../about/contact_us.html" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/struts-mini-logo.png" alt="Struts Tutorial" />
</div>
<ul class="menu">
<li class="heading">Struts 2 Basics</li>
<li><a class="left" target="_top" href="index.html">Struts2 Home</a></li>
<li><a class="left" target="_top" href="basic_mvc_architecture.html">Basic MVC Architecture</a></li>
<li><a class="left" target="_top" href="struts_overview.html">Struts2 Overview</a></li>
<li><a class="left" target="_top" href="struts_environment_setup.html">Struts2 Environment Setup</a></li>
<li><a class="left" target="_top" href="struts_architecture.html">Struts2 Architecture</a></li>
<li><a class="left" target="_top" href="struts_examples.html">Struts2 Examples</a></li>
<li><a class="left" target="_top" href="struts_configuration.html">Struts2 Configuration</a></li>
<li><a class="left" target="_top" href="struts_actions.html">Struts2 Actions</a></li>
<li><a class="left" target="_top" href="struts_interceptors.html">Struts2 Interceptors</a></li>
<li><a class="left" target="_top" href="struts_result_types.html">Struts2 Result Types</a></li>
<li><a class="left" target="_top" href="struts_value_stack_ognl.html">Struts2 Value Stack/OGNL</a></li>
<li><a class="left" target="_top" href="struts_file_uploads.html">Struts2 File Uploads</a></li>
<li><a class="left" target="_top" href="struts_database_access.html">Struts2 Database Access</a></li>
<li><a class="left" target="_top" href="struts_sending_email.html">Struts2 Sending Email</a></li>
<li><a class="left" target="_top" href="struts_validations.html">Struts2 Validations</a></li>
<li><a class="left" target="_top" href="struts_localization.html">Struts2 Localization</a></li>
<li><a class="left" target="_top" href="struts_type_conversion.html">Struts2 Type Conversion</a></li>
<li><a class="left" target="_top" href="struts_themes_templates.html">Struts2 Themes/Templates</a></li>
<li><a class="left" target="_top" href="struts_exception_handling.html">Struts2 Exception Handling</a></li>
<li><a class="left" target="_top" href="struts_annotations.html">Struts2 Annotations</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Tags</li>
<li><a class="left" target="_top" href="struts_control_tags.html">Struts2 Control Tags</a></li>
<li><a class="left" target="_top" href="struts_data_tags.html">Struts2 Data Tags</a></li>
<li><a class="left" target="_top" href="struts_form_tags.html">Struts2 Form Tags</a></li>
<li><a class="left" target="_top" href="struts_ajax_tags.html">Struts2 Ajax Tags</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Integrations</li>
<li><a class="left" target="_top" href="struts_spring.html">Struts2 - Spring</a></li>
<li><a class="left" target="_top" href="struts_tiles.html"><b>Struts2 - Tiles</b></a></li>
<li><a class="left" target="_top" href="struts_hibernate.html">Struts2 - Hibernate</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Useful Resources</li>
<li><a class="left" target="_top" href="struts_quick_guide.html">Struts2 Quick Guide</a></li>
<li><a class="left" target="_top" href="struts_useful_resources.html">Struts2 Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Struts 2 and Tiles Integration</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="struts_spring.html">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="struts_hibernate.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>In this chapter, let us go through the steps involved in integrating the Tiles framework with Struts2. Apache Tiles is a templating framework built to simplify the development of web application user interfaces.</p>
<p>First of all we need to download the tiles jar files from the <a target="_blank" rel="nofollow" href="http://tiles.apache.org/">Apache Tiles</a> website. You need to add the following jar files to the project's class path.</p>
<ul class="list">
  <li><p>tiles-api-x.y.z.jar</p></li>
  <li><p>tiles-compat-x.y.z.jar</p></li>
  <li><p>tiles-core-x.y.z.jar</p></li>
  <li><p>tiles-jsp-x.y.z.jar</p></li>
  <li><p>tiles-servlet-x.y.z.jar</p></li>
</ul>
<p>In addition to the above, we have to copy the following jar files from the struts2 download in your <b>WEB-INF/lib</b>.</p>
<ul class="list"> 
  <li><p>commons-beanutils-x.y.zjar</p></li>
  <li><p>commons-digester-x.y.jar</p></li>
  <li><p>struts2-tiles-plugin-x.y.z.jar</p></li>
</ul>
<p>Now let us setup the <b>web.xml</b> for the Struts-Tiles integration as given below. There are two important point to note here. First, we need to tell tiles, where to find tiles configuration file <b>tiles.xml</b>. In our case, it will be under <b>/WEB-INF</b> folder. Next we need to initiliaze the Tiles listener that comes with Struts2 download.</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   id="WebApp_ID" version="2.5"&gt;
   &lt;display-name&gt;Struts2Example15&lt;/display-name&gt;
	
   &lt;context-param&gt;
   &lt;param-name&gt;
      org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG
   &lt;/param-name&gt;
   &lt;param-value&gt;
      /WEB-INF/tiles.xml
   &lt;/param-value&gt;
   &lt;/context-param&gt;

   &lt;listener&gt;
   &lt;listener-class&gt;
      org.apache.struts2.tiles.StrutsTilesListener
   &lt;/listener-class&gt;
   &lt;/listener&gt;

   &lt;filter&gt;
   &lt;filter-name&gt;struts2&lt;/filter-name&gt;
   &lt;filter-class&gt;
   org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
   &lt;/filter-class&gt;
   &lt;/filter&gt;

   &lt;filter-mapping&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/filter-mapping&gt;

   &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
   &lt;/welcome-file-list&gt;
&lt;/web-app&gt;
</pre>
<p>Next let us create <b>tiles.xml</b> under /WEB-INF folder with the following contents:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;

&lt;!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_0.dtd"&gt;

&lt;tiles-definitions&gt;

   &lt;definition name="baseLayout" template="/baseLayout.jsp"&gt;
      &lt;put-attribute name="title"  value="Template"/&gt;
      &lt;put-attribute name="banner" value="/banner.jsp"/&gt;
      &lt;put-attribute name="menu"   value="/menu.jsp"/&gt;
      &lt;put-attribute name="body"   value="/body.jsp"/&gt;
      &lt;put-attribute name="footer"   value="/footer.jsp"/&gt;
   &lt;/definition&gt;

   &lt;definition name="tiger" extends="baseLayout"&gt;
      &lt;put-attribute name="title"  value="Tiger"/&gt;
      &lt;put-attribute name="body"   value="/tiger.jsp"/&gt;      
   &lt;/definition&gt;

   &lt;definition name="lion" extends="baseLayout"&gt;
      &lt;put-attribute name="title"  value="Lion"/&gt;
      &lt;put-attribute name="body"   value="/lion.jsp"/&gt;      
   &lt;/definition&gt;
  
&lt;/tiles-definitions&gt;
</pre>
<p>Mext. we define a basic skeleton layout in the <b>baseLayout.jsp</b>. It has five reusable / overridable areas. Namely <b>title, banner, menu, body</b> and <b>footer</b>. We provide the default values for the baseLayout and then we create two customizations that extend from the default layout. The tiger layout is similar to the basic layout, except it uses the <b>tiger.jsp</b> as its body and the text "Tiger" as the title. Similarly, the lion layout is similar to the basic layout, except it uses the <b>lion.jsp</b> as its body and the text "Lion" as the title.</p>
<p>Let us have a look at the individual jsp files. Following is the content of <b>baseLayout.jsp</b> file:</p>
<pre class="prettyprint">
&lt;%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles"%&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;

&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;&lt;tiles:insertAttribute name="title" ignore="true" /&gt;
&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
   &lt;tiles:insertAttribute name="banner" /&gt;&lt;br/&gt;
   &lt;hr/&gt;
   &lt;tiles:insertAttribute name="menu" /&gt;&lt;br/&gt;
   &lt;hr/&gt;
   &lt;tiles:insertAttribute name="body" /&gt;&lt;br/&gt;
   &lt;hr/&gt;
   &lt;tiles:insertAttribute name="footer" /&gt;&lt;br/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Here we just put together a basic HTML page that has the tiles attributes. We insert the tiles attributes in the places where we need them to be. Next, let us create <b>banner.jsp</b> file with the following content:</p>
<pre class="prettyprint">
&lt;img src="http://www.tutorialspoint.com/images/tp-logo.gif"/&gt;
</pre>
<p>The <b>menu.jsp</b> file will have following lines which are the links - to the TigerMenu.action and the LionMenu.action struts actions.</p>
<pre class="prettyprint">
&lt;%@taglib uri="/struts-tags" prefix="s"%&gt;

&lt;a href="&lt;s:url action="tigerMenu"/&gt;" Tiger&lt;/a&gt;&lt;br&gt;
&lt;a href="&lt;s:url action="lionMenu"/&gt;" Lion&lt;/a&gt;&lt;br&gt;
</pre>
<p>The <b>lion.jsp</b> file will have following content:</p>
<pre class="prettyprint">
&lt;img src="http://upload.wikimedia.org/wikipedia/commons/d/d2/Lion.jpg"/&gt;
The lion
</pre>
<p>The <b>tiger.jsp</b> file will have following content:</p>
<pre class="prettyprint">
&lt;img src="http://www.freewebs.com/tigerofdarts/tiger.jpg"/&gt;
The tiger
</pre>
<p>Next, let us create the action class file <b>MenuAction.java</b> which contains the following:</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

import com.opensymphony.xwork2.ActionSupport;

public class MenuAction extends ActionSupport {
   public String tiger() { return "tiger"; }
   public String lion() { return "lion"; }
	
}
</pre>
<p>This is a pretty straight forward class. We declared two methods tiger() and lion() that return tiger and lion as outcomes respectively. Let us put it all together in the <b>struts.xml</b> file:</p>
<pre class="prettyprint">
&lt;!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd"&gt;

&lt;struts&gt;
   &lt;package name="default" extends="struts-default"&gt;
      &lt;result-types&gt;
         &lt;result-type name="tiles" 
         class="org.apache.struts2.views.tiles.TilesResult" /&gt;
      &lt;/result-types&gt;

      &lt;action name="*Menu" method="{1}" 
         class="com.tutorialspoint.struts2.MenuAction"&gt;
         &lt;result name="tiger" type="tiles"&gt;tiger&lt;/result&gt;
         &lt;result name="lion" type="tiles"&gt;lion&lt;/result&gt;
      &lt;/action&gt;

   &lt;/package&gt;
&lt;/struts&gt;
</pre>
<p>Let us check what we did in above file. First of all, we declared a new result type called "tiles" as we are now using tiles instead of plain jsp for the view technology. Struts2 has its support for the Tiles View result type, so we create the result type "tiles" to be of the "org.apache.struts2.view.tiles.TilesResult" class.</p>
<p>Next, we want to say if the request is for /tigerMenu.action take the user to the tiger tiles page and if the request is for /lionMenu.action take the user to the lion tiles page.</p>
<p>We achieve this using a bit of regular expression. In our action definition, we say anything that matches the pattern "*Menu" will be handled by this action. The matching method will be invoked in the MenuAction class. That is, tigerMenu.action will invoke tiger() and lionMenu.action will invoke lion(). We then need to map the outcome of the result to the appropriate tiles pages.</p>
<p>Now right click on the project name and click Export > WAR File to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/tigerMenu.jsp. This will give you following screen:</p>
<center>
<img class="main" src="../images/struts_tiles.gif" alt="Struts and Tiles Integration" />
</center>
<p>Similarly, if you goto the lionMenu.action page, you will see the lion page which uses the same tiles layout.</p>
<hr />
<div class="pre-btn">
<a href="struts_spring.html">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/struts_tiles.pdf" alt="Struts 2 and Tiles Integration" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="struts_hibernate.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.html" target="_top">ASP.NET </a> |
<a href="../jquery/index.html" target="_top">jQuery </a> |
<a href="../ajax/index.html" target="_top">AJAX </a> |
<a href="../ant/index.html" target="_top">ANT</a> |
<a href="../jsp/index.html" target="_top">JSP </a> |
<a href="../servlets/index.html" target="_top">Servlets </a> |
<a href="../log4j/index.html" target="_top">log4j </a> |
<a href="../ibatis/index.html" target="_top">iBATIS </a> |
<a href="../hibernate/index.html" target="_top">Hibernate </a> |
<a href="../jdbc/index.html" target="_top">JDBC </a> |
<a href="index.html" target="_top">Struts </a> |
<a href="../html5/index.html" target="_top">HTML5 </a> |
<a href="../sql/index.html" target="_top">SQL </a> |
<a href="../mysql/index.html" target="_top">MySQL </a> |
<a href="../cplusplus/index.html" target="_top">C++ </a> |
<a href="../unix/index.html" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_tiles.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:52:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>