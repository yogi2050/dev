<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_validations.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:12:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Struts 2 Validations Framework</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Struts 2 Validations Framework - Learn what is Basic Model View and Controller Architecture along with Struts 2 in simple and easy steps starting from Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling and Annotations." />
<meta name="Keywords" content="Struts, Tutorials, Learning, Beginners, Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling, Annotations." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#5c83ba !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#5c83ba !important;
}
#topmenu
{
background-color:#121212 !important;
}
#leftcol ul.menu li.heading 
{
background:#5c83ba !important;
border:1px solid #121212 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1020px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="../unix/index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/struts-mini-logo.png" alt="Struts Tutorial" />
</div>
<ul class="menu">
<li class="heading">Struts 2 Basics</li>
<li><a class="left" target="_top" href="index.htm">Struts2 Home</a></li>
<li><a class="left" target="_top" href="basic_mvc_architecture.htm">Basic MVC Architecture</a></li>
<li><a class="left" target="_top" href="struts_overview.htm">Struts2 Overview</a></li>
<li><a class="left" target="_top" href="struts_environment_setup.htm">Struts2 Environment Setup</a></li>
<li><a class="left" target="_top" href="struts_architecture.htm">Struts2 Architecture</a></li>
<li><a class="left" target="_top" href="struts_examples.htm">Struts2 Examples</a></li>
<li><a class="left" target="_top" href="struts_configuration.htm">Struts2 Configuration</a></li>
<li><a class="left" target="_top" href="struts_actions.htm">Struts2 Actions</a></li>
<li><a class="left" target="_top" href="struts_interceptors.htm">Struts2 Interceptors</a></li>
<li><a class="left" target="_top" href="struts_result_types.htm">Struts2 Result Types</a></li>
<li><a class="left" target="_top" href="struts_value_stack_ognl.htm">Struts2 Value Stack/OGNL</a></li>
<li><a class="left" target="_top" href="struts_file_uploads.htm">Struts2 File Uploads</a></li>
<li><a class="left" target="_top" href="struts_database_access.htm">Struts2 Database Access</a></li>
<li><a class="left" target="_top" href="struts_sending_email.htm">Struts2 Sending Email</a></li>
<li><a class="left" target="_top" href="struts_validations.htm"><b>Struts2 Validations</b></a></li>
<li><a class="left" target="_top" href="struts_localization.htm">Struts2 Localization</a></li>
<li><a class="left" target="_top" href="struts_type_conversion.htm">Struts2 Type Conversion</a></li>
<li><a class="left" target="_top" href="struts_themes_templates.htm">Struts2 Themes/Templates</a></li>
<li><a class="left" target="_top" href="struts_exception_handling.htm">Struts2 Exception Handling</a></li>
<li><a class="left" target="_top" href="struts_annotations.htm">Struts2 Annotations</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Tags</li>
<li><a class="left" target="_top" href="struts_control_tags.htm">Struts2 Control Tags</a></li>
<li><a class="left" target="_top" href="struts_data_tags.htm">Struts2 Data Tags</a></li>
<li><a class="left" target="_top" href="struts_form_tags.htm">Struts2 Form Tags</a></li>
<li><a class="left" target="_top" href="struts_ajax_tags.htm">Struts2 Ajax Tags</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Integrations</li>
<li><a class="left" target="_top" href="struts_spring.htm">Struts2 - Spring</a></li>
<li><a class="left" target="_top" href="struts_tiles.htm">Struts2 - Tiles</a></li>
<li><a class="left" target="_top" href="struts_hibernate.htm">Struts2 - Hibernate</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Useful Resources</li>
<li><a class="left" target="_top" href="struts_quick_guide.htm">Struts2 Quick Guide</a></li>
<li><a class="left" target="_top" href="struts_useful_resources.htm">Struts2 Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Struts 2 Validations Framework</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="struts_sending_email.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="struts_localization.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>Now we will look into how Struts's validation framework. At Struts's core, we have the validation framework that assists the application to run the rules to perform validation before the action method is executed. </p>
<p>Client side validation is usually achieved using Javascript. But one should not rely upon client side validation alone. Best practise suggests that the validation should be introduced at all levels of your application framework. Now let us look at two ways of adding validation to our Struts project.</p>
<p>Here we will take an example of <b>Employee</b> whose name and age would be captured using a simple page and we will put two validation to make sure that use always enters a name and age should be in between 28 and 65. So let us start with the main JSP page of the example.</p>
<h2>Create main page:</h2>
<p>Let us write main page JSP file <b>index.jsp</b>, which will be used to collect Employee related information mentioned above.</p>
<pre class="prettyprint">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Employee Form&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
   &lt;s:form action="empinfo" method="post"&gt;
      &lt;s:textfield name="name" label="Name" size="20" /&gt;
      &lt;s:textfield name="age" label="Age" size="20" /&gt;
      &lt;s:submit name="submit" label="Submit" align="center" /&gt;
   &lt;/s:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>The index.jsp makes use of Struts tag, which we have not covered yet but we will study them in tags related chapters. But for now, just assume that the s:textfield tag prints a input field, and the s:submit prints a submit button. We have used label property for each tag which creates label for each tag.</p>
<h2>Create Views:</h2>
<p>We will use JSP file <b>success.jsp</b> which  will be invoked in case defined action returns SUCCESS.</p>
<pre class="prettyprint">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Success&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   Employee Information is captured successfully.
&lt;/body&gt;
&lt;/html&gt;
</pre>
<h2>Create Action:</h2>
<p>So let us define a small action class <b>Employee</b>, and then add a method called <b>validate()</b> as shown below in <b>Employee.java</b> file. Make sure that your action class extends the <b>ActionSupport</b>  class, otherwise your validate method will not be executed.</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

import com.opensymphony.xwork2.ActionSupport;

public class Employee extends ActionSupport{
   private String name;
   private int age;
   
   public String execute() 
   {
       return SUCCESS;
   }
   public String getName() {
       return name;
   }
   public void setName(String name) {
       this.name = name;
   }
   public int getAge() {
       return age;
   }
   public void setAge(int age) {
       this.age = age;
   }

   public void validate()
   {
      if (name == null || name.trim().equals(""))
      {
         addFieldError("name","The name is required");
      }
      if (age &lt; 28 || age &gt; 65)
      {
         addFieldError("age","Age must be in between 28 and 65");
      }
   }
}
</pre>
<p>As shown in the above example, the validation method checks whether the 'Name' field has a value or not. If no value has been supplied, we add a field error for the 'Name' field with a custom error message. Secondly, we check  if entered value for 'Age' field is in between 28 and 65 or not, if this condition does not meet we add an error above the validated field.</p>
<h2>Configuration Files:</h2>
<p>Finally, let us put everything together using the <b>struts.xml</b> configuration file as follows:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;

&lt;struts&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;

      &lt;action name="empinfo" 
         class="com.tutorialspoint.struts2.Employee"
         method="execute"&gt;
         &lt;result name="input"&gt;/index.jsp&lt;/result&gt;
         &lt;result name="success"&gt;/success.jsp&lt;/result&gt;
      &lt;/action&gt;

   &lt;/package&gt;

&lt;/struts&gt;
</pre>
<p>Following is the content of <b>web.xml</b> file:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
   id="WebApp_ID" version="3.0"&gt;

   &lt;display-name&gt;Struts 2&lt;/display-name&gt;
   &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
   &lt;/welcome-file-list&gt;

   &lt;filter&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;filter-class&gt;
         org.apache.struts2.dispatcher.FilterDispatcher
      &lt;/filter-class&gt;
   &lt;/filter&gt;

   &lt;filter-mapping&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/filter-mapping&gt;
&lt;/web-app&gt;
</pre>
<p>Now, right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/index.jsp. This will give you following screen:</p>
<center>
<img class="main" src="../images/helloworldstruts12.jpg" alt="Email User Input" />
</center>
<p>Now do not enter any required information, just click on <b>Submit</b> button. You will see following result:</p>
<center>
<img class="main" src="../images/helloworldstruts121.jpg" alt="Error" />
</center>
<p>Enter the required information but enter a wrong From field, let us say name as "test" and age as 30, and finally click on <b>Submit</b> button. You will see following result:</p>
<center>
<img class="main" src="../images/helloworldstruts122.jpg" alt="Success" />
</center>
<h2>How this validation works?</h2>
<p>When the user presses the submit button, Struts 2 will automatically execute the validate method and if any of the if statements listed inside the method are true, Struts 2 will call its addFieldError method. If any errors have been added then Struts 2 will not proceed to call the execute method. Rather the Struts 2 framework will return <b>input</b> as the result of calling the action.</p>
<p>So when validation fails and Struts 2 returns <b>input</b>, the Struts 2 framework will redisplay the index.jsp file. Since we used Struts 2 form tags, Struts 2 will automatically add the error messages just above the form filed.</p>
<p>These error messages are the ones we specified in the addFieldError method call. The addFieldError method takes two arguments. The first is the <b>form</b> field name to which the error applies and the second is the error message to display above that form field.</p>
<pre class="prettyprint">
addFieldError("name","The name is required");
</pre>
<p>To handle the return value of <b>input</b> we need to add the following result to our action node in <b>struts.xml</b>.</p>
<pre class="prettyprint">
&lt;result name="input"&gt;/index.jsp&lt;/result&gt;
</pre>
<h2>XML Based Validation:</h2>
<p>The second method of doing validation is by placing an xml file next to the action class. Struts2 XML based validation provides more options of validation like email validation, integer range validation, form validation field, expression validation, regex validation, required validation, requiredstring validation, stringlength validation and etc.</p>
<p>The xml file needs to be named <b>'[action-class]'-validation.xml</b>. So, in our case we create a file called <b>Employee-validation.xml</b> with the following contents:</p>
<pre class="prettyprint">
&lt;!DOCTYPE validators PUBLIC 
"-//OpenSymphony Group//XWork Validator 1.0.2//EN"
"http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd"&gt;

&lt;validators&gt;
   &lt;field name="name"&gt;
      &lt;field-validator type="required"&gt;
         &lt;message&gt;
            The name is required.
         &lt;/message&gt;
      &lt;/field-validator&gt;
   &lt;/field&gt;

   &lt;field name="age"&gt;
     &lt;field-validator type="int"&gt;
         &lt;param name="min"&gt;29&lt;/param&gt;
         &lt;param name="max"&gt;64&lt;/param&gt;
         &lt;message&gt;
            Age must be in between 28 and 65
         &lt;/message&gt;
      &lt;/field-validator&gt;
   &lt;/field&gt;
&lt;/validators&gt;
</pre>
<p>Above XML file would be kept in your CLASSPATH ideally along with class file. Let us have our Employee action class as follows without having <b>validate()</b> method:</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

import com.opensymphony.xwork2.ActionSupport;

public class Employee extends ActionSupport{
   private String name;
   private int age;
   
   public String execute() 
   {
       return SUCCESS;
   }
   public String getName() {
       return name;
   }
   public void setName(String name) {
       this.name = name;
   }
   public int getAge() {
       return age;
   }
   public void setAge(int age) {
       this.age = age;
   }
}
</pre>
<p>Rest of the setup will remain as it is i the previous example, now if you will run the application, it will produce same result what we recieved in previous example.</p>
<p>The advantage of having an xml file to store the configuration allows the separation of the validation from the application code. You could get a developer to write the code and a business analyst to create the validation xml files. Another thing to note is the validator types that are available by default. There are plenty more validators that come by default with Struts. Common validators include Date Validator, Regex validator and String Length validator.  Check following link for more detail <a href="xml_based_validators.htm">Struts - XML Based Validators</a>.</p>
<hr />
<div class="pre-btn">
<a href="struts_sending_email.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/struts_validations.pdf" alt="Struts 2 Validations Framework" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="struts_localization.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="../jsp/index.htm" target="_top">JSP </a> |
<a href="../servlets/index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="../unix/index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_validations.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:12:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>