<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_type_conversion.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:12:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Struts 2 Type Conversion</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Struts 2 Type Conversion with Examples - Learn what is Basic Model View and Controller Architecture along with Struts 2 in simple and easy steps starting from Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling and Annotations." />
<meta name="Keywords" content="Struts, Tutorials, Learning, Beginners, Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling, Annotations." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#5c83ba !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#5c83ba !important;
}
#topmenu
{
background-color:#121212 !important;
}
#leftcol ul.menu li.heading 
{
background:#5c83ba !important;
border:1px solid #121212 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1020px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="../unix/index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/struts-mini-logo.png" alt="Struts Tutorial" />
</div>
<ul class="menu">
<li class="heading">Struts 2 Basics</li>
<li><a class="left" target="_top" href="index.htm">Struts2 Home</a></li>
<li><a class="left" target="_top" href="basic_mvc_architecture.htm">Basic MVC Architecture</a></li>
<li><a class="left" target="_top" href="struts_overview.htm">Struts2 Overview</a></li>
<li><a class="left" target="_top" href="struts_environment_setup.htm">Struts2 Environment Setup</a></li>
<li><a class="left" target="_top" href="struts_architecture.htm">Struts2 Architecture</a></li>
<li><a class="left" target="_top" href="struts_examples.htm">Struts2 Examples</a></li>
<li><a class="left" target="_top" href="struts_configuration.htm">Struts2 Configuration</a></li>
<li><a class="left" target="_top" href="struts_actions.htm">Struts2 Actions</a></li>
<li><a class="left" target="_top" href="struts_interceptors.htm">Struts2 Interceptors</a></li>
<li><a class="left" target="_top" href="struts_result_types.htm">Struts2 Result Types</a></li>
<li><a class="left" target="_top" href="struts_value_stack_ognl.htm">Struts2 Value Stack/OGNL</a></li>
<li><a class="left" target="_top" href="struts_file_uploads.htm">Struts2 File Uploads</a></li>
<li><a class="left" target="_top" href="struts_database_access.htm">Struts2 Database Access</a></li>
<li><a class="left" target="_top" href="struts_sending_email.htm">Struts2 Sending Email</a></li>
<li><a class="left" target="_top" href="struts_validations.htm">Struts2 Validations</a></li>
<li><a class="left" target="_top" href="struts_localization.htm">Struts2 Localization</a></li>
<li><a class="left" target="_top" href="struts_type_conversion.htm"><b>Struts2 Type Conversion</b></a></li>
<li><a class="left" target="_top" href="struts_themes_templates.htm">Struts2 Themes/Templates</a></li>
<li><a class="left" target="_top" href="struts_exception_handling.htm">Struts2 Exception Handling</a></li>
<li><a class="left" target="_top" href="struts_annotations.htm">Struts2 Annotations</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Tags</li>
<li><a class="left" target="_top" href="struts_control_tags.htm">Struts2 Control Tags</a></li>
<li><a class="left" target="_top" href="struts_data_tags.htm">Struts2 Data Tags</a></li>
<li><a class="left" target="_top" href="struts_form_tags.htm">Struts2 Form Tags</a></li>
<li><a class="left" target="_top" href="struts_ajax_tags.htm">Struts2 Ajax Tags</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Integrations</li>
<li><a class="left" target="_top" href="struts_spring.htm">Struts2 - Spring</a></li>
<li><a class="left" target="_top" href="struts_tiles.htm">Struts2 - Tiles</a></li>
<li><a class="left" target="_top" href="struts_hibernate.htm">Struts2 - Hibernate</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Useful Resources</li>
<li><a class="left" target="_top" href="struts_quick_guide.htm">Struts2 Quick Guide</a></li>
<li><a class="left" target="_top" href="struts_useful_resources.htm">Struts2 Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Struts 2 Type Conversion</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="struts_localization.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="struts_themes_templates.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>Everything on a HTTP request is treated as a <b>String</b> by the protocol. This includes numbers, booleans, integers, dates, decimals and everything else. Every thing is a string according to HTTP. However, in the Struts class, you could have properties of any data types. Howe does Struts autowire the properties for you ?</p>
<p>Struts uses a variety of type converters under the covers to do the heavy lifting. For example, if you have an integer attribute in your Action class, Struts automatically converts the request parameter to the integer attribute without you doing anything. By default, Struts comes with a number of type converters. Some of them are listed below and if you are using any of them then you have nothing to worry about:</p>
<ul class="list">
  <li><p>Integer, Float, Double, Decimal</p></li>
  <li><p>Date and Datetime</p></li>
  <li><p>Arrays and Collections</p></li>
  <li><p>Enumerations</p></li>
  <li><p>Boolean</p></li>
  <li><p>BigDecimal</p></li>
</ul>
<p>Some times when you are using your own data type, it is necessary to add your own converters to make Struts aware how to convert those values before displaying. Consider the following POJO class <b>Environment.java</b>.</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

public class Environment {
   private String name;
   public  Environment(String name)
   {
      this.name = name;
   }
   public String getName() {
      return name;
   }
   public void setName(String name) {
      this.name = name;
   }
}
</pre>
<p>This is a very simple class that has an attribute called <b>name</b>, so nothing special about this class. Let us create another class that contains information about the system - <b>SystemDetails.java</b>. For the purpose of this exercices, I have hardcoded the Environment to "Development" and the Operating System to "Windows XP SP3". In a real project, you would get this information from the system configuration. So let us have following action class:</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;
import com.opensymphony.xwork2.ActionSupport;

public class SystemDetails extends ActionSupport {
   private Environment environment = new Environment("Development");
   private String operatingSystem = "Windows XP SP3";

   public String execute()
   {
      return SUCCESS;
   }
   public Environment getEnvironment() {
      return environment;
   }
   public void setEnvironment(Environment environment) {
      this.environment = environment;
   }
   public String getOperatingSystem() {
      return operatingSystem;
   }
   public void setOperatingSystem(String operatingSystem) {
      this.operatingSystem = operatingSystem;
   }
}
</pre>
<p>Next let us create a simple JSP file <b>System.jsp</b> to display the Environment and the Operating System information.</p>
<pre class="prettyprint">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;System Details&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   Environment: &lt;s:property value="environment"/&gt;&lt;br/&gt;
   Operating System:&lt;s:property value="operatingSystem"/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Let us wire the <b>system.jsp</b> and the <b>SystemDetails.java</b> class together using <b>struts.xml</b>. The SystemDetails class has a simple execute() method that returns the string "SUCCESS".</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;

&lt;struts&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;
      &lt;action name="system" 
            class="com.tutorialspoint.struts2.SystemDetails" 
            method="execute"&gt;
         &lt;result name="success"&gt;/System.jsp&lt;/result&gt;
      &lt;/action&gt;
   &lt;/package&gt;
&lt;/struts&gt;
</pre>
<p>Right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/system.action. This will give you following screen:</p> 
<center> 
<img class="main" src="../images/helloworldstruts17.gif" alt="System Info" /> 
</center> 
<p>What is wrong with the above output? Struts knows how to display and convert the string "Windows XP SP3" and other built-in data types, but it does not know what to do with the the property of <b>Environment</b> type. So, it simply called the <b>toString()</b> method on the class. To resolve this problem, let us now create and register a simple <b>TypeConverter</b> for the Environment class. Create a class called <b>EnvironmentConverter.java</b> with the following.</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

import java.util.Map;
import org.apache.struts2.util.StrutsTypeConverter;

   public class EnvironmentConverter extends StrutsTypeConverter {
      @Override
      public Object convertFromString(Map context, String[] values, 
                                      Class clazz) {
      Environment env = new Environment(values[0]);
      return env;
   }

   @Override
   public String convertToString(Map context, Object value) {
      Environment env  = (Environment) value;
      return env == null ? null : env.getName();
   }	
}
</pre>
<p>The <b>EnvironmentConverter</b> extends the <b>StrutsTypeConverter</b> class and tells Struts how to convert Environment to a String and vice versa by overriding two methods <b>convertFromString()</b> and <b>convertToString()</b>. Let us now register this converter before we us it in our application. There are two ways to register a converter. If the converter will be used only in a particular action, then you would have to create a property file needs to be named as <b>'[action-class]'-converstion.properties</b>, So, in our case we create a file called <b>SystemDetails-converstion.properties</b> with the following registration entery:</p>
<pre class="prettyprint">
environment=com.tutorialspoint.struts2.EnvironmentConverter
</pre>
<p>In the above example, "environment" is the name of the property in the <b>SystemDetails.java</b> class and we are telling Struts to use the <b>EnvironmentConverter</b> for converting to and from this property. However, we are not going to do this, Instead we are going to register this converter globally so that it can be used throughout the application. To do this, create a property file called <b>xwork-conversion.properties</b> in the <b>WEB-INF/classes</b> folder with the following line:</p>
<pre class="prettyprint">
com.tutorialspoint.struts2.Environment = \
            com.tutorialspoint.struts2.EnvironmentConverter
</pre>
<p>This simply registers the converter globally, so that Struts can automatically do the conversion every time it encounters an object of type <b>Environment</b>. Now, if you re-compile and re-run the program, you will get a better output as follows:</p>
<center> 
<img class="main" src="../images/helloworldstruts18.gif" alt="System Info" /> 
</center>
<p>Obviously, now result is better which means our Struts convertor is working fine. This is how you can create multiple convertors and register them to use as per your requirements.</p>
<hr />
<div class="pre-btn">
<a href="struts_localization.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/struts_type_conversion.pdf" alt="Struts 2 Type Conversion" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="struts_themes_templates.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="../jsp/index.htm" target="_top">JSP </a> |
<a href="../servlets/index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="../unix/index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_type_conversion.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:12:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>