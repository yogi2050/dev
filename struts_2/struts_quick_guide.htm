<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_quick_guide.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:15:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Struts 2 Quick Guide</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Struts 2 Quick Guide - Learn what is Basic Model View and Controller Architecture along with Struts 2 in simple and easy steps starting from Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling and Annotations." />
<meta name="Keywords" content="Struts, Tutorials, Learning, Beginners, Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling, Annotations." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#5c83ba !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#5c83ba !important;
}
#topmenu
{
background-color:#121212 !important;
}
#leftcol ul.menu li.heading 
{
background:#5c83ba !important;
border:1px solid #121212 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1020px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index.htm">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index.htm" target="_top">HOME </a>
<a href="../java/index.htm" target="_top">JAVA </a>
<a href="../php/index.htm" target="_top">PHP </a>
<a href="../python/index.htm" target="_top">Python </a>
<a href="../ruby/index.htm" target="_top">Ruby </a>
<a href="../perl/index.htm" target="_top">Perl </a>
<a href="../html/index.htm" target="_top">HTML </a>
<a href="../css/index.htm" target="_top">CSS </a>
<a href="../javascript/index.htm" target="_top">Javascript </a>
<a href="../mysql/index.htm" target="_top">MySQL </a>
<a href="../cplusplus/index.htm" target="_top">C++ </a>
<a href="../unix/index.htm" target="_top">UNIX </a>
<a href="../more.htm" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.htm" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.htm" target="_top">ABOUT</a> |
<a href="../about/contact_us.htm" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/struts-mini-logo.png" alt="Struts Tutorial" />
</div>
<ul class="menu">
<li class="heading">Struts 2 Basics</li>
<li><a class="left" target="_top" href="index.htm">Struts2 Home</a></li>
<li><a class="left" target="_top" href="basic_mvc_architecture.htm">Basic MVC Architecture</a></li>
<li><a class="left" target="_top" href="struts_overview.htm">Struts2 Overview</a></li>
<li><a class="left" target="_top" href="struts_environment_setup.htm">Struts2 Environment Setup</a></li>
<li><a class="left" target="_top" href="struts_architecture.htm">Struts2 Architecture</a></li>
<li><a class="left" target="_top" href="struts_examples.htm">Struts2 Examples</a></li>
<li><a class="left" target="_top" href="struts_configuration.htm">Struts2 Configuration</a></li>
<li><a class="left" target="_top" href="struts_actions.htm">Struts2 Actions</a></li>
<li><a class="left" target="_top" href="struts_interceptors.htm">Struts2 Interceptors</a></li>
<li><a class="left" target="_top" href="struts_result_types.htm">Struts2 Result Types</a></li>
<li><a class="left" target="_top" href="struts_value_stack_ognl.htm">Struts2 Value Stack/OGNL</a></li>
<li><a class="left" target="_top" href="struts_file_uploads.htm">Struts2 File Uploads</a></li>
<li><a class="left" target="_top" href="struts_database_access.htm">Struts2 Database Access</a></li>
<li><a class="left" target="_top" href="struts_sending_email.htm">Struts2 Sending Email</a></li>
<li><a class="left" target="_top" href="struts_validations.htm">Struts2 Validations</a></li>
<li><a class="left" target="_top" href="struts_localization.htm">Struts2 Localization</a></li>
<li><a class="left" target="_top" href="struts_type_conversion.htm">Struts2 Type Conversion</a></li>
<li><a class="left" target="_top" href="struts_themes_templates.htm">Struts2 Themes/Templates</a></li>
<li><a class="left" target="_top" href="struts_exception_handling.htm">Struts2 Exception Handling</a></li>
<li><a class="left" target="_top" href="struts_annotations.htm">Struts2 Annotations</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Tags</li>
<li><a class="left" target="_top" href="struts_control_tags.htm">Struts2 Control Tags</a></li>
<li><a class="left" target="_top" href="struts_data_tags.htm">Struts2 Data Tags</a></li>
<li><a class="left" target="_top" href="struts_form_tags.htm">Struts2 Form Tags</a></li>
<li><a class="left" target="_top" href="struts_ajax_tags.htm">Struts2 Ajax Tags</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Integrations</li>
<li><a class="left" target="_top" href="struts_spring.htm">Struts2 - Spring</a></li>
<li><a class="left" target="_top" href="struts_tiles.htm">Struts2 - Tiles</a></li>
<li><a class="left" target="_top" href="struts_hibernate.htm">Struts2 - Hibernate</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Useful Resources</li>
<li><a class="left" target="_top" href="struts_quick_guide.htm"><b>Struts2 Quick Guide</b></a></li>
<li><a class="left" target="_top" href="struts_useful_resources.htm">Struts2 Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Struts 2 Quick Guide</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="struts_hibernate.htm">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="struts_useful_resources.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<p>Struts2 is popular and mature web application framework based on the MVC design pattern. Struts2 is not just the next version of Struts 1, but it is a complete rewrite of the Struts architecture.</p>
<p>The WebWork framework started off with Struts framework as the basis and its goal was to offer an enhanced and improved framework built on Struts <b>to make web development easier for the developers</b>.</p>
<p>After some time, the Webwork framework and the Struts community joined hands to create the famous Struts2 framework.</p>
<h2>Struts 2 framework features:</h2>
<p>Here are some of the great features that may force you to consider Struts2:</p>
<ul class="list">
<li><p><b>POJO forms and POJO actions</b> - Struts2 has done away with the Action Forms that were an integral part of the Struts framework. With Struts2, you can use any POJO to receive the form input. Similarly, you can now see any POJO as an Action class.</p></li>
<li><p><b>Tag support</b> - Struts2 has improved the form tags and the new tags allow the developers to write less code.</p></li>
<li><p><b>AJAX support</b> - Struts2 has recognised the take over by Web2.0 technologies, and has integrated AJAX support into the product by creating AJAX tags, that function very similar to the standard Struts2 tags.</p></li>
<li><p><b>Easy Integration</b> - Integration with other frameworks like Spring, Tiles and SiteMesh is now easier with a variety of integration available with Struts2.</p></li>
<li><p><b>Template Support</b> - Support for generating views using templates.</p></li>
<li><p><b>Plugin Support</b> - The core Struts2 behaviour  can be enhanced and augmented by the use of plugins. A number of plugins are available for Struts2.</p></li>
<li><p><b>Profiling</b> - Struts2 offers integrated profiling to debug and profile the application. In addition to this, Struts also offers integrated debugging with the help of built in debugging tools.</p></li>
<li><p><b>Easy to modify tags</b> - Tag markups in Struts2 can be tweaked using Freemarker templates. This does not require JSP or java knowledge. Basic HTML, XML and CSS knowledge is enough to modify the tags.</p></li>
<li><p><b>Promote less configuration</b> - Struts2 promotes less configuration with the help of using default values for various settings. You don't have to configure something unless it deviates from the default settings set by Struts2.</p></li>
</ul>
<h2>Struts 2 Environment Setup:</h2>
<p>Our first task is to get a minimal Struts 2 application running. This chapter will guide you on how to prepare a development environment to start your work with Struts 2. I assume that you already have have JDK (5+), Tomcat and Eclipse installed on your machine. If you do not have these components installed then follow the given steps on fast track:</p>
<h2>Step 1 - Setup Java Development Kit (JDK):</h2>
<p>You can download the latest version of SDK from Oracle's Java site: <a rel="nofollow" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank">Java SE Downloads</a>. You will find instructions for installing JDK in downloaded files, follow the given instructions to install and configure the setup. Finally set PATH and JAVA_HOME environment variables to refer to the directory that contains java and javac, typically java_install_dir/bin and java_install_dir respectively.</p>
<p>If you are running Windows and installed the SDK in C:\jdk1.5.0_20, you would have to put the following line in your C:\autoexec.bat file.</p>
<pre class="prettyprint">
set PATH=C:\jdk1.5.0_20\bin;%PATH%
set JAVA_HOME=C:\jdk1.5.0_20
</pre>
<p>Alternatively, on Windows NT/2000/XP, you could also right-click on My Computer, select Properties, then Advanced, then Environment Variables. Then, you would update the PATH value and press the OK button.</p>
<p>On Unix (Solaris, Linux, etc.), if the SDK is installed in /usr/local/jdk1.5.0_20 and you use the C shell, you would put the following into your .cshrc file.</p>
<pre class="prettyprint">
setenv PATH /usr/local/jdk1.5.0_20/bin:$PATH
setenv JAVA_HOME /usr/local/jdk1.5.0_20
</pre>
<p>Alternatively, if you use an Integrated Development Environment (IDE) like Borland JBuilder, Eclipse, IntelliJ IDEA, or Sun ONE Studio, compile and run a simple program to confirm that the IDE knows where you installed Java, otherwise do proper setup as given document of the IDE.</p>
<h2>Step 2 - Setup Apache Tomcat:</h2>
<p>You can download the latest version of Tomcat from <a rel="nofollow" href="http://tomcat.apache.org/" target="_blank">http://tomcat.apache.org/</a>. Once you downloaded the installation, unpack the binary distribution into a convenient location. For example in C:\apache-tomcat-6.0.33 on windows, or /usr/local/apache-tomcat-6.0.33 on Linux/Unix and create CATALINA_HOME environment variable pointing to these locations.</p>
<p>Tomcat can be started by executing the following commands on windows machine, or you can simply double click on startup.bat</p>
<pre class="prettyprint">
 %CATALINA_HOME%\bin\startup.bat
 
 or
 
 C:\apache-tomcat-6.0.33\bin\startup.bat
</pre>
<p>Tomcat can be started by executing the following commands on Unix (Solaris, Linux, etc.) machine:</p>
<pre class="prettyprint">
$CATALINA_HOME/bin/startup.sh
 
or
 
/usr/local/apache-tomcat-6.0.33/bin/startup.sh
</pre>
<p>After a successful startup, the default web applications included with Tomcat will be  available by visiting <b>http://localhost:8080/</b>. If everything is fine then it should display following result:</p>
<center>
<img src="../images/TomcatHomePage.JPG" alt="Tomcat Home page" />
</center>
<p>Further information about configuring and running Tomcat can be found in  the documentation included here, as well as on the Tomcat web site: http://tomcat.apache.org</p>
<p>Tomcat can be stopped by executing the following commands on windows machine:</p>
<pre class="prettyprint">
%CATALINA_HOME%\bin\shutdown
or

C:\apache-tomcat-5.5.29\bin\shutdown
</pre>
<p>Tomcat can be stopped by executing the following commands on Unix (Solaris, Linux, etc.) machine:</p>
<pre class="prettyprint">
$CATALINA_HOME/bin/shutdown.sh

or

/usr/local/apache-tomcat-5.5.29/bin/shutdown.sh
</pre>
<h2>Step 3 - Setup Eclipse (IDE)</h2>
<p>All the examples in this tutorial has been written using Eclipse IDE. So I would suggest you have latest version of Eclipse installed on your machine.</p>
<p>To install Eclipse dDownload the latest Eclipse binaries from <a rel="nofollow" target="_blank" href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a>. Once you downloaded the installation, unpack the binary distribution into a convenient location. For example in C:\eclipse on windows, or /usr/local/eclipse on Linux/Unix and finally set PATH variable appropriately.</p>
<p>Eclipse can be started by executing the following commands on windows machine, or you can simply double click on eclipse.exe</p>
<pre class="prettyprint">
 %C:\eclipse\eclipse.exe
</pre>
<p>Eclipse can be started by executing the following commands on Unix (Solaris, Linux, etc.) machine:</p>
<pre class="prettyprint">
$/usr/local/eclipse/eclipse
</pre>
<p>After a successful startup, if everything is fine then it should display following result:</p>
<center>
<img src="../images/EclipseHomePage.JPG" alt="Eclipse Home page" />
</center>
<h2>Step 4 - Setup Struts2 Libraries</h2>
<p>Now if everything is fine, then you can proceed to setup your Struts 2 faremwork. Following are the simple steps to download and install Struts2 on your machine.</p>
<ul class="list">
<li><p>Make a choice whether you want to install Hibernate on Windows, or Unix and then proceed to the next step to download .zip file for windows and .tz file for Unix.</p></li>
<li><p>Download the latest version of Struts2 binaries from <a target="_blank" rel="nofollow" href="http://struts.apache.org/download.cgi">http://struts.apache.org/download.cgi</a>.</p></li>
<li><p>At the time of writing this tutorial, I downloaded <b>struts-2.0.14-all.zip</b> and when you unzip the downloaded file it will give you directory structure inside C:\struts-2.2.3 as follows.</p></li>
</ul>
<center>
<img src="../images/struts_directories.jpg" alt="Sturts Directories" />
</center>
<p>Second step is to extract the zip file  in any location, I downloaded &amp; extracted <b>struts-2.2.3-all.zip</b> in <b>c:\</b> folder on my Windows 7 machine so that I have all the jar files into <b>C:\struts-2.2.3\lib</b>. Make sure you set your CLASSPATH variable properly otherwise you will face problem while running your application.</p>
<h2>Struts 2 Architecture:</h2>
<p>From a high level, Struts2 is a pull-MVC (or MVC2) framework. The Model-View-Controller pattern in Struts2 is realized with following five core components:</p>
<ul class="list">
<li><p><b>Actions</b></p></li>
<li><p><b>Interceptors</b></p></li>
<li><p><b>Value Stack / OGNL</b></p></li>
<li><p><b>Results / Result types</b></p></li>
<li><p><b>View technologies</b></p></li>
</ul>
<p>Struts 2 is slightly different from a traditional MVC framework in that the action takes the role of the model rather than the controller, although there is some overlap.</p>
<center>
<img src="../images/struts_2_architecture.gif" alt="Struts 2 Architecture"/>
</center>
<p>The above diagram depicts the <b><u>M</u></b>odel, <b><u>V</u></b>iew and <b><u>C</u></b>ontroller to the Struts2 high level architecture. The controller is implemented with a Struts2 dispatch servlet filter as well as interceptors, the model is implemented with actions, and the view as a combination of result types and results. The value stack and OGNL provide common thread, linking and enabling integration between the other components.</p>
<p>Apart from the above components, there will be a lot of information that relates to configuration. Configuration for the web application, as well as configuration for actions, interceptors, results, etc.</p> 
<p>This is the architectural overview of the Struts 2 MVC pattern. We will go through each component in more detail in the subsequent chapters.</p>
<h2>Request life cycle:</h2>
<p>Based on the above digram, one can explain the user's request life cycle in Struts 2 as follows:</p>
<ul class="list">
<li><p>User sends a request to the server for requesting for some resource (i.e pages).</p></li>
<li><p>The FilterDispatcher looks at the request and then determines the appropriate Action.</p></li>
<li><p>Configured interceptors functionalities applies such as validation, file upload etc.</p></li>
<li><p>Selected action is executed to perform the requested operation.</p></li>
<li><p>Again, configured interceptors are applied to do any post-processing if required.</p></li>
<li><p>Finally the result is prepared by  the view and returns the result to the user.</p></li>
</ul>
<h2>Struts 2 Hello World Example:</h2>
<p>As you  learnt from the Struts 2 architecture, when you click on a hyperlink or submit an HTML form in a Struts 2 web application, the input is collected by the Controller which is sent to a Java class called Actions. After the Action is executed, a Result selects a resource to render the response. The resource is generally a JSP, but it can also be a PDF file, an Excel spreadsheet, or a Java applet window.</p>
<p>Assume you already build-up your development environment. Now let us proceed for building our first <b>Hello World</b> struts2 project.  The aim of this project is to build a web application that collects the user's name and displays "Hello World" followed by the user name. We would have to create following four components for any Struts 2 project:</p>
<table class="src"> 
<tr><th style="width:5">SN </th><th>Components &amp; Description</th></tr> 
<tr><td>1</td><td><b>Action</b><br />Create an action class which will contain complete business logic and conrol the interaction between the user, the model, and the view.</td></tr> 
<tr><td>2</td><td><b>Interceptors</b><br />Create interceptors if required, or use existing interceptors. This is part of Controller.</td></tr> 
<tr><td>3</td><td><b>View</b><br />Create a JSPs to interact with the user to take input and to present the final messages.</td></tr> 
<tr><td>4</td><td><b>Configuration Files</b><br />Create configuration files to couple the Action, View and Controllers. These files are struts.xml, web.xml, struts.properties.</td></tr> 
</table>
<p>I am going to use Eclipse IDE, so all the required components will be created under a Dynamic Web Project. So let us start with creating Dynamic Web Project.</p>
<h2>Create a Dynamic Web Project:</h2>
<p>Start your Eclipse and then go with <b>File &gt; New &gt; Dynamic Web Project</b> and enter project name as <b>HelloWorldStruts2</b> and set rest of the options as given in the following screen:</p>
<center>
<img class="main" src="../images/helloworldstruts1.jpg" alt="Hello World Sturts2" />
</center>
<p>Select all the default options in the next screens and finally check <b>Generate Web.xml deployment descriptor</b> option. This will create a dynamic web project for you in Eclipse. Now go with <b>Windows &gt; Show View &gt; Project Explorer</b>, and you will see your project window something as below:</p>
<center>
<img class="main" src="../images/helloworldstruts2.jpg" alt="Hello World Sturts2" />
</center>
<p>Now copy following files from struts 2 lib folder <b>C:\struts-2.2.3\lib</b> to our project's <b>WEB-INF\lib</b> folder. To so this, you can simply drag and drop all the following files into WEB-INF\lib folder.</p>
<ul class="list">
<li><p>commons-fileupload-x.y.z.jar</p></li>
<li><p>commons-io-x.y.z.jar</p></li>
<li><p>commons-lang-x.y.jar</p></li>
<li><p>commons-logging-x.y.z.jar</p></li>
<li><p>commons-logging-api-x.y.jar</p></li>
<li><p>freemarker-x.y.z.jar</p></li>
<li><p>javassist-.xy.z.GA</p></li>
<li><p>ognl-x.y.z.jar</p></li>
<li><p>struts2-core-x.y.z.jar</p></li>
<li><p>xwork-core.x.y.z.jar</p></li>
</ul>
<h2>Create Action Class:</h2>
<p>Action class is the key to Struts 2 application and we implement most of the business logic in action class. So let us create a java file HelloWorldAction.java under <b>Java Resources &gt; src</b> with a package name <b>com.tutorialspoint.struts2</b> with the contents given below.</p>
<p>The Action class responds to a user action when user clicks a URL. One or more of the Action class's methods are executed and a String result is returned. Based on the value of the result, a specific JSP page is rendered.</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

public class HelloWorldAction{
   private String name;

   public String execute() throws Exception {
      return "success";
   }
   
   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }
}
</pre>
<p>This is a very simple class with one property called "name". We have standard getters and setter methods for the "name" property and an execute method that returns the string "success".</p>
<p>The Struts 2 framework will create an object of the HelloWorldAction class and call the execute method in response to a user's action. You put your business logic inside execute method and finally returns the String constant. Simply saying for for each URL, you would have to implement one action class and either you can use that class name directly as your action name or you can map to some other name using struts.xml file as shown below.</p>
<h2>Create a View</h2>
<p>We need a JSP to present the final message, this page will be called by Struts 2 framework when a predefined action will happen and this mapping will be defined in struts.xml file. So let us create the below jsp file <b>HelloWorld.jsp</b> in the WebContent folder in your eclipse project. To do this, right click on the WebContent folder in the project explorer and select <b>New &gt;JSP File</b>.</p>
<pre class="prettyprint">
&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   Hello World, &lt;s:property value="name"/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>The taglib directive tells the Servlet container that this page will be using the Struts 2 tags and that these tags will be preceded by s. The s:property tag displays the value of action class property "name> which is returned by the method <b>getName()</b> of the HelloWorldAction class.</p>
<h2>Create main page:</h2>
<p>We also need to create <b>index.jsp</b> in the WebContent folder. This file will serve as the initial action URL where a user can click to tell the Struts 2 framework to call the a defined method of the HelloWorldAction class and render the HelloWorld.jsp view.</p>
<pre class="prettyprint">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
   &lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h1&gt;Hello World From Struts2&lt;/h1&gt;
   &lt;form action="hello"&gt;
      &lt;label for="name"&gt;Please enter your name&lt;/label&gt;&lt;br/&gt;
      &lt;input type="text" name="name"/&gt;
      &lt;input type="submit" value="Say Hello"/&gt;
   &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>The <b>hello</b> action defined in the above view file will be mapped to the HelloWorldAction class and its execute method using struts.xml file. When a user clicks on the Submit button it will cause the Struts 2 framework to run the execute method defined in the HelloWorldAction class and based on the returned value of the method, an appropriate view will be selected and rendered as a response.</p>
<h2>Configuration Files</h2>
<p>We need a mapping to tie the URL, the HelloWorldAction class (Model), and the HelloWorld.jsp (the view) together. The mapping tells the Struts 2 framework which class will respond to the user's action (the URL), which method of that class will be executed, and what view to render based on the String result that method returns.</p>
<p>So let us create a file called <b>struts.xml</b>. Since Struts 2 requires struts.xml to be present in classes folder. So create struts.xml file under the WebContent/WEB-INF/classes folder. Eclipse does not create the "classes" folder by default, so you need to do this yourself. To do this, right click on the WEB-INF folder in the project explorer and select <b>New &gt; Folder</b>. Your struts.xml should look like:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
&lt;struts&gt;
&lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;
     
      &lt;action name="hello" 
            class="com.tutorialspoint.struts2.HelloWorldAction" 
            method="execute"&gt;
            &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
      &lt;/action&gt;
   &lt;/package&gt;
&lt;/struts&gt;
</pre>
<p>Few words about the above configuration file. Here we set the constant <b>struts.devMode</b> to <b>true</b>, because we are working in development environment and we need to see some useful log  messages. Then, we defined a package called <b>helloworld</b>. Creating a package is useful when you want  to group your actions together. In our example, we named our action as "hello" which is corresponding to the URL <b>/hello.action</b> and is backed up by the <b>HelloWorldAction.class</b>. The <b>execute</b> method of <b>HelloWorldAction.class</b> is the method that is run when the URL <b>/hello.action</b> is invoked. If the outcome of the <b>execute</b> method returns "success", then we take the user to <b>HelloWorld.jsp</b>.</p>
<p>Next step is to create a <b>web.xml</b> file which is an entry point for any request to Struts 2. The entry point of Struts2 application will be a filter defined in deployment descriptor (web.xml). Hence we will define an entry oforg.apache.struts2.dispatcher.FilterDispatcher class in web.xml. The web.xml file needs to be created under the WEB-INF folder under WebContent. Eclipse had already created a skelton web.xml file for you when you created the project. So, lets just modify it as follows:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
   id="WebApp_ID" version="3.0"&gt;
   
   &lt;display-name&gt;Struts 2&lt;/display-name&gt;
   &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
   &lt;/welcome-file-list&gt;
   &lt;filter&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;filter-class&gt;
         org.apache.struts2.dispatcher.FilterDispatcher
      &lt;/filter-class&gt;
   &lt;/filter&gt;

   &lt;filter-mapping&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/filter-mapping&gt;
&lt;/web-app&gt;
</pre>
<p>We have specified index.jsp to be our welcome file. Then we have configured the Struts2 filter to run on all urls (i.e, any url that match the pattern /*)</p>
<h2>Enable Detailed Log:</h2>
<p>You can enabled complete logging functionality while working with Struts 2 by creating <b>logging.properties</b> file under <b>WEB-INF/classes</b> folder. Keep the following two lines in your property file:</p>
<pre class="prettyprint"> 
org.apache.catalina.core.ContainerBase.[Catalina].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].handlers = \
                              java.util.logging.ConsoleHandler
</pre> 
<p>The default logging.properties specifies a ConsoleHandler for routing logging to stdout and also a FileHandler. A handler's log level threshold can be set using SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST or ALL.</p>
<p>That's it. We are ready to run our Hello World application using Struts 2 framework.</p>
<h2>Execute the Application</h2>
<p>Right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/index.jsp. This will give you following screen:</p>
<center>
<img class="main" src="../images/helloworldstruts4.jpg" alt="Hello World Input" />
</center>
<p>Enter a value "Struts2" and submit the page. You should see the next page</p>
<center>
<img class="main" src="../images/helloworldstruts5.jpg" alt="Hello World Result" />
</center>
<p>Note that you can define <b>index</b> as an action in struts.xml file and in that case you can call index page as http://localhost:8080/HelloWorldStruts2/index.action. Check below how you can define index as an action:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
&lt;struts&gt;
&lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;

      &lt;action name="index"&gt;
            &lt;result &gt;/index.jsp&lt;/result&gt;
      &lt;/action&gt;

      &lt;action name="hello" 
            class="com.tutorialspoint.struts2.HelloWorldAction" 
            method="execute"&gt;
            &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
      &lt;/action&gt;

   &lt;/package&gt;
&lt;/struts&gt;
</pre>
<h2>Struts 2 Configuration Files</h2>
<p>This chapter will take you through basic configuration required for a Struts 2 application.  Here we will see what will be configured in few important configuration files : <b>web.xml, struts.xml, struts-config.xml</b> and <b>struts.properties</b></p>
<p>Honestly speaking you can survive using web.xml and struts.xml configuration files and you have seen in previous chapter that our example worked using these two files, but for your knowledge let me explain other files as well.</p>
<h2>The web.xml file:</h2>
<p>The web.xml configuration file is a J2EE configuration file that determines how elements of the HTTP request are processed by the servlet container. It is not strictly a Struts2 configuration file, but it is a file that needs to be configured for Struts2 to work.</p>
<p>As discussed earlier, this file provides an entry point for any web application. The entry point of Struts2 application will be a filter defined in deployment descriptor (web.xml). Hence we will define an entry of  <i>FilterDispatcher</i> class in web.xml. The web.xml file needs to be created under the folder <b>WebContent/WEB-INF</b>.</p>
<p>This is the first configuration file you will need to configure if you are starting without the aid of a template or tool that generates it (such as Eclipse or Maven2). Following is the content of web.xml file which we used in our last example.</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
   id="WebApp_ID" version="3.0"&gt;
   
   &lt;display-name&gt;Struts 2&lt;/display-name&gt;
   &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
   &lt;/welcome-file-list&gt;
   
   &lt;filter&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;filter-class&gt;
         org.apache.struts2.dispatcher.FilterDispatcher
      &lt;/filter-class&gt;
   &lt;/filter&gt;

   &lt;filter-mapping&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/filter-mapping&gt;

&lt;/web-app&gt;
</pre>
<p>Note that we map the Struts 2 filter to <b>/*</b>, and not to <b>/*.action</b> which means that all urls will be parsed by the struts filter. We will cover this when we will go through the Annotations chapter.</p>
<h2>The struts.xml file:</h2>
<p>The <b>struts.xml</b> file contains the configuration information that you will be modifying as actions are developed. This file can be used  to override default settings for an application, for example <i>struts.devMode = false</i> and other settings which are defined in property file. This file can be created under the folder <b>WEB-INF/classes</b>.</p>
<p>Let us have a look at the struts.xml file we created in the Hello World example explained in previous chapter.</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
&lt;struts&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;
     
      &lt;action name="hello" 
            class="com.tutorialspoint.struts2.HelloWorldAction" 
            method="execute"&gt;
            &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
      &lt;/action&gt;
      &lt;-- more actions can be listed here --&gt;

   &lt;/package&gt;
   &lt;-- more packages can be listed here --&gt;

&lt;/struts&gt;
</pre>
<p>The first thing to note is the <b>DOCTYPE</b>. All struts configuration file need to have the correct doctype as shown in our little example. &lt;struts&gt; is the root tag element, under which we declare different packages using &lt;package&gt; tags. Here &lt;package&gt; allows separation and modularization of the configuration. This is very useful when you have a large project and project is divided into different modules.</p>
<p>Say, if your project has three domains - business_applicaiton, customer_application and staff_application, you could create three packages and store associated actions in the appropriate package. The package tag has the following attributes:</p>
<table class="src"> 
<tr><th style="width:25%">Attribute</th><th>Description</th></tr> 
<tr><td>name (required)</td><td>The unique identifier for the package</td></tr> 
<tr><td>extends</td><td>Which package does this package extend from? By default, we use struts-default as the base package.</td></tr> 
<tr><td>abstract</td><td>If marked true, the package is not available for end user consumption.</td></tr> 
<tr><td>namesapce</td><td>Unique namespace for the actions</td></tr> 
</table>
<p>The <b>constant</b> tag  along with name and value attributes will be used to override any of the following properties defined in <b>default.properties</b>, like we just set <b>struts.devMode</b> property. Setting  <b>struts.devMode</b> property allows us to see more debug messages in the log file.</p>
<p>We define <b>action</b> tags corresponds to every URL we want to access and we define a class with execute() method which will be accessed whenever we will access corresponding URL.</p>
<p>Results determine what gets returned to the browser after an action is executed. The string returned from the action should be the name of a result. Results are configured per-action as above, or as a "global" result, available to every action in a package. Results have optional <b>name</b> and <b>type</b> attributes. The default name value is "success".</p>
<p>Struts.xml file can grow big over time and so breaking it by packages is one way of modularizing it, but struts offers another way to modularize the struts.xml file. You could split the file into multiple xml files and import them in the following fashion.</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
&lt;struts&gt;
     &lt;include file="my-struts1.xml"/&gt;
     &lt;include file="my-struts2.xml"/&gt;
&lt;/struts&gt;
</pre>
<p>The other configuration file that we haven't covered is the struts-default.xml. This file contains the standard configuration settings for Struts and you would not have to touch these settings for 99.99% of your projects. For this reason, we are not going into too much detail on this file. If you are interested, take a look into the at the <b>default.properties</b> file available in struts2-core-2.2.3.jar file.</p>
<h2>The struts-config.xml file:</h2>
<p>The struts-config.xml configuration file is a link between the View and Model components in the Web Client but you would not have to touch these settings for 99.99% of your projects. The configuration file basically contains following main elements:</p>
<table class="src"> 
<tr><th style="width:5">SN </th><th>Interceptor &amp; Description</th></tr> 
<tr><td>1</td><td><b>struts-config</b><br />This is the root node of the configuration file.</td></tr> 
<tr><td>2</td><td><b>form-beans</b><br />This is where you map your ActionForm subclass to a name. You use this name as an alias for your ActionForm throughout the rest of the struts-config.xml file, and even on your JSP pages.</td></tr> <tr><td>3</td><td><b>global forwards</b><br />This section maps a page on your webapp to a name. You can use this name to refer to the actual page. This avoids hardcoding URLs on your web pages.</td></tr> 
<tr><td>4</td><td><b>action-mappings</b><br />This is where you declare form handlers and they are also known as <b>action mappings</b>.</td></tr> 
<tr><td>5</td><td><b>controller</b><br />This section configures Struts internals and rarely used in practical situations.</td></tr> 
<tr><td>6</td><td><b>plug-in</b><br />This section tells Struts where to find your properties files, which contain prompts and error messages</td></tr> 
</table>
<p>Following is the sample struts-config.xml file:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;!DOCTYPE struts-config PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 1.0//EN"
"http://jakarta.apache.org/struts/dtds/struts-config_1_0.dtd"&gt;

&lt;struts-config&gt;

   &lt;!-- ========== Form Bean Definitions ============ --&gt;
   &lt;form-beans&gt;
      &lt;form-bean name="login" type="test.struts.LoginForm" /&gt;
   &lt;/form-beans&gt;

   &lt;!-- ========== Global Forward Definitions ========= --&gt;
   &lt;global-forwards&gt;
   &lt;/global-forwards&gt;

   &lt;!-- ========== Action Mapping Definitions ======== --&gt;
   &lt;action-mappings&gt;
      &lt;action
         path="/login"
         type="test.struts.LoginAction" &gt;

         &lt;forward name="valid" path="/jsp/MainMenu.jsp" /&gt;
         &lt;forward name="invalid" path="/jsp/LoginView.jsp" /&gt;
      &lt;/action&gt;
   &lt;/action-mappings&gt;

   &lt;!-- ========== Controller Definitions ======== --&gt;
   &lt;controller 
      contentType="text/html;charset=UTF-8"
      debug="3"
      maxFileSize="1.618M"
      locale="true"
      nocache="true"/&gt;

&lt;/struts-config&gt;
</pre>
<p>For more detail on struts-config.xml file, kindly check your struts documentation.</p>
<h2>The struts.properties file</h2>
<p>This configuration file provides a mechanism to change the default behavior of the framework. Actually all of the properties contained within the <b>struts.properties</b> configuration file can also be configured in the <b>web.xml</b> using the <b>init-param</b>, as well using the <b>constant</b> tag in the <b>struts.xml</b> configuration file. But if you like to keep the things separate and more struts specific then you can create this file under the folder <b>WEB-INF/classes</b>.</p>
<p>The values configured in this file will override the default values configured in <b>default.properties</b> which is contained in the struts2-core-x.y.z.jar distribution. There are a couple of properties that you might consider changing using <b>struts.properties</b> file:</p>
<pre class="prettyprint">
### When set to true, Struts will act much more friendly for developers
struts.devMode = true

### Enables reloading of internationalization files
struts.i18n.reload = true

### Enables reloading of XML configuration files
struts.configuration.xml.reload = true

### Sets the port that the server is run on
struts.url.http.port = 8080
</pre>
<p>Here any line starting with hash (#) will be assumed as a comment and it will be ignored by Struts 2.</p>
<h2>Struts 2 Actions:</h2>
<p>Actions are the core of the Struts2 framework, as they are for any MVC (Model View Controller) framework. Each URL is mapped to a specific action, which provides the processing logic necessary to service the request from the user.</p>
<p>But the action also serves in two other important capacities. First, the action plays an important role in the transfer of data from the request through to the view, whether its a JSP or other type of result. Second, the action must assist the framework in determining which result should render the view that will be returned in the response to the request.</p>
<h3>Create Action:</h3>
<p>The only requirement for actions in Struts2 is that there must be one no-argument method that returns either a String or Result object and must be a POJO. If the no-argument method is not specified, the default behavior is to use the execute() method.</p>
<p>Optionally you can extend the <b>ActionSupport</b> class which implements six interfaces including <b>Action</b> interface. The Action interface is as follows:</p>
<pre class="prettyprint">
public interface Action {
   public static final String SUCCESS = "success";
   public static final String NONE = "none";
   public static final String ERROR = "error";
   public static final String INPUT = "input";
   public static final String LOGIN = "login";
   public String execute() throws Exception;
}
</pre>
<p>Let us take a look at the action method in the Hello World example:</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

public class HelloWorldAction{
   private String name;

   public String execute() throws Exception {
      return "success";
   }
   
   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }
}
</pre>
<p>To illustrate the point that the action method controls the view, let us make the following change to the <b>execute</b> method and extend the class ActionSupport as follows:</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

import com.opensymphony.xwork2.ActionSupport;

public class HelloWorldAction extends ActionSupport{
   private String name;

   public String execute() throws Exception {
      if ("SECRET".equals(name))
      {
         return SUCCESS;
      }else{
         return ERROR;  
      }
   }
   
   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }
}
</pre>
<p>In this example, we have some logic in the execute method to look at the name attribute. If the attribute equals to the string "SECRET", we return SUCCESS as the result otherwise we return ERROR as the result. Because we have extended ActionSupport, so we can use String constants SUCCESS and ERROR. Now, let us modify our struts.xml file as follows:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
   &lt;struts&gt;
      &lt;constant name="struts.devMode" value="true" /&gt;
      &lt;package name="helloworld" extends="struts-default"&gt;
         &lt;action name="hello" 
            class="com.tutorialspoint.struts2.HelloWorldAction"
            method="execute"&gt;
            &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
            &lt;result name="error"&gt;/AccessDenied.jsp&lt;/result&gt;
         &lt;/action&gt;
      &lt;/package&gt;
&lt;/struts&gt;
</pre>
<h3>Create a View</h3>
<p>Let us create the below jsp file <b>HelloWorld.jsp</b> in the WebContent folder in your eclipse project. To do this, right click on the WebContent folder in the project explorer and select <b>New &gt;JSP File</b>. This file will be called in case return result is SUCCESS which is a String constant "success" as defined in Action interface:</p>
<pre class="prettyprint">
&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   Hello World, &lt;s:property value="name"/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Following is the file which will be invoked by the framework in case action result is ERROR which is equal to String constant "error". Following is the content of <b>AccessDenied.jsp</b></p>
<pre class="prettyprint">
&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Access Denied&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   You are not authorized to view this page.
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>We also need to create <b>index.jsp</b> in the WebContent folder. This file will serve as the initial action URL where the user can click to tell the Struts 2 framework to call the <b>execute</b> method of the HelloWorldAction class and render the HelloWorld.jsp view.</p>
<pre class="prettyprint">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
   &lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h1&gt;Hello World From Struts2&lt;/h1&gt;
   &lt;form action="hello"&gt;
      &lt;label for="name"&gt;Please enter your name&lt;/label&gt;&lt;br/&gt;
      &lt;input type="text" name="name"/&gt;
      &lt;input type="submit" value="Say Hello"/&gt;
   &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>That's it, there is no change required web.xml file, so let us use same web.xml which we had created in Examples chapter. Now we are ready to run our Hello World application using Struts 2 framework.</p>
<h2>Execute the Application</h2>
<p>Right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/index.jsp. This will give you following screen:</p>
<center>
<img class="main" src="../images/helloworldstruts4.jpg" alt="Hello World Input" />
</center>
<p>Let us enter a word as "SECRET" and you should see the following page:</p>
<center>
<img class="main" src="../images/helloworldstruts51.jpg" alt="Success Result" />
</center>
<p>Now enter any word other than "SECRET" and you should see the following page:</p>
<center>
<img class="main" src="../images/helloworldstruts6.jpg" alt="Access Denied Result" />
</center>
<h2>Create Multiple Actions:</h2>
<p>You will frequently define more than one actions to handle different requests and to provide different URLs to the users, accordingly you will define different classes as defined below:</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;
import com.opensymphony.xwork2.ActionSupport;

   class MyAction extends ActionSupport{
      public static String GOOD = SUCCESS;
      public static String BAD = ERROR;
   }

   public class HelloWorld extends ActionSupport{
      ...
      public String execute()
      {
         if ("SECRET".equals(name)) return MyAction.GOOD;
         return MyAction.BAD;
      }
      ...
   }

   public class SomeOtherClass extends ActionSupport{
      ...
      public String execute()
      {
         return MyAction.GOOD;
      }
      ...
   }
</pre>
<p>You will configure these actions in struts.xml file as follows:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
struts&gt;
 &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;
      &lt;action name="hello" 
         class="com.tutorialspoint.struts2.HelloWorld" 
         method="execute"&gt;
         &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
         &lt;result name="error"&gt;/AccessDenied.jsp&lt;/result&gt;
      &lt;/action&gt;
      &lt;action name="something" 
         class="com.tutorialspoint.struts2.SomeOtherClass" 
         method="execute"&gt;
         &lt;result name="success"&gt;/Something.jsp&lt;/result&gt;
         &lt;result name="error"&gt;/AccessDenied.jsp&lt;/result&gt;
      &lt;/action&gt;
   &lt;/package&gt;
&lt;/struts&gt;
</pre>
<p>As you can see in the above hypothetical example, the action results SUCCESS and ERROR are duplicated. To get around this issue, it is suggested that you create a class that contain the result outcomes.</p>
<h2>Struts 2 Interceptors:</h2>
<p>Interceptors are conceptually the same as servlet filters or the JDKs Proxy class. Interceptors allow for crosscutting functionality to be implemented separately from the action as well as the framework. You can achieve the following using interceptors:</p>
<ul class="list">
<li><p>Providing preprocessing logic before the action is called.</p></li>
<li><p>Providing postprocessing logic after the action is called.</p></li>
<li><p>Catching exceptions so that alternate processing can be performed.</p></li>
</ul>
<p>Many of the features provided in the Struts2 framework are implemented using interceptors; examples include exception handling, file uploading, lifecycle callbacks and validation etc. In fact, as Struts2 bases much of its functionality on interceptors,
it is not unlikely to have 7 or 8 interceptors assigned per action.</p>
<h2>Struts2 Framework Interceptors:</h2>
<p>Struts 2 framework provides a good list of out-of-the-box interceptors that come preconfigured and ready to use. Few of the important interceptors are listed below:</p> 
<table class="src"> 
<tr><th style="width:5">SN </th><th>Interceptor &amp; Description</th></tr>
<tr><td>1</td><td><b>alias</b><br />Allows parameters to have different name aliases across requests.</td></tr> 
<tr><td>2</td><td><b>checkbox</b><br />Assists in managing check boxes by adding a parameter value of false for check boxes that are not checked.</td></tr> 
<tr><td>3</td><td><b>conversionError</b><br />Places error information from converting strings to parameter types into the action's field errors.</td></tr> 
<tr><td>4</td><td><b>createSession</b><br />Automatically creates an HTTP session if one does not already exist.</td></tr> 
<tr><td>5</td><td><b>debugging</b><br />Provides several different debugging screens to the developer.</td></tr> 
<tr><td>6</td><td><b>execAndWait</b><br />Sends the user to an intermediary waiting page while the action executes in the background.</td></tr> 
<tr><td>7</td><td><b>exception</b><br />Maps exceptions that are thrown from an action to a result, allowing automatic exception handling via redirection.</td></tr> 
<tr><td>8</td><td><b>fileUpload</b><br />Facilitates easy file uploading.</td></tr> 
<tr><td>9</td><td><b>i18n</b><br />Keeps track of the selected locale during a user's session.</td></tr> 
<tr><td>10</td><td><b>logger</b><br />Provides simple logging by outputting the name of the action being executed.</td></tr> 
<tr><td>11</td><td><b>params</b><br />Sets the request parameters on the action.</td></tr> 
<tr><td>12</td><td><b>prepare</b><br />This is typically used to do pre-processing work, such as setup database connections.</td></tr> 
<tr><td>13</td><td><b>profile</b><br />Allows simple profiling information to be logged for actions.</td></tr> 
<tr><td>14</td><td><b>scope</b><br />Stores and retrieves the action's state in the session or application scope.</td></tr> 
<tr><td>15</td><td><b>ServletConfig</b><br />Provides the action with access to various servlet-based information.</td></tr> 
<tr><td>16</td><td><b>timer</b><br />Provides simple profiling information in the form of how long the action takes to execute.</td></tr> 
<tr><td>17</td><td><b>token</b><br />Checks the action for a valid token to prevent duplicate formsubmission.</td></tr> 
<tr><td>18</td><td><b>validation</b><br />Provides validation support for actions</td></tr> 
</table>
<p>Please loook into Struts 2 documentation for complete detail on above mentioned interceptors. But I will show you how to use an interceptor in general in your Struts application.</p>
<h2>How to use Interceptors?</h2> 
<p>Let us see how to use an already existing interceptor to our "Hello World" program. We will use the <b>timer</b> interceptor whose purpose is to measure how long it took to execute an action method. Same time I'm using <b>params</b> interceptor whose purpose is to send the request parameters to  the action. You can try your example without using this interceptor and you will find that <b>name</b> property is not being set because parameter is not able to reach to the action.</p> 
<p>We will keep HelloWorldAction.java, web.xml, HelloWorld.jsp and index.jsp files as they have been created in Examples chapter but let us modify the <b>struts.xml</b> file to add an interceptor as follows </p> 
<pre class="prettyprint"> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
&lt;struts&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;
      &lt;action name="hello" 
         class="com.tutorialspoint.struts2.HelloWorldAction"
         method="execute"&gt;
         &lt;interceptor-ref name="params"/&gt;
         &lt;interceptor-ref name="timer" /&gt;
         &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
      &lt;/action&gt;
   &lt;/package&gt;
&lt;/struts&gt;
</pre> 
<p>Right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/index.jsp. This will give you following screen:</p> 
<center> 
<img class="main" src="../images/helloworldstruts4.jpg" alt="Hello World Input" /> 
</center> 
<p>Now enter any word in the given text box and click Say Hello button to execute the defined action. Now if you will check the log generated, you will find following text:</p> 

<pre class="prettyprint"> 
INFO: Server startup in 3539 ms
27/08/2011 8:40:53 PM 
com.opensymphony.xwork2.util.logging.commons.CommonsLogger info
INFO: Executed action [//hello!execute] took 109 ms.
</pre> 
<p> Here bottom line is being generated because of <b>timer</b> interceptor which is telling that action took total 109ms to be executed.</p>
<h2>Create Custom Interceptors</h2>
<p>Using custom interceptors in your application is an elegant way to provide cross-cutting application features. Creating a custom interceptor is easy; the interface that needs to be extended is the following <b>Interceptor</b> interface:</p>
<pre class="prettyprint"> 
public interface Interceptor extends Serializable{
   void destroy();
   void init();
   String intercept(ActionInvocation invocation)
   throws Exception;
}
</pre> 
<p>As the names suggest, the init() method provides a way to initialize the interceptor, and the destroy() method provides a facility for interceptor cleanup. Unlike actions, interceptors are reused across requests and need to be thread-safe, especially the intercept() method.</p>
<p>The <b>ActionInvocation</b> object provides access to the runtime environment. It allows access to the action itself and methods to invoke the action and determine whether the action has already been invoked.</p>
<p>If you have no need for initialization or cleanup code, the <b>AbstractInterceptor</b> class can be extended. This provides a default no-operation implementation of the init() and destroy() methods.</p>
<h2>Create Interceptor Class:</h2>
<p>Let us create following <b>MyInterceptor.java</b> in <b>Java Resources &gt; src</b> folder:</p> 
<pre class="prettyprint"> 
package com.tutorialspoint.struts2;

import java.util.*;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.AbstractInterceptor;

public class MyInterceptor extends AbstractInterceptor {

   public String intercept(ActionInvocation invocation)throws Exception{

      /* let us do some pre-processing */
      String output = "Pre-Processing"; 
      System.out.println(output);

      /* let us call action or next interceptor */
      String result = invocation.invoke();

      /* let us do some post-processing */
      output = "Post-Processing"; 
      System.out.println(output);

      return result;

   }
}
</pre> 
<p>As you notice, actual action will be executed using the interceptor by <b>invocation.invoke()</b> call. So you can do some pre-processing and some post-processing based on your requirement.</p>
<p>The framework itself starts the process by making the first call to the ActionInvocation object's invoke(). Each time <b>invoke()</b> is called, ActionInvocation consults its state and executes whichever interceptor comes next. When all of the configured interceptors have been invoked, the invoke() method will cause the action itself to be executed. Following digram shows the same concept through a request flow:</p>
<center> 
<img class="main" src="../images/actioninvocation.jpg" alt="ActionInvocation" /> 
</center> 
<h2>Create Action Class:</h2>
<p>Let us create a java file HelloWorldAction.java under <b>Java Resources &gt; src</b> with a package name <b>com.tutorialspoint.struts2</b> with the contents given below.</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

import com.opensymphony.xwork2.ActionSupport;

public class HelloWorldAction extends ActionSupport{
   private String name;

   public String execute() throws Exception {
      System.out.println("Inside action....");
      return "success";
   }  

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }
}
</pre>
<p>This is a same class which we have seen in previous examples. We have standard getters and setter methods for the "name" property and an execute method that returns the string "success".</p>
<h2>Create a View</h2>
<p>Let us create the below jsp file <b>HelloWorld.jsp</b> in the WebContent folder in your eclipse project.</p>
<pre class="prettyprint">
&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   Hello World, &lt;s:property value="name"/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<h2>Create main page:</h2>
<p>We also need to create <b>index.jsp</b> in the WebContent folder. This file will serve as the initial action URL where a user can click to tell the Struts 2 framework to call the a defined method of the HelloWorldAction class and render the HelloWorld.jsp view.</p>
<pre class="prettyprint">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
   &lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h1&gt;Hello World From Struts2&lt;/h1&gt;
   &lt;form action="hello"&gt;
      &lt;label for="name"&gt;Please enter your name&lt;/label&gt;&lt;br/&gt;
      &lt;input type="text" name="name"/&gt;
      &lt;input type="submit" value="Say Hello"/&gt;
   &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>The <b>hello</b> action defined in the above view file will be mapped to the HelloWorldAction class and its execute method using struts.xml file.</p>
<h2>Configuration Files</h2>
<p>Now we need to register our interceptor and then call it as we had called default interceptor in previous example. To register a newly defined interceptor, the &lt;interceptors&gt;...&lt;/interceptors&gt; tags are placed directly under the &lt;package&gt; tag ins <b>struts.xml</b> file. You can skip this step for a default interceptors as we did in our previous example. But here let us register and use it as follows:</p> 
<pre class="prettyprint"> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;

&lt;struts&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;

      &lt;interceptors&gt;
         &lt;interceptor name="myinterceptor"
            class="com.tutorialspoint.struts2.MyInterceptor" /&gt;
      &lt;/interceptors&gt;

      &lt;action name="hello" 
         class="com.tutorialspoint.struts2.HelloWorldAction" 
         method="execute"&gt;
         &lt;interceptor-ref name="params"/&gt;
         &lt;interceptor-ref name="myinterceptor" /&gt;
         &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
      &lt;/action&gt;

   &lt;/package&gt;
&lt;/struts&gt;
</pre> 
<p>It should be noted that you can register more than one interceptors inside <b>&lt;package&gt;</b> tag and same time you can call more than one interceptors inside the <b>&lt;action&gt;</b> tag. You can call same interceptor with the different actions.</p> 
<p>The web.xml file needs to be created under the WEB-INF folder under WebContent as follows:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
   id="WebApp_ID" version="3.0"&gt;
   
   &lt;display-name&gt;Struts 2&lt;/display-name&gt;
   &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
   &lt;/welcome-file-list&gt;
   &lt;filter&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;filter-class&gt;
         org.apache.struts2.dispatcher.FilterDispatcher
      &lt;/filter-class&gt;
   &lt;/filter&gt;

   &lt;filter-mapping&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/filter-mapping&gt;
&lt;/web-app&gt;
</pre>
<p>Right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/index.jsp. This will give you following screen:</p> 
<center> 
<img class="main" src="../images/helloworldstruts4.jpg" alt="Hello World Input" /> 
</center> 
<p>Now enter any word in the given text box and click Say Hello button to execute the defined action. Now if you will check the log generated, you will find following text at the bottom:</p> 
<pre class="prettyprint"> 
Pre-Processing
Inside action....
Post-Processing
</pre> 
<h2>Stacking multiple Interceptors:</h2>
<p>As you can imagine, having to configure multiple interceptor for each action would quickly become extremely unmanageable.  For this reason, interceptors are managed with interceptor stacks. Here is an example, directly from the struts-default.xml file:</p>
<pre class="prettyprint"> 
&lt;interceptor-stack name="basicStack"&gt;
   &lt;interceptor-ref name="exception"/&gt;
   &lt;interceptor-ref name="servlet-config"/&gt;
   &lt;interceptor-ref name="prepare"/&gt;
   &lt;interceptor-ref name="checkbox"/&gt;
   &lt;interceptor-ref name="params"/&gt;
   &lt;interceptor-ref name="conversionError"/&gt;
&lt;/interceptor-stack&gt;
</pre> 
<p>The above stake is called <b>basicStack</b> and can be used in your configuration as shown below. This configuration node is placed under the &lt;package .../&gt; node. Each &lt;interceptor-ref .../&gt; tag references either an interceptor or an interceptor stack that has been configured before the current interceptor stack. It is therefore very important to ensure that the name is unique across all interceptor and interceptor stack configurations when configuring the initial interceptors and interceptor stacks.</p>
<p>We have already seen how to apply interceptor to the action, applying interceptor stacks is no different. In fact, we use exactly the same tag:</p>
<pre class="prettyprint"> 
&lt;action name="hello" class="com.tutorialspoint.struts2.MyAction"&gt;
   &lt;interceptor-ref name="basicStack"/&gt;
   &lt;result&gt;view.jsp&lt;/result&gt;
&lt;/action
</pre> 
<p>The above registration of "basicStack" will register  complete stake of all the six interceptors with hello action. This should be noted that interceptors are executed in the order, in which they have been configured. For example, in above case, exception will be executed first, second would be servlet-config and so on.</p>
<h2>Struts 2 Results and Result Types</h2>
<p>As mentioned previously, the <b>&lt;results&gt;</b> tag plays the role of a <b>view</b> in the Struts2 MVC framework. The action is responsible for executing the business logic. The next step after executing the business logic is to display the view using the <b>&lt;results&gt;</b> tag.</p>
<p>Often there is some navigation rules attached with the results. For example, if the action method is to authenticate a user, there are three possible outcomes. (a) Successful Login (b) Unsuccessful Login - Incorrect username or password (c) Account Locked.</p>
<p>In this scenario, the action method will be configured with the three possible outcome strings and three different views to render the outcome. We have already seen this in the previous examples.</p>
<p>But, Struts2 does not tie you up with using JSP as the view technology. Afterall the whole purpose of the MVC paradigm is to keep the layers separate and highly configurable. For example, for a Web2.0 client, you may want to return XML or JSON as the output. In  this case, you could create a new result type for XML or JSON and achieve this.</p>
<p>Struts comes with a number of predefined <b>result types</b> and whatever we've already seen that was the default result type <b>dispatcher</b>, which is used to dispatch to JSP pages. Struts allow you to use other markup languages for the view technology to present the results and popular choices include <b>Velocity, Freemaker, XSLT</b> and <b>Tiles</b>.</p>
<h2>The dispatcher result type:</h2>
<p>The <b>dispatcher</b> result type is the default type, and is used if no other result type is specified. It's used to forward to a servlet, JSP, HTML page, and so on, on the server. It uses the <i>RequestDispatcher.forward()</i> method.</p>
<p>We saw the "shorthand" version in our earlier examples, where we provided a JSP path as the body of the result tag.</p>
<pre class="prettyprint">
&lt;result name="success"&gt;
   /HelloWorld.jsp
&lt;/result&gt;
</pre>
<p>We can also specify the JSP file using a &lt;param name="location"&gt; tag within the &lt;result...&gt; element as follows:</p>
<pre class="prettyprint">
&lt;result name="success" type="dispatcher"&gt;
   &lt;param name="location"&gt;
      /HelloWorld.jsp
   &lt;/param &gt;
&lt;/result&gt;
</pre>
<p>We can also supply a <b>parse</b> parameter, which is true by default. The parse parameter determines whether or not the location parameter will be parsed for OGNL expressions.</p>
<h2>The FreeMaker result type:</h2>
<p>In this example we are going to see how we can use <b>FreeMaker</b> as the view technology. Freemaker is a popular templating engine that is used to generate output using predefined templates. Let us create a Freemaker template file called <b>hello.fm</b> with the following contents:</p>
<pre class="prettyprint">
Hello World ${name}
</pre>
<p>Here above file is a template where <b>name</b> is a paramter which will be passed from outside using the defined action. You will keep this file in your CLASSPATH. Next, let us modify the <b>struts.xml</b> to specify the result as follows:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd"&gt;

&lt;struts&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;

      &lt;action name="hello" 
         class="com.tutorialspoint.struts2.HelloWorldAction"
         method="execute"&gt;
         &lt;result name="success" type="freemarker"&gt;
            &lt;param name="location"&gt;/hello.fm&lt;/param&gt;
         &lt;/result&gt;
      &lt;/action&gt;
      
   &lt;/package&gt;

&lt;/struts&gt;
</pre>
<p>Let us keep our HelloWorldAction.java, HelloWorldAction.jsp and index.jsp files as we have created them in examples chapter. Now Right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/index.jsp. This will give you following screen:</p>
<center>
<img class="main" src="../images/helloworldstruts4.jpg" alt="Hello World Input" />
</center>
<p>Enter a value "Struts2" and submit the page. You should see the next page</p>
<center>
<img class="main" src="../images/helloworldstruts5.jpg" alt="Hello World Result" />
</center>
<p>As you can see, this is exactly same as the JSP view except that we are not tied to using JSP as the view technology. We have used Freemaker in this example.</p>
<h2>The redirect result type:</h2>
<p>The <b>redirect</b> result type calls the standard <i>response.sendRedirect()</i> method, causing the browser to create a new request to the given location.</p>
<p>We can provide the location either in the body of the &lt;result...&gt; element or as a &lt;param name="location"&gt; element. Redirect also supports the <b>parse</b> parameter. Here's an example configured using XML:</p>
<pre class="prettyprint">
&lt;action name="hello" 
   class="com.tutorialspoint.struts2.HelloWorldAction"
   method="execute"&gt;
   &lt;result name="success" type="redirect"&gt;
       &lt;param name="location"&gt;
         /NewWorld.jsp
      &lt;/param &gt;
   &lt;/result&gt;
&lt;/action&gt;
</pre>
<p>So just modify your struts.xml file to define redirect type as mentioned above and create a new file NewWorld.jpg  where you will be redirected whenever hello action will return success.</p>
<h2>Struts2 Value Stack/OGNL</h2>
<h2>The Value Stack:</h2>
<p>The value stack is a set of several objects which keeps the following objects in the provided order:</p>
<table class="src"> 
<tr><th style="width:5">SN </th><th>Objects &amp; Description</th></tr>
<tr><td>1</td><td><b>Temporary Objects</b><br />There are various temporary objects which are created during execution of a page. For example the current iteration value for a collection being looped over in a JSP tag.</td></tr> 
<tr><td>2</td><td><b>The Model Object</b><br />If you are using model objects in your struts application, the current model object is placed before the action on the value stack</td></tr> 
<tr><td>3</td><td><b>The Action Object</b><br />This will be the current action object which is being executed.</td></tr> 
<tr><td>4</td><td><b>Named Objects</b><br />These objects include #application, #session, #request, #attr and #parameters and refer to the corresponding servlet scopes</td></tr>
</table>
<p>The value stack can be accessed via the tags provided for JSP, Velocity or Freemarker. There are various tags which we will study in separate chapters, are used to get and set struts 2.0 value stack. You can get valueStack object inside your action as follows: </p>
<pre class="prettyprint">
ActionContext.getContext().getValueStack()
</pre>
<p>Once you have a ValueStack object, you can use following methods to manipulate that object:</p>
<table class="src"> 
<tr><th style="width:5">SN </th><th>ValueStack Methods &amp; Description</th></tr>
<tr><td>1</td><td><b>Object findValue(String expr)</b><br />Find a value by evaluating the given expression against the stack in the default search order.</td></tr>
<tr><td>2</td><td><b>CompoundRoot getRoot()</b><br />Get the CompoundRoot which holds the objects pushed onto the stack.</td></tr> 
<tr><td>3</td><td><b>Object peek()</b><br />Get the object on the top of the stack without changing the stack.</td></tr>
<tr><td>4</td><td><b>Object pop()</b><br />Get the object on the top of the stack and remove it from the stack.</td></tr> 
<tr><td>5</td><td><b>void push(Object o)</b><br />Put this object onto the top of the stack.</td></tr> 
<tr><td>6</td><td><b>void set(String key, Object o)</b><br />Sets an object on the stack with the given key so it is retrievable by findValue(key,...)</td></tr> 
<tr><td>7</td><td><b>void setDefaultType(Class defaultType)</b><br />Sets the default type to convert to if no type is provided when getting a value.</td></tr> 
<tr><td>8</td><td><b>void setValue(String expr, Object value)</b><br />Attempts to set a property on a bean in the stack with the given expression using the default search order.</td></tr> 
<tr><td>9</td><td><b>int size()</b><br />Get the number of objects in the stack.</td></tr> 
</table>
<h2>The OGNL:</h2>
<p><b>The Object-Graph Navigation Language</b> (OGNL) is a powerful expression language that is used to reference and manipulate data on the ValueStack. OGNL also helps in data transfer and type conversion.</p>
<p>The OGNL is very similar to the JSP Expression Language. OGNL is based on the idea of having a root or default object within the context. The properties of the default or root object can be referenced using the markup notation, which is the pound symbol.</p>
<p>As mentioned earlier, OGNL is based on a context and Struts builds an ActionContext  map for use with OGNL. The ActionContext map consists of the following:</p>
<ul class="list">
  <li><p><b>application</b> - application scoped variables</p></li>
  <li><p><b>session</b> - session scoped variables</p></li>
  <li><p><b>root / value stack</b> - all your action variables are stored here</p></li>
  <li><p><b>request</b> - request scoped variables</p></li>
  <li><p><b>parameters</b> - request parameters</p></li>
  <li><p><b>atributes</b> - the attributes stored in page, request, session and application scope</p></li>
</ul>
<p>It is important to understand that the Action object is always available in the value stack. So, therefore if your Action object has properties x and y there are readily available for you to use.</p>
<p>Objects in the ActionContext are referred using the pound symbol, however, the objects in the value stack can be directly referenced, for example if <b>employee</b> is a property of an action class then it can ge referenced as follows:</p>
<pre class="prettyprint">
  &lt;s:property value="name"/&gt;
</pre>
<p>instead of</p>
<pre class="prettyprint">
  &lt;s:property value="#name"/&gt;
</pre>
<p>If you have an attribute in session called "login" you can retrieve it as follows:</p>
<pre class="prettyprint">
  &lt;s:property value="#session.login"/&gt;
</pre>
<p>OGNL also supports dealing with collections - namely Map, List and Set. For example to display a dropdown list of colors, you could do:</p>
<pre class="prettyprint">
  &lt;s:select name="color" list="{'red','yellow','green'}" /&gt;
</pre>
<p>The OGNL expression is clever to interpret the "red","yellow","green" as colours and build a list based on that.</p>
<p>The OGNL expressions will be used extensively in the next chapters when we will study different tags. So rather than looking at them in isolation, let us look at it using some examples in the Form Tags / Control Tags / Data Tags and Ajax Tags section.</p>
<h2>ValueStack/OGNL Example:</h2>
<h2>Create Action:</h2>
<p>Let us consider following action class where we are accessing valueStack and then setting few keys which we will access using OGNL in our view ie. JSP page.</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

import java.util.*; 

import com.opensymphony.xwork2.util.ValueStack;
import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

public class HelloWorldAction extends ActionSupport{
   private String name;

   public String execute() throws Exception {
      ValueStack stack = ActionContext.getContext().getValueStack();
      Map&lt;String, Object&gt; context = new HashMap&lt;String, Object&gt;();

      context.put("key1", new String("This is key1")); 
      context.put("key2", new String("This is key2"));
      stack.push(context);

      System.out.println("Size of the valueStack: " + stack.size());
      return "success";
   }  

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }
}
</pre>
<p>Actually, Struts 2 adds your action to the top of the valueStack when executed. So, the usual way to put stuff on the Value Stack is to add getters/setters for the values to your Action class and then use &lt;s:property&gt; tag to access the values. But I'm showing you how exactly ActionContext and ValueStack work in struts.</p>
<h3>Create Views</h3>
<p>Let us create the below jsp file <b>HelloWorld.jsp</b> in the WebContent folder in your eclipse project. This view will be displayed in case action returns success:</p>
<pre class="prettyprint">
&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   Entered value : &lt;s:property value="name"/&gt;&lt;br/&gt;
   Value of key 1 : &lt;s:property value="key1" /&gt;&lt;br/&gt;
   Value of key 2 : &lt;s:property value="key2" /&gt; &lt;br/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>We also need to create <b>index.jsp</b> in the WebContent folder whose content is as follows:</p>
<pre class="prettyprint">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
   &lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h1&gt;Hello World From Struts2&lt;/h1&gt;
   &lt;form action="hello"&gt;
      &lt;label for="name"&gt;Please enter your name&lt;/label&gt;&lt;br/&gt;
      &lt;input type="text" name="name"/&gt;
      &lt;input type="submit" value="Say Hello"/&gt;
   &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<h3>Configuration Files</h3>
<p>Following is the content of <b>struts.xml</b> file:</p> 
<pre class="prettyprint"> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;

&lt;struts&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;

      &lt;action name="hello" 
         class="com.tutorialspoint.struts2.HelloWorldAction" 
         method="execute"&gt;
         &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
      &lt;/action&gt;

   &lt;/package&gt;
&lt;/struts&gt;
</pre> 
<p>Following is the content of <b>web.xml</b> file:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
   id="WebApp_ID" version="3.0"&gt;
   
   &lt;display-name&gt;Struts 2&lt;/display-name&gt;
   &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
   &lt;/welcome-file-list&gt;
   &lt;filter&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;filter-class&gt;
         org.apache.struts2.dispatcher.FilterDispatcher
      &lt;/filter-class&gt;
   &lt;/filter&gt;

   &lt;filter-mapping&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/filter-mapping&gt;
&lt;/web-app&gt;
</pre>
<p>Right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/index.jsp. This will give you following screen:</p> 
<center> 
<img class="main" src="../images/helloworldstruts4.jpg" alt="Hello World Input" /> 
</center> 
<p>Now enter any word in the given text box and click "Say Hello" button to execute the defined action. Now if you will check the log generated, you will find following text at the bottom:</p> 
<pre class="prettyprint"> 
Size of the valueStack: 3
</pre> 
<p>and this will display following screen, which will display whatever value you will enter and value of key1 and key2 which we had put on ValueStack.</p>
<center> 
<img class="main" src="../images/valuestackresult.jpg" alt="Value Stack Result" /> 
</center> 
<h2>Conclusion:</h2>
<p>Hope you have good grip on Struts 2 concepts. If you are willing to know more detail and further examples like file upload, sending email, form validations etc. then you can go through the complete tutorial.</p>
<hr />
<div class="pre-btn">
<a href="struts_hibernate.htm">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/struts_quick_guide.pdf" alt="Struts 2 Quick Guide" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="struts_useful_resources.htm">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.htm" target="_top">ASP.NET </a> |
<a href="../jquery/index.htm" target="_top">jQuery </a> |
<a href="../ajax/index.htm" target="_top">AJAX </a> |
<a href="../ant/index.htm" target="_top">ANT</a> |
<a href="../jsp/index.htm" target="_top">JSP </a> |
<a href="../servlets/index.htm" target="_top">Servlets </a> |
<a href="../log4j/index.htm" target="_top">log4j </a> |
<a href="../ibatis/index.htm" target="_top">iBATIS </a> |
<a href="../hibernate/index.htm" target="_top">Hibernate </a> |
<a href="../jdbc/index.htm" target="_top">JDBC </a> |
<a href="index.htm" target="_top">Struts </a> |
<a href="../html5/index.htm" target="_top">HTML5 </a> |
<a href="../sql/index.htm" target="_top">SQL </a> |
<a href="../mysql/index.htm" target="_top">MySQL </a> |
<a href="../cplusplus/index.htm" target="_top">C++ </a> |
<a href="../unix/index.htm" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_quick_guide.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 13 Apr 2013 21:15:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>