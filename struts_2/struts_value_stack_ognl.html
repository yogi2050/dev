<!doctype html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_value_stack_ognl.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:50:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8">
<title>Struts 2 Value Stack/OGNL</title>
<link rel="shortcut icon" href="../favicon.png" type="image/x-icon" />
<meta name="description" content="Struts 2 Value Stack/OGNL - Learn what is Basic Model View and Controller Architecture along with Struts 2 in simple and easy steps starting from Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling and Annotations." />
<meta name="Keywords" content="Struts, Tutorials, Learning, Beginners, Environment Setup, Architecture, Configuration, Actions, Interceptors, Results, Result Types, File Uploads, Database Access, Validations, Localization, Type Conversion, Tag Library, Exeption Handling, Annotations." />
<base  />
<link rel="stylesheet" type="text/css" href="../scripts/style.css" />
<link rel="stylesheet" type="text/css" href="../scripts/prettify.css" />
<script type="text/javascript" src="../scripts/prettify.js"></script>
<style media="screen" type="text/css">
#topmenu a:hover {text-decoration:none;color:#5c83ba !important;background-color:transparent;font-weight:bold;}
#header{ 
background:#5c83ba !important;
}
#topmenu
{
background-color:#121212 !important;
}
#leftcol ul.menu li.heading 
{
background:#5c83ba !important;
border:1px solid #121212 !important;
}
#leftcol, #middlecol, #rightcol {min-height:1020px; padding:0px;}
</style>
<script src="../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body onload="prettyPrint()">
<div id="header">
<div class="wrapper">
<h1 class="logo"><a href="../index-2.html">Tutorials Point - Simply Easy Learning</a></h1>
<div id="search">
<form method="get" id="searchform" name="searchform" action="http://www.google.com/search" target="_blank">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com"/>
<input type="text" name="as_q" id="s" value="Search this site..." onfocus="if (this.value == 'Search this site...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search this site...';}"/>
<input value="FORID:11" name="cof" type="hidden"/>
<input type="hidden" name="ie" value="ISO-8859-1" />
<input class="submit btn" type="image" src="../images/icon-search.png" alt="Go"/>
</form>
</div>
</div>
</div>
<div id="topmenu">
<div class="wrapper">
<div id="left">
<a href="../index-2.html" target="_top">HOME </a>
<a href="../java/index.html" target="_top">JAVA </a>
<a href="../php/index.html" target="_top">PHP </a>
<a href="../python/index.html" target="_top">Python </a>
<a href="../ruby/index.html" target="_top">Ruby </a>
<a href="../perl/index.html" target="_top">Perl </a>
<a href="../html/index.html" target="_top">HTML </a>
<a href="../css/index.html" target="_top">CSS </a>
<a href="../javascript/index.html" target="_top">Javascript </a>
<a href="../mysql/index.html" target="_top">MySQL </a>
<a href="../cplusplus/index.html" target="_top">C++ </a>
<a href="../unix/index.html" target="_top">UNIX </a>
<a href="../more.html" target="_top">MORE...</a>
</div>
<div id="right">
<a href="../references.html" target="_top">REFERENCES</a> |
<a href="../forums/index.html" target="_top">FORUM</a> |
<a href="../about/index.html" target="_top">ABOUT</a> |
<a href="../about/contact_us.html" target="_top">CONTACT</a>
</div>
</div>
</div>
<div class="wrapper">
<div id="leftcol">
<div class="mini-logo">
<img src="../images/struts-mini-logo.png" alt="Struts Tutorial" />
</div>
<ul class="menu">
<li class="heading">Struts 2 Basics</li>
<li><a class="left" target="_top" href="index.html">Struts2 Home</a></li>
<li><a class="left" target="_top" href="basic_mvc_architecture.html">Basic MVC Architecture</a></li>
<li><a class="left" target="_top" href="struts_overview.html">Struts2 Overview</a></li>
<li><a class="left" target="_top" href="struts_environment_setup.html">Struts2 Environment Setup</a></li>
<li><a class="left" target="_top" href="struts_architecture.html">Struts2 Architecture</a></li>
<li><a class="left" target="_top" href="struts_examples.html">Struts2 Examples</a></li>
<li><a class="left" target="_top" href="struts_configuration.html">Struts2 Configuration</a></li>
<li><a class="left" target="_top" href="struts_actions.html">Struts2 Actions</a></li>
<li><a class="left" target="_top" href="struts_interceptors.html">Struts2 Interceptors</a></li>
<li><a class="left" target="_top" href="struts_result_types.html">Struts2 Result Types</a></li>
<li><a class="left" target="_top" href="struts_value_stack_ognl.html"><b>Struts2 Value Stack/OGNL</b></a></li>
<li><a class="left" target="_top" href="struts_file_uploads.html">Struts2 File Uploads</a></li>
<li><a class="left" target="_top" href="struts_database_access.html">Struts2 Database Access</a></li>
<li><a class="left" target="_top" href="struts_sending_email.html">Struts2 Sending Email</a></li>
<li><a class="left" target="_top" href="struts_validations.html">Struts2 Validations</a></li>
<li><a class="left" target="_top" href="struts_localization.html">Struts2 Localization</a></li>
<li><a class="left" target="_top" href="struts_type_conversion.html">Struts2 Type Conversion</a></li>
<li><a class="left" target="_top" href="struts_themes_templates.html">Struts2 Themes/Templates</a></li>
<li><a class="left" target="_top" href="struts_exception_handling.html">Struts2 Exception Handling</a></li>
<li><a class="left" target="_top" href="struts_annotations.html">Struts2 Annotations</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Tags</li>
<li><a class="left" target="_top" href="struts_control_tags.html">Struts2 Control Tags</a></li>
<li><a class="left" target="_top" href="struts_data_tags.html">Struts2 Data Tags</a></li>
<li><a class="left" target="_top" href="struts_form_tags.html">Struts2 Form Tags</a></li>
<li><a class="left" target="_top" href="struts_ajax_tags.html">Struts2 Ajax Tags</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Integrations</li>
<li><a class="left" target="_top" href="struts_spring.html">Struts2 - Spring</a></li>
<li><a class="left" target="_top" href="struts_tiles.html">Struts2 - Tiles</a></li>
<li><a class="left" target="_top" href="struts_hibernate.html">Struts2 - Hibernate</a></li>
</ul>
<ul class="menu">
<li class="heading">Struts 2 Useful Resources</li>
<li><a class="left" target="_top" href="struts_quick_guide.html">Struts2 Quick Guide</a></li>
<li><a class="left" target="_top" href="struts_useful_resources.html">Struts2 Useful Resources</a></li>
</ul>
<ul class="menu">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="../developers_best_practices/index.html">Developer's Best Practices</a></li>
<li><a target="_top" href="../computer_glossary.html">Computer Glossary</a></li>
<li><a target="_top" href="../computer_whoiswho.html">Who is Who</a></li>
</ul>
</div><!-- leftcol -->
<div id="middlecol">
<!-- PRINTING STARTS HERE -->
<div class="content">
<h1>Struts 2 Value Stack/OGNL</h1>
<div class="topgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
<hr />
<div class="pre-btn">
<a href="struts_result_types.html">Previous Page</a>
</div>
<div class="nxt-btn">
<a href="struts_file_uploads.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
<h2>The Value Stack:</h2>
<p>The value stack is a set of several objects which keeps the following objects in the provided order:</p>
<table class="src"> 
<tr><th style="width:5">SN </th><th>Objects &amp; Description</th></tr>
<tr><td>1</td><td><b>Temporary Objects</b><br />There are various temporary objects which are created during execution of a page. For example the current iteration value for a collection being looped over in a JSP tag.</td></tr> 
<tr><td>2</td><td><b>The Model Object</b><br />If you are using model objects in your struts application, the current model object is placed before the action on the value stack</td></tr> 
<tr><td>3</td><td><b>The Action Object</b><br />This will be the current action object which is being executed.</td></tr> 
<tr><td>4</td><td><b>Named Objects</b><br />These objects include #application, #session, #request, #attr and #parameters and refer to the corresponding servlet scopes</td></tr>
</table>
<p>The value stack can be accessed via the tags provided for JSP, Velocity or Freemarker. There are various tags which we will study in separate chapters, are used to get and set struts 2.0 value stack. You can get valueStack object inside your action as follows: </p>
<pre class="prettyprint">
ActionContext.getContext().getValueStack()
</pre>
<p>Once you have a ValueStack object, you can use following methods to manipulate that object:</p>
<table class="src"> 
<tr><th style="width:5">SN </th><th>ValueStack Methods &amp; Description</th></tr>
<tr><td>1</td><td><b>Object findValue(String expr)</b><br />Find a value by evaluating the given expression against the stack in the default search order.</td></tr>
<tr><td>2</td><td><b>CompoundRoot getRoot()</b><br />Get the CompoundRoot which holds the objects pushed onto the stack.</td></tr> 
<tr><td>3</td><td><b>Object peek()</b><br />Get the object on the top of the stack without changing the stack.</td></tr>
<tr><td>4</td><td><b>Object pop()</b><br />Get the object on the top of the stack and remove it from the stack.</td></tr> 
<tr><td>5</td><td><b>void push(Object o)</b><br />Put this object onto the top of the stack.</td></tr> 
<tr><td>6</td><td><b>void set(String key, Object o)</b><br />Sets an object on the stack with the given key so it is retrievable by findValue(key,...)</td></tr> 
<tr><td>7</td><td><b>void setDefaultType(Class defaultType)</b><br />Sets the default type to convert to if no type is provided when getting a value.</td></tr> 
<tr><td>8</td><td><b>void setValue(String expr, Object value)</b><br />Attempts to set a property on a bean in the stack with the given expression using the default search order.</td></tr> 
<tr><td>9</td><td><b>int size()</b><br />Get the number of objects in the stack.</td></tr> 
</table>
<h2>The OGNL:</h2>
<p><b>The Object-Graph Navigation Language</b> (OGNL) is a powerful expression language that is used to reference and manipulate data on the ValueStack. OGNL also helps in data transfer and type conversion.</p>
<p>The OGNL is very similar to the JSP Expression Language. OGNL is based on the idea of having a root or default object within the context. The properties of the default or root object can be referenced using the markup notation, which is the pound symbol.</p>
<p>As mentioned earlier, OGNL is based on a context and Struts builds an ActionContext  map for use with OGNL. The ActionContext map consists of the following:</p>
<ul class="list">
  <li><p><b>application</b> - application scoped variables</p></li>
  <li><p><b>session</b> - session scoped variables</p></li>
  <li><p><b>root / value stack</b> - all your action variables are stored here</p></li>
  <li><p><b>request</b> - request scoped variables</p></li>
  <li><p><b>parameters</b> - request parameters</p></li>
  <li><p><b>atributes</b> - the attributes stored in page, request, session and application scope</p></li>
</ul>
<p>It is important to understand that the Action object is always available in the value stack. So, therefore if your Action object has properties x and y there are readily available for you to use.</p>
<p>Objects in the ActionContext are referred using the pound symbol, however, the objects in the value stack can be directly referenced, for example if <b>employee</b> is a property of an action class then it can ge referenced as follows:</p>
<pre class="prettyprint">
  &lt;s:property value="name"/&gt;
</pre>
<p>instead of</p>
<pre class="prettyprint">
  &lt;s:property value="#name"/&gt;
</pre>
<p>If you have an attribute in session called "login" you can retrieve it as follows:</p>
<pre class="prettyprint">
  &lt;s:property value="#session.login"/&gt;
</pre>
<p>OGNL also supports dealing with collections - namely Map, List and Set. For example to display a dropdown list of colors, you could do:</p>
<pre class="prettyprint">
  &lt;s:select name="color" list="{'red','yellow','green'}" /&gt;
</pre>
<p>The OGNL expression is clever to interpret the "red","yellow","green" as colours and build a list based on that.</p>
<p>The OGNL expressions will be used extensively in the next chapters when we will study different tags. So rather than looking at them in isolation, let us look at it using some examples in the Form Tags / Control Tags / Data Tags and Ajax Tags section.</p>
<h2>ValueStack/OGNL Example:</h2>
<h3>Create Action:</h3>
<p>Let us consider following action class where we are accessing valueStack and then setting few keys which we will access using OGNL in our view ie. JSP page.</p>
<pre class="prettyprint">
package com.tutorialspoint.struts2;

import java.util.*; 

import com.opensymphony.xwork2.util.ValueStack;
import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

public class HelloWorldAction extends ActionSupport{
   private String name;

   public String execute() throws Exception {
      ValueStack stack = ActionContext.getContext().getValueStack();
      Map&lt;String, Object&gt; context = new HashMap&lt;String, Object&gt;();

      context.put("key1", new String("This is key1")); 
      context.put("key2", new String("This is key2"));
      stack.push(context);

      System.out.println("Size of the valueStack: " + stack.size());
      return "success";
   }  

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }
}
</pre>
<p>Actually, Struts 2 adds your action to the top of the valueStack when executed. So, the usual way to put stuff on the Value Stack is to add getters/setters for the values to your Action class and then use &lt;s:property&gt; tag to access the values. But I'm showing you how exactly ActionContext and ValueStack work in struts.</p>
<h3>Create Views</h3>
<p>Let us create the below jsp file <b>HelloWorld.jsp</b> in the WebContent folder in your eclipse project. This view will be displayed in case action returns success:</p>
<pre class="prettyprint">
&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   Entered value : &lt;s:property value="name"/&gt;&lt;br/&gt;
   Value of key 1 : &lt;s:property value="key1" /&gt;&lt;br/&gt;
   Value of key 2 : &lt;s:property value="key2" /&gt; &lt;br/&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>We also need to create <b>index.jsp</b> in the WebContent folder whose content is as follows:</p>
<pre class="prettyprint">
&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags"%&gt;
   &lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h1&gt;Hello World From Struts2&lt;/h1&gt;
   &lt;form action="hello"&gt;
      &lt;label for="name"&gt;Please enter your name&lt;/label&gt;&lt;br/&gt;
      &lt;input type="text" name="name"/&gt;
      &lt;input type="submit" value="Say Hello"/&gt;
   &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<h3>Configuration Files</h3>
<p>Following is the content of <b>struts.xml</b> file:</p> 
<pre class="prettyprint"> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;

&lt;struts&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
   &lt;package name="helloworld" extends="struts-default"&gt;

      &lt;action name="hello" 
         class="com.tutorialspoint.struts2.HelloWorldAction" 
         method="execute"&gt;
         &lt;result name="success"&gt;/HelloWorld.jsp&lt;/result&gt;
      &lt;/action&gt;

   &lt;/package&gt;
&lt;/struts&gt;
</pre> 
<p>Following is the content of <b>web.xml</b> file:</p>
<pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
   id="WebApp_ID" version="3.0"&gt;
   
   &lt;display-name&gt;Struts 2&lt;/display-name&gt;
   &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
   &lt;/welcome-file-list&gt;
   &lt;filter&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;filter-class&gt;
         org.apache.struts2.dispatcher.FilterDispatcher
      &lt;/filter-class&gt;
   &lt;/filter&gt;

   &lt;filter-mapping&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/filter-mapping&gt;
&lt;/web-app&gt;
</pre>
<p>Right click on the project name and click <b>Export &gt; WAR File</b> to create a War file. Then deploy this WAR in the Tomcat's webapps directory. Finally, start Tomcat server and try to access URL http://localhost:8080/HelloWorldStruts2/index.jsp. This will give you following screen:</p> 
<center> 
<img class="main" src="../images/helloworldstruts4.jpg" alt="Hello World Input" /> 
</center> 
<p>Now enter any word in the given text box and click "Say Hello" button to execute the defined action. Now if you will check the log generated, you will find following text at the bottom:</p>  
<pre class="prettyprint"> 
Size of the valueStack: 3
</pre> 
<p>and this will display following screen, which will display whatever value you will enter and value of key1 and key2 which we had put on ValueStack.</p>
<hr />
<div class="pre-btn">
<a href="struts_result_types.html">Previous Page</a>
</div>
<div class="print-btn">
<a href="../cgi-bin/printpage.html" target="_blank">Print Version</a>
</div>
<div class="pdf-btn">
<a href="pdf/struts_value_stack_ognl.pdf" alt="Struts 2 Value Stack/OGNL" target="_blank">PDF Version</a>
</div>
<div class="nxt-btn">
<a href="struts_file_uploads.html">Next Page</a>
</div>
<div class="clearer"></div>
<hr />
</div>
<!-- PRINTING ENDS HERE -->
<div class="bottomgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="../../pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>
</div><!-- middlecol -->
<div id="rightcol">
<!-- AddThis Button BEGIN -->
<div class="addthis">
<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<script type="text/javascript">
<!--
 document.write('<a class="addthis_button_google_plusone" g:plusone:count="false"></a>');
//-->
</script>
<a class="addthis_button_linkedin"></a>
<a class="addthis_button_email"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="../../s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f661ec623a400f0"></script>
</div>
<!-- AddThis Button END -->
<div class="localad">
<a rel="nofollow" href="http://www.modernindianbabynames.com/" target="_blank" title="Modern Baby Names">Modern Baby Names</a>
</div>
<div class="localad">
<a rel="nofollow" href="http://www.photofuntoos.com/" target="_blank" title="Online Photo Editing">Online Photo Editing</a>
</div>
<div class="rightgooglead">
<div style="padding-bottom:5px;padding-left:10px;">Advertisements</div>
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
src="../../pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script>
</div>
</div><!-- rightcol -->
<div style="clear:both;"></div>
</div><!-- wrapper -->
<div id="footer">
<div class="wrapper">
<div id="bottommenu">
<a href="../asp.net/index.html" target="_top">ASP.NET </a> |
<a href="../jquery/index.html" target="_top">jQuery </a> |
<a href="../ajax/index.html" target="_top">AJAX </a> |
<a href="../ant/index.html" target="_top">ANT</a> |
<a href="../jsp/index.html" target="_top">JSP </a> |
<a href="../servlets/index.html" target="_top">Servlets </a> |
<a href="../log4j/index.html" target="_top">log4j </a> |
<a href="../ibatis/index.html" target="_top">iBATIS </a> |
<a href="../hibernate/index.html" target="_top">Hibernate </a> |
<a href="../jdbc/index.html" target="_top">JDBC </a> |
<a href="index.html" target="_top">Struts </a> |
<a href="../html5/index.html" target="_top">HTML5 </a> |
<a href="../sql/index.html" target="_top">SQL </a> |
<a href="../mysql/index.html" target="_top">MySQL </a> |
<a href="../cplusplus/index.html" target="_top">C++ </a> |
<a href="../unix/index.html" target="_top">UNIX </a>
</div>
<div id="copyright">
<p>Copyright &copy; 2013 by tutorialspoint. All Rights Reserved.</p>
</div>
</div>
</div>
</body>

<!-- Mirrored from www.tutorialspoint.com/struts_2/struts_value_stack_ognl.htm by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 14 Apr 2013 19:50:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>